var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,r=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&s(e,n,t[n]);if(i)for(var n of i(t))o.call(t,n)&&s(e,n,t[n]);return e},l=(e,i)=>t(e,n(i));import{_ as u,q as d,n as c,o as p,r as _,t as h,v as f,w as m,x as g,y as b,z as y,A as v,B as w,D as x,G as C,H as k,j as E,c as O,k as S,s as D,C as A,I as T,J as I,K as M,L as R,M as L,N,O as V,R as z,S as P,T as U,U as j,W as G,X as Z,Y as F,Z as B,$ as Y,a0 as X,a1 as $}from"./index.23ee6f22.js";import{G as W,c as H,s as K,S as J}from"./CommonRender.d6009dc7.js";import{e as q,f as Q,F as ee,H as te,L as ne,M as ie,J as ae,al as oe,D as se,a7 as re,am as le,I as ue,W as de,X as ce,r as pe,h as _e,w as he,d as fe,C as me,g as ge,A as be,k as ye,E as ve,n as we,an as xe,Y as Ce,ak as ke,ao as Ee,ap as Oe,af as Se,aq as De,ar as Ae,t as Te,B as Ie,s as Me,as as Re,x as Le,o as Ne,y as Ve,a as ze,at as Pe,au as Ue,v as je,av as Ge,i as Ze,aw as Fe,u as Be,p as Ye,ax as Xe,z as $e,ay as We,az as He,aA as Ke,aB as Je,m as qe,_ as Qe}from"./vendor.70e2a6e0.js";import{c as et,d as tt,g as nt,e as it,h as at,f as ot}from"./nodes.a56b7126.js";import{b as st}from"./form.e330999e.js";var rt={data:()=>({showEdit:!1}),methods:{enableEdit(){this.showEdit=!this.showEdit}}};const lt={name:"grid-row",mixins:[rt,W,H],components:{UnitInput:u},data:()=>({rowv2:[],rowvItems:[]}),props:{layout:{type:Array,default:[]}},watch:{showEdit(e){e&&this.$nextTick((()=>{this.resetTools()}))},layout:{handler(e){this.rowv2=e,this.$nextTick((()=>{this.init().then((()=>{this.rowvItems=JSON.parse(JSON.stringify(this.rowv2))}))}))},immediate:!0}},methods:{resetTools(){Array.isArray(this.rowv2)&&this.rowv2.length>0?this.resetSortableV2(this.rowv2,{option:{handle:".grid-column-handle"},onEnd(e){this.showEdit=!1,this.rowvItems=JSON.parse(JSON.stringify(e)),this.$nextTick((()=>{this.showEdit=!0}))}}):this.rowvItems=[]},parseNum:e=>parseInt(e),changeItem(e){console.log("change",e),this.init().then((()=>{this.rowvItems=JSON.parse(JSON.stringify(this.rowv2))}))},removeItem(e){console.log(e),this.rowv2.splice(e,1),this.init().then((()=>{this.rowvItems=JSON.parse(JSON.stringify(this.rowv2))}))},addItem(){this.rowv2.push({w:"1fr",h:"50%",style:{width:""}}),this.init().then((()=>{this.rowvItems=JSON.parse(JSON.stringify(this.rowv2))}))},init(){return this.rowv2.forEach((e=>{e.style||(e.style={width:""})})),this.calcWidth(this.rowv2),this.calcHeight(this.rowv2),Promise.resolve()}}};lt.render=function(e,t,n,i,a,o){return q(),Q("div",se({class:"vue-grid-row"},e.getAttrs("attrs"),{style:e.getAttrs("styles")}),[(q(!0),Q(ee,null,te(a.rowv2,((t,n)=>(q(),Q("div",{class:"vue-row-item",style:ne(t.style)},[ie(e.$slots,"default",ae(oe({item:t,index:n})),void 0,!0)],4)))),256))],16)},lt.__scopeId="data-v-0b112a1b";const ut={"resizable-r":{bit:1,cursor:"e-resize"},"resizable-rb":{bit:3,cursor:"se-resize"},"resizable-b":{bit:2,cursor:"s-resize"},"resizable-lb":{bit:6,cursor:"sw-resize"},"resizable-l":{bit:4,cursor:"w-resize"},"resizable-lt":{bit:12,cursor:"nw-resize"},"resizable-t":{bit:8,cursor:"n-resize"},"resizable-rt":{bit:9,cursor:"ne-resize"},"drag-el":{bit:15,cursor:"pointer"}},dt=1,ct=2,pt=4,_t=8,ht={name:"VResizable",props:{width:{default:void 0,type:[Number,String]},minWidth:{default:0,type:Number},maxWidth:{default:void 0,type:Number},height:{default:void 0,type:[Number,String]},minHeight:{default:0,type:Number},maxHeight:{default:void 0,type:Number},left:{default:0,type:[Number,String]},top:{default:0,type:[Number,String]},active:{default:()=>["r","rb","b","lb","l","lt","t","rt"],validator:e=>["r","rb","b","lb","l","lt","t","rt"].filter((t=>-1!==e.indexOf(t))).length===e.length,type:Array},fitParent:{default:!1,type:Boolean},dragSelector:{default:void 0,type:String},maximize:{default:!1,type:Boolean},disableAttributes:{default:()=>[],validator:e=>["l","t","w","h"].filter((t=>-1!==e.indexOf(t))).length===e.length,type:Array}},emits:["mount","destroy","resize:start","resize:move","resize:end","drag:start","drag:move","drag:end","maximize"],data(){return{w:this.width,h:this.height,minW:this.minWidth,minH:this.minHeight,maxW:this.maxWidth,maxH:this.maxHeight,l:this.left,t:this.top,mouseX:0,mouseY:0,offsetX:0,offsetY:0,parent:{width:0,height:0},resizeState:0,dragElements:[],dragState:!1,calcMap:15}},computed:{style(){return r(r(r(r({},this.calcMap&pt&&{width:"number"==typeof this.w?this.w+"px":this.w}),this.calcMap&_t&&{height:"number"==typeof this.h?this.h+"px":this.h}),this.calcMap&dt&&{left:"number"==typeof this.l?this.l+"px":this.l}),this.calcMap&ct&&{top:"number"==typeof this.t?this.t+"px":this.t})}},watch:{maxWidth(e){this.maxW=e},maxHeight(e){this.maxH=e},minWidth(e){this.minW=e},minHeight(e){this.minH=e},width(e){"number"==typeof e&&(this.w=e)},height(e){"number"==typeof e&&(this.h=e)},left(e){"number"==typeof e&&(this.l=e)},top(e){"number"==typeof e&&(this.t=e)},dragSelector(e){this.setupDragElements(e)},maximize(e){this.setMaximize(e),this.emitEvent("maximize",{state:e})}},mounted(){this.width?"auto"!==this.width&&"number"!=typeof this.width&&(this.w=this.$el.clientWidth):this.w=this.$el.parentElement.clientWidth,this.height?"auto"!==this.height&&"number"!=typeof this.height&&(this.h=this.$el.clientHeight):this.h=this.$el.parentElement.clientHeight,"number"!=typeof this.left&&(this.l=this.$el.offsetLeft-this.$el.parentElement.offsetLeft),"number"!=typeof this.top&&(this.t=this.$el.offsetTop-this.$el.parentElement.offsetTop),this.minW&&this.w<this.minW&&(this.w=this.minW),this.minH&&this.h<this.minH&&(this.h=this.minH),this.maxW&&this.w>this.maxW&&(this.w=this.maxW),this.maxH&&this.h>this.maxH&&(this.h=this.maxH),this.setMaximize(this.maximize),this.setupDragElements(this.dragSelector),this.disableAttributes.forEach((e=>{switch(e){case"l":this.calcMap&=~dt;break;case"t":this.calcMap&=~ct;break;case"w":this.calcMap&=~pt;break;case"h":this.calcMap&=~_t}})),document.documentElement.addEventListener("mousemove",this.handleMove,!0),document.documentElement.addEventListener("mousedown",this.handleDown,!0),document.documentElement.addEventListener("mouseup",this.handleUp,!0),document.documentElement.addEventListener("touchmove",this.handleMove,!0),document.documentElement.addEventListener("touchstart",this.handleDown,!0),document.documentElement.addEventListener("touchend",this.handleUp,!0),this.emitEvent("mount")},beforeUnmount(){document.documentElement.removeEventListener("mousemove",this.handleMove,!0),document.documentElement.removeEventListener("mousedown",this.handleDown,!0),document.documentElement.removeEventListener("mouseup",this.handleUp,!0),document.documentElement.removeEventListener("touchmove",this.handleMove,!0),document.documentElement.removeEventListener("touchstart",this.handleDown,!0),document.documentElement.removeEventListener("touchend",this.handleUp,!0),this.emitEvent("destroy")},methods:{setMaximize(e){const t=this.$el.parentElement;e?(this.prevState={w:this.w,h:this.h,l:this.l,t:this.t},this.t=this.l=0,this.w=t.clientWidth,this.h=t.clientHeight):this.restoreSize()},restoreSize(){this.prevState&&(this.l=this.prevState.l,this.t=this.prevState.t,this.h=this.prevState.h,this.w=this.prevState.w)},setupDragElements(e){this.$el.querySelectorAll(".drag-el").forEach((e=>{e.classList.remove("drag-el")}));const t=this.$el.querySelectorAll(e);t.forEach((e=>{e.classList.add("drag-el")})),this.dragElements=Array.prototype.slice.call(t)},emitEvent(e,t){this.$emit(e,r({eventName:e,left:this.l,top:this.t,width:this.w,height:this.h},t))},handleMove(e){if(0!==this.resizeState){let t,n;if(this.dragState||(isNaN(this.w)&&(this.w=this.$el.clientWidth),isNaN(this.h)&&(this.h=this.$el.clientHeight)),e.touches&&e.touches.length>=0?(t=e.touches[0].clientY,n=e.touches[0].clientX):(t=e.clientY,n=e.clientX),this.maximize&&this.prevState){const e=this.parent.width,i=this.parent.height;this.restoreSize(),this.prevState=void 0,this.t=t>i/2?i-this.h:0,this.l=n>e/2?e-this.w:0,this.emitEvent("maximize",{state:!1})}let i=n-this.mouseX+this.offsetX,a=t-this.mouseY+this.offsetY;if(this.$el.getBoundingClientRect){const e=this.$el.getBoundingClientRect(),t=e.width/this.$el.offsetWidth,n=e.height/this.$el.offsetHeight;i/=t,a/=n}this.offsetX=this.offsetY=0,this.resizeState&ut["resizable-r"].bit&&(!this.dragState&&this.w+i<this.minW?this.offsetX=i-(i=this.minW-this.w):!this.dragState&&this.maxW&&this.w+i>this.maxW&&(!this.fitParent||this.w+this.l<this.parent.width)?this.offsetX=i-(i=this.maxW-this.w):this.fitParent&&this.l+this.w+i>this.parent.width&&(this.offsetX=i-(i=this.parent.width-this.l-this.w)),this.calcMap&pt&&(this.w+=this.dragState?0:i)),this.resizeState&ut["resizable-b"].bit&&(!this.dragState&&this.h+a<this.minH?this.offsetY=a-(a=this.minH-this.h):!this.dragState&&this.maxH&&this.h+a>this.maxH&&(!this.fitParent||this.h+this.t<this.parent.height)?this.offsetY=a-(a=this.maxH-this.h):this.fitParent&&this.t+this.h+a>this.parent.height&&(this.offsetY=a-(a=this.parent.height-this.t-this.h)),this.calcMap&_t&&(this.h+=this.dragState?0:a)),this.resizeState&ut["resizable-l"].bit&&(!this.dragState&&this.w-i<this.minW?this.offsetX=i-(i=this.w-this.minW):!this.dragState&&this.maxW&&this.w-i>this.maxW&&this.l>=0?this.offsetX=i-(i=this.w-this.maxW):this.fitParent&&this.l+i<0&&(this.offsetX=i-(i=-this.l)),this.calcMap&dt&&(this.l+=i),this.calcMap&pt&&(this.w-=this.dragState?0:i)),this.resizeState&ut["resizable-t"].bit&&(!this.dragState&&this.h-a<this.minH?this.offsetY=a-(a=this.h-this.minH):!this.dragState&&this.maxH&&this.h-a>this.maxH&&this.t>=0?this.offsetY=a-(a=this.h-this.maxH):this.fitParent&&this.t+a<0&&(this.offsetY=a-(a=-this.t)),this.calcMap&ct&&(this.t+=a),this.calcMap&_t&&(this.h-=this.dragState?0:a)),this.mouseX=n,this.mouseY=t;const o=this.dragState?"drag:move":"resize:move";this.emitEvent(o)}},handleDown(e){if(!e.target.closest||e.target.closest(".resizable-component")===this.$refs.parent)for(let t in ut)if(this.$el.contains(e.target)&&(e.target.closest&&e.target.closest(`.${t}`)||e.target.classList.contains(t))){"drag-el"===t&&(this.dragState=!0),document.body.style.cursor=ut[t].cursor,e.touches&&e.touches.length>=1?(this.mouseX=e.touches[0].clientX,this.mouseY=e.touches[0].clientY):(e.preventDefault&&e.preventDefault(),this.mouseX=e.clientX,this.mouseY=e.clientY),this.offsetX=this.offsetY=0,this.resizeState=ut[t].bit,this.parent.height=this.$el.parentElement.clientHeight,this.parent.width=this.$el.parentElement.clientWidth;const n=this.dragState?"drag:start":"resize:start";this.emitEvent(n);break}},handleUp(){if(0!==this.resizeState){this.resizeState=0,document.body.style.cursor="";const e=this.dragState?"drag:end":"resize:end";this.emitEvent(e),this.dragState=!1}}}};ht.render=function(e,t,n,i,a,o){return q(),Q("div",{ref:"parent",class:"resizable-component",style:ne(o.style)},[ie(e.$slots,"default",{},void 0,!0),(q(!0),Q(ee,null,te(n.active,(e=>re((q(),Q("div",{key:e,class:ue("resizable-"+e)},null,2)),[[le,!n.maximize]]))),128))],4)},ht.__scopeId="data-v-5e33cff0";const ft={name:"grid-column",mixins:[rt,W],components:{UnitInput:u,VueResizable:ht},data:()=>({rowv2:[],rowvItems:[]}),props:{layout:{type:Array,default:[]}},watch:{showEdit(e){e&&this.$nextTick((()=>{this.resetTools()}))},layout:{handler(e){this.rowv2=e,this.$nextTick((()=>{this.init().then((()=>{this.rowvItems=JSON.parse(JSON.stringify(e))}))}))},immediate:!0}},methods:{resetTools(){this.resetSortableV2(this.rowv2,{option:{handle:".grid-column-handle"},onEnd(e){this.showEdit=!1,this.rowvItems=JSON.parse(JSON.stringify(e)),this.$nextTick((()=>{this.showEdit=!0}))}})},onResizeEnd(e,t,n){this.rowv2[t].h=n.height,e.h=n.height,this.$nextTick((()=>{this.init()}))},parseNum:e=>parseInt(e),addItem(){this.rowv2.push({style:{height:""},h:100}),this.$nextTick((()=>{this.init().then((()=>{this.rowvItems=JSON.parse(JSON.stringify(this.rowv2))}))}))},init(){return this.rowv2.forEach((e=>{e.style||(e.style={width:""})})),this.calcWidth(this.rowv2),this.calcHeight(this.rowv2),Promise.resolve()}}};de("data-v-18d404c5");const mt={class:"vue-grid-column"};ce(),ft.render=function(e,t,n,i,a,o){return q(),Q("div",mt,[(q(!0),Q(ee,null,te(a.rowv2,((t,n)=>(q(),Q("div",{active:["b"],class:"vue-column-item",style:ne(t.style)},[ie(e.$slots,"default",ae(oe({item:t,index:n})),void 0,!0)],4)))),256))])},ft.__scopeId="data-v-18d404c5";const gt={name:"render-tab",mixins:[rt,W],components:{},data:()=>({rowv2:[],current:""}),props:{layout:{type:Array,default:[]}},watch:{layout:{handler(e){this.rowv2=e,this.current=e[0].name,this.$nextTick((()=>{this.init().then((()=>{}))}))},immediate:!0}},methods:{init(){return Array.isArray(this.rowv2)&&this.rowv2.forEach((e=>{})),Promise.resolve()}}};gt.render=function(e,t,n,i,a,o){const s=pe("el-tab-pane"),r=pe("el-tabs");return q(),_e(r,{class:"render-tab",modelValue:a.current,"onUpdate:modelValue":t[0]||(t[0]=e=>a.current=e)},{default:he((()=>[(q(!0),Q(ee,null,te(a.rowv2,((t,n)=>(q(),_e(s,{label:t.label,name:t.name},{default:he((()=>[ie(e.$slots,"default",ae(oe({item:t,index:n})))])),_:2},1032,["label","name"])))),256))])),_:3},8,["modelValue"])};const bt=fe({name:"render-modal",mixins:[],components:{},data:()=>({rowv2:[],dialogVisible:!1,current:""}),props:{layout:{type:Array,default:[]},obj:{type:Object,default:()=>({})},page:null},watch:{layout:{handler(e){this.rowv2=e,this.current=e[0].name,this.$nextTick((()=>{this.init().then((()=>{}))}))},immediate:!0}},methods:{init(){Array.isArray(this.rowv2)&&this.rowv2.forEach((e=>{}));let e=ZY.lodash.get(this.obj,"data.pageRef");return this.page.modalManRef.register(this,e),Promise.resolve()},toggle(e){this.dialogVisible=e}},beforeUnmount(){this.page.modalManRef.destory(this.obj.pageRef)}}),yt={class:"dialog-footer"},vt=be("取 消"),wt=be("确 定");bt.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("el-dialog");return q(),_e(r,{title:"提示",modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogVisible=t),width:"30%"},{footer:he((()=>[me("span",yt,[ge(s,{onClick:t[0]||(t[0]=t=>e.dialogVisible=!1)},{default:he((()=>[vt])),_:1}),ge(s,{type:"primary",onClick:t[1]||(t[1]=t=>e.dialogVisible=!1)},{default:he((()=>[wt])),_:1})])])),default:he((()=>[me("div",null,[ie(e.$slots,"default",ae(oe({item:e.rowv2[0],index:0})))])])),_:3},8,["modelValue"])};const xt={name:"RenderLayout",props:{level:{type:Number,default:0},map:{type:Object,default:()=>({})},page:null,id:{type:String},handleNext:{type:Function,default:null},handleDefMap:{type:Function,default:null},slotContent:null},components:{RenderModal:bt,RenderTab:gt,AutoHttpCom:d,GridColumn:ft,GridRow:lt},data(){return{lock:new ZY.Lock,innerSlots:this.slotContent?this.slotContent:this.$slots,cachedMap:{}}},computed:{curObj(){return this.map[this.id]?this.map[this.id]:{data:[]}},levelItemCls(){return["layout-level-"+this.level]}},methods:{getShow(e){if(void 0!==this.cachedMap[e])return this.cachedMap[e];this.lock.lock((()=>{this.cachedMap[e]=!0}),100)},getObj:(...e)=>ZY.lodash.get(...e),render(){return this.$slots},getNext(e){let t="";return this.handleNext&&(t=this.handleNext(e)),t},getDef(e){if(this.lock.isLocked||this.lock.lock((async()=>{this.cachedMap[e]=!1,await ZY.sleep(500),this.cachedMap[e]=!0}),3e3),this.handleDefMap){let t=this.handleDefMap(e);return ZY.JSON5.stringify(t)}return"{}"}}};xt.render=function(e,t,n,i,a,o){const s=pe("render-layout",!0),r=pe("grid-column"),l=pe("grid-row"),u=pe("render-tab"),d=pe("render-modal"),c=pe("auto-http-com");return q(),Q("div",{class:ue(["render-layout",["render-layout-level-"+n.level]])},["column"===o.curObj.type?(q(),_e(r,{key:0,class:ue(o.levelItemCls),layout:o.curObj.items,attrs:o.curObj.data.attrs},{default:he((({item:e})=>[ge(s,{level:n.level+1,map:n.map,"handle-next":n.handleNext,"handle-def-map":n.handleDefMap,page:n.page,"slot-content":a.innerSlots,id:o.getNext(e)},null,8,["level","map","handle-next","handle-def-map","page","slot-content","id"])])),_:1},8,["class","layout","attrs"])):"row"===o.curObj.type?(q(),_e(l,{key:1,class:ue(o.levelItemCls),layout:o.curObj.items,attrs:o.curObj.data.attrs},{default:he((({item:e})=>[ge(s,{level:n.level+1,map:n.map,"handle-next":n.handleNext,"handle-def-map":n.handleDefMap,page:n.page,"slot-content":a.innerSlots,id:o.getNext(e)},null,8,["level","map","handle-next","handle-def-map","page","slot-content","id"])])),_:1},8,["class","layout","attrs"])):"tab"===o.curObj.type?(q(),_e(u,{key:2,class:ue(o.levelItemCls),layout:o.curObj.items},{default:he((({item:e})=>[ge(s,{level:n.level+1,map:n.map,"handle-next":n.handleNext,"handle-def-map":n.handleDefMap,page:n.page,"slot-content":a.innerSlots,id:o.getNext(e)},null,8,["level","map","handle-next","handle-def-map","page","slot-content","id"])])),_:1},8,["class","layout"])):"modal"===o.curObj.type?(q(),_e(d,{key:3,class:ue(o.levelItemCls),layout:o.curObj.items,obj:o.curObj,page:n.page},{default:he((({item:e})=>[ge(s,{level:n.level+1,map:n.map,"handle-next":n.handleNext,"handle-def-map":n.handleDefMap,page:n.page,"slot-content":a.innerSlots,id:o.getNext(e)},null,8,["level","map","handle-next","handle-def-map","page","slot-content","id"])])),_:1},8,["class","layout","obj","page"])):(q(),Q(ee,{key:4},[o.curObj&&o.curObj.type&&o.curObj.content?(q(),Q(ee,{key:0},[o.getShow(o.getObj(o.curObj,"data.partName","UNDEFINED"))?(q(),_e(c,{key:0,"slot-content":a.innerSlots,page:n.page,def:o.getDef(o.getObj(o.curObj,"data.partName","UNDEFINED")),is:o.getObj(n.page.stepMap,o.getObj(o.curObj,"data.partName","UNDEFINED"))},null,8,["slot-content","page","def","is"])):ye("",!0)],64)):ye("",!0)],64))],2)};let Ct={data:()=>({dialogVisible:!1,groups:[{type:"row",desc:"横向布局",img:"/tools/row.png",cls:"RowNode"},{type:"column",desc:"纵向布局",cls:"ColumnNode"},{type:"form",desc:"FORM布局",cls:"FormNode"}]}),methods:{toggleGroupDialog(e){this.dialogVisible=e},buildDepFromGroup(e){e.cls||function(e=""){ve.Message({message:e,type:"error",duration:5e3})}("no group.cls");let t,n="i"+ZY.rid(6);return t=et(e.type,{id:n,content:"",data:[],items:[],editor:""}),t},selectGroupTemplate(e={}){let t=this.buildDepFromGroup(e);this.appendDep(t),this.dialogVisible=!1}}};function kt(e){ZY_EXT.store.removeItem(e+"-deps"),ZY_EXT.store.removeItem(e+"-links"),ZY_EXT.store.removeItem(e+"-posMap")}let Et={methods:{getVisibleConnections(){let e=[];return e=this.instance.getConnections({}).filter((e=>e.target&&e.source)),e},getLinkRealtions(){let e=[];return e=this.getVisibleConnections().map((e=>({toPID:e.target.dataset.pid,fromPID:e.source.dataset.pid,from:e.sourceId,to:e.targetId}))),e}}},Ot={props:{storePrefix:String},data(){var e;let t="plumb_layout_"+ZY.rid(6);return{storagePrefix:null!=(e=this.storePrefix)?e:"play",posCssObj:{},posMap:{},comId:t,containerId:"diagramContainer_"+t}},methods:{ZINDEX_ITEMS:e=>e.sort(((e,t)=>{var n,i;let a=null!=(n=e.ZINDEX)?n:0;return(null!=(i=t.ZINDEX)?i:0)-a})),async ON_CHANGE_ZINDEX(e,t,n){let i=this.instance.getAllConnections(),a=this,o=new Map;n.items.forEach((e=>{let t=i.filter((t=>t.sourceId===e.id));t.forEach((e=>{a.instance.deleteConnection(e)})),o.set(e.id,t)})),await we(),t.ZINDEX=t.ZINDEX_TEMP,await we(),await ZY.sleep(300),n.items.forEach((e=>{let t=o.get(e.id).map((t=>({from:e.id,to:t.targetId})));a.insComLinks(t)})),await we(),this.instance.repaintEverything(),o.clear(),o=null},makeDraggable(e,t,n){let i=this;t.draggable(e,{stop:function(t,n){i.posMap[e]={pos:t.finalPos}}})},protect_removeItem(e){this.instance.removeAllEndpoints(e.id)},deleteItem(e,t,n){this.protect_removeItem(t),e.items.splice(n,1),this.$nextTick((()=>{this.instance.repaintEverything()}))},renderItem(e,t){this.instance,this.config,this.addEndpoint(e.id,{anchors:["Left"]},t,"Left"),this.addEndpoint(e.id,{anchors:["Right"]},t,"Right")},async appendItemV2(e,t=null){let n=e,i={id:n.id+"-"+ZY.rid(6),key:"",name:""};t&&t(i),n.items.push(i),await this.$nextTick(),this.renderItem(i,e.id),this.instance.repaintEverything()},async appendItem(e){let t=e,n={id:t.id+"-"+ZY.rid(6),key:"",name:""};this.handleAppend&&this.handleAppend(n,e),t.items.push(n),await this.$nextTick(),this.renderItem(n,e.id),this.instance.repaintEverything()},renderRefresh(e,t){this.renderItem(e,t.id),this.instance.repaintEverything()},getLinks(){let e=this.getLinkRealtions(),t=[];t=e.filter((e=>e.from.endsWith("-evt")));let n=[],i=["evt","fun"];return n=e.filter((e=>{let t=e.from,n=i.some((e=>t.endsWith(e)));return e.to.endsWith("top")&&!n})),{eventLinks:t,comLinks:n}},getToolsData(){let e=this.getLinks();return{data:{deps:this.deps,eventLinks:e.eventLinks,links:e.comLinks},posMap:this.posMap}},async usePosMap(){var e;let t=null!=(e=await ZY_EXT.store.getItem(this.storagePrefix+"-posMap"))?e:{};return this.loadPosMap(t),""},deletePos(e){this.posMap&&Reflect.deleteProperty(this.posMap,e)},loadPosMap(e){if(e){let t={};for(let[i,a]of Object.entries(e))t[`[dep-name="${i}"]`]={left:`${a.pos[0]}px`,top:`${a.pos[1]}px`};let n={["#"+this.comId]:t};this.posCssObj=ZY_EXT.cssObj(n)}this.posMap=e},async importToolsData(e={data:{deps:[],links:[],eventLinks:[]},postMap:{}}){let{data:t,posMap:n}=e;this.loadPosMap(n),await ZY.sleep(300),this.deps=t.deps,await this.$nextTick(),this.insDeps(this.deps),await ZY.sleep(300),this.insEventLinks(t.eventLinks),this.insComLinks(t.links)},async clearStorage(){kt(this.storagePrefix)},async saveCache2Storage(e={data:{deps:[],links:[]},posMap:{}}){ZY_EXT.store.setItem(this.storagePrefix+"-deps",ZY.JSON5.parse(ZY.JSON5.stringify(e.data.deps))),ZY_EXT.store.setItem(this.storagePrefix+"-links",ZY.JSON5.parse(ZY.JSON5.stringify(e.data.links))),ZY_EXT.store.setItem(this.storagePrefix+"-posMap",ZY.JSON5.parse(ZY.JSON5.stringify(e.posMap)))}}};function St(e){let t={connectorPaintStyle:{lineWidth:1,stroke:"#4caf50",fill:"pink",outlineColor:"",outlineWidth:""},connectorHoverStyle:{lineWidth:2,stroke:"red",outlineWidth:10,outlineColor:""}};return t.baseStyle={endpoint:["Dot",{radius:8,fill:"#ff5722"}],ConnectorStyle:t.connectorPaintStyle,ConnectorHoverStyle:t.connectorHoverStyle,paintStyle:{fill:"#4caf50",radius:6},hoverPaintStyle:{fill:"red",Stroke:"red"},isSource:!0,connector:["Straight",{gap:0,cornerRadius:5,alwaysRespectStubs:!0}],isTarget:!0,maxConnections:-1,connectorOverlays:[["Arrow",{width:10,length:10,location:1}],["Label",{label:'<button class="delete-node-btn">X</button>',cssClass:"",labelStyle:{color:"red"},events:{click:function(t,n){t.component.isDetachAllowed()&&e.instance.deleteConnection(t.component)}}}]]},t}var Dt,At,Tt={exports:{}};"undefined"!=typeof self&&self;var It=Ee(Tt.exports=(Dt=xe(Ce),At=xe(K),function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"00ee":function(e,t,n){var i={};i[n("b622")("toStringTag")]="z",e.exports="[object z]"===String(i)},"0366":function(e,t,n){var i=n("1c0b");e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)}}return function(){return e.apply(t,arguments)}}},"057f":function(e,t,n){var i=n("fc6a"),a=n("241c").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return a(e)}catch(t){return s.slice()}}(e):a(i(e))}},"06cf":function(e,t,n){var i=n("83ab"),a=n("d1e7"),o=n("5c6c"),s=n("fc6a"),r=n("c04e"),l=n("5135"),u=n("0cfb"),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=s(e),t=r(t,!0),u)try{return d(e,t)}catch(n){}if(l(e,t))return o(!a.f.call(e,t),e[t])}},"0cfb":function(e,t,n){var i=n("83ab"),a=n("d039"),o=n("cc12");e.exports=!i&&!a((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"13d5":function(e,t,n){var i=n("23e7"),a=n("d58f").left,o=n("a640"),s=n("ae40"),r=o("reduce"),l=s("reduce",{1:0});i({target:"Array",proto:!0,forced:!r||!l},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(e,t,n){var i=n("c6b6"),a=n("9263");e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"159b":function(e,t,n){var i=n("da84"),a=n("fdbc"),o=n("17c2"),s=n("9112");for(var r in a){var l=i[r],u=l&&l.prototype;if(u&&u.forEach!==o)try{s(u,"forEach",o)}catch(d){u.forEach=o}}},"17c2":function(e,t,n){var i=n("b727").forEach,a=n("a640"),o=n("ae40"),s=a("forEach"),r=o("forEach");e.exports=s&&r?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},"1be4":function(e,t,n){var i=n("d066");e.exports=i("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,n){var i=n("b622")("iterator"),a=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){a=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(r){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(r){}return n}},"1d80":function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},"1dde":function(e,t,n){var i=n("d039"),a=n("b622"),o=n("2d00"),s=a("species");e.exports=function(e){return o>=51||!i((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"23cb":function(e,t,n){var i=n("a691"),a=Math.max,o=Math.min;e.exports=function(e,t){var n=i(e);return n<0?a(n+t,0):o(n,t)}},"23e7":function(e,t,n){var i=n("da84"),a=n("06cf").f,o=n("9112"),s=n("6eeb"),r=n("ce4e"),l=n("e893"),u=n("94ca");e.exports=function(e,t){var n,d,c,p,_,h=e.target,f=e.global,m=e.stat;if(n=f?i:m?i[h]||r(h,{}):(i[h]||{}).prototype)for(d in t){if(p=t[d],c=e.noTargetGet?(_=a(n,d))&&_.value:n[d],!u(f?d:h+(m?".":"#")+d,e.forced)&&void 0!==c){if(typeof p==typeof c)continue;l(p,c)}(e.sham||c&&c.sham)&&o(p,"sham",!0),s(n,d,p,e)}}},"241c":function(e,t,n){var i=n("ca84"),a=n("7839").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,a)}},"25f0":function(e,t,n){var i=n("6eeb"),a=n("825a"),o=n("d039"),s=n("ad6d"),r="toString",l=RegExp.prototype,u=l.toString,d=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),c=u.name!=r;(d||c)&&i(RegExp.prototype,r,(function(){var e=a(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in l)?s.call(e):n)}),{unsafe:!0})},"2ca0":function(e,t,n){var i,a=n("23e7"),o=n("06cf").f,s=n("50c4"),r=n("5a34"),l=n("1d80"),u=n("ab13"),d=n("c430"),c="".startsWith,p=Math.min,_=u("startsWith");a({target:"String",proto:!0,forced:!(!d&&!_&&(i=o(String.prototype,"startsWith"),i&&!i.writable)||_)},{startsWith:function(e){var t=String(l(this));r(e);var n=s(p(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return c?c.call(t,i,n):t.slice(n,n+i.length)===i}})},"2d00":function(e,t,n){var i,a,o=n("da84"),s=n("342f"),r=o.process,l=r&&r.versions,u=l&&l.v8;u?a=(i=u.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(a=i[1]),e.exports=a&&+a},"342f":function(e,t,n){var i=n("d066");e.exports=i("navigator","userAgent")||""},"35a1":function(e,t,n){var i=n("f5df"),a=n("3f8c"),o=n("b622")("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||a[i(e)]}},"37e8":function(e,t,n){var i=n("83ab"),a=n("9bf2"),o=n("825a"),s=n("df75");e.exports=i?Object.defineProperties:function(e,t){o(e);for(var n,i=s(t),r=i.length,l=0;r>l;)a.f(e,n=i[l++],t[n]);return e}},"3bbe":function(e,t,n){var i=n("861d");e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3ca3":function(e,t,n){var i=n("6547").charAt,a=n("69f3"),o=n("7dd0"),s="String Iterator",r=a.set,l=a.getterFor(s);o(String,"String",(function(e){r(this,{type:s,string:String(e),index:0})}),(function(){var e,t=l(this),n=t.string,a=t.index;return a>=n.length?{value:void 0,done:!0}:(e=i(n,a),t.index+=e.length,{value:e,done:!1})}))},"3f8c":function(e,t){e.exports={}},4160:function(e,t,n){var i=n("23e7"),a=n("17c2");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"428f":function(e,t,n){var i=n("da84");e.exports=i},"44ad":function(e,t,n){var i=n("d039"),a=n("c6b6"),o="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?o.call(e,""):Object(e)}:Object},"44d2":function(e,t,n){var i=n("b622"),a=n("7c73"),o=n("9bf2"),s=i("unscopables"),r=Array.prototype;null==r[s]&&o.f(r,s,{configurable:!0,value:a(null)}),e.exports=function(e){r[s][e]=!0}},"44e7":function(e,t,n){var i=n("861d"),a=n("c6b6"),o=n("b622")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},4930:function(e,t,n){var i=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},"4d64":function(e,t,n){var i=n("fc6a"),a=n("50c4"),o=n("23cb"),s=function(e){return function(t,n,s){var r,l=i(t),u=a(l.length),d=o(s,u);if(e&&n!=n){for(;u>d;)if((r=l[d++])!=r)return!0}else for(;u>d;d++)if((e||d in l)&&l[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},"4de4":function(e,t,n){var i=n("23e7"),a=n("b727").filter,o=n("1dde"),s=n("ae40"),r=o("filter"),l=s("filter");i({target:"Array",proto:!0,forced:!r||!l},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){var i=n("0366"),a=n("7b0b"),o=n("9bdd"),s=n("e95a"),r=n("50c4"),l=n("8418"),u=n("35a1");e.exports=function(e){var t,n,d,c,p,_,h=a(e),f="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,b=void 0!==g,y=u(h),v=0;if(b&&(g=i(g,m>2?arguments[2]:void 0,2)),null==y||f==Array&&s(y))for(n=new f(t=r(h.length));t>v;v++)_=b?g(h[v],v):h[v],l(n,v,_);else for(p=(c=y.call(h)).next,n=new f;!(d=p.call(c)).done;v++)_=b?o(c,g,[d.value,v],!0):d.value,l(n,v,_);return n.length=v,n}},"4fad":function(e,t,n){var i=n("23e7"),a=n("6f53").entries;i({target:"Object",stat:!0},{entries:function(e){return a(e)}})},"50c4":function(e,t,n){var i=n("a691"),a=Math.min;e.exports=function(e){return e>0?a(i(e),9007199254740991):0}},5135:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},5319:function(e,t,n){var i=n("d784"),a=n("825a"),o=n("7b0b"),s=n("50c4"),r=n("a691"),l=n("1d80"),u=n("8aa5"),d=n("14c3"),c=Math.max,p=Math.min,_=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g;i("replace",2,(function(e,t,n,i){var m=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=i.REPLACE_KEEPS_$0,b=m?"$":"$0";return[function(n,i){var a=l(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,a,i):t.call(String(a),n,i)},function(e,i){if(!m&&g||"string"==typeof i&&-1===i.indexOf(b)){var o=n(t,e,this,i);if(o.done)return o.value}var l=a(e),_=String(this),h="function"==typeof i;h||(i=String(i));var f=l.global;if(f){var v=l.unicode;l.lastIndex=0}for(var w=[];;){var x=d(l,_);if(null===x)break;if(w.push(x),!f)break;""===String(x[0])&&(l.lastIndex=u(_,s(l.lastIndex),v))}for(var C,k="",E=0,O=0;O<w.length;O++){x=w[O];for(var S=String(x[0]),D=c(p(r(x.index),_.length),0),A=[],T=1;T<x.length;T++)A.push(void 0===(C=x[T])?C:String(C));var I=x.groups;if(h){var M=[S].concat(A,D,_);void 0!==I&&M.push(I);var R=String(i.apply(void 0,M))}else R=y(S,_,D,A,I,i);D>=E&&(k+=_.slice(E,D)+R,E=D+S.length)}return k+_.slice(E)}];function y(e,n,i,a,s,r){var l=i+e.length,u=a.length,d=f;return void 0!==s&&(s=o(s),d=h),t.call(r,d,(function(t,o){var r;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(l);case"<":r=s[o.slice(1,-1)];break;default:var d=+o;if(0===d)return t;if(d>u){var c=_(d/10);return 0===c?t:c<=u?void 0===a[c-1]?o.charAt(1):a[c-1]+o.charAt(1):t}r=a[d-1]}return void 0===r?"":r}))}}))},5692:function(e,t,n){var i=n("c430"),a=n("c6cd");(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var i=n("d066"),a=n("241c"),o=n("7418"),s=n("825a");e.exports=i("Reflect","ownKeys")||function(e){var t=a.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},"5a34":function(e,t,n){var i=n("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5db7":function(e,t,n){var i=n("23e7"),a=n("a2bf"),o=n("7b0b"),s=n("50c4"),r=n("1c0b"),l=n("65f0");i({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),i=s(n.length);return r(e),(t=l(n,0)).length=a(t,n,n,i,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},6547:function(e,t,n){var i=n("a691"),a=n("1d80"),o=function(e){return function(t,n){var o,s,r=String(a(t)),l=i(n),u=r.length;return l<0||l>=u?e?"":void 0:(o=r.charCodeAt(l))<55296||o>56319||l+1===u||(s=r.charCodeAt(l+1))<56320||s>57343?e?r.charAt(l):o:e?r.slice(l,l+2):s-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},"65f0":function(e,t,n){var i=n("861d"),a=n("e8b5"),o=n("b622")("species");e.exports=function(e,t){var n;return a(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!a(n.prototype)?i(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},"69f3":function(e,t,n){var i,a,o,s=n("7f9a"),r=n("da84"),l=n("861d"),u=n("9112"),d=n("5135"),c=n("f772"),p=n("d012"),_=r.WeakMap;if(s){var h=new _,f=h.get,m=h.has,g=h.set;i=function(e,t){return g.call(h,e,t),t},a=function(e){return f.call(h,e)||{}},o=function(e){return m.call(h,e)}}else{var b=c("state");p[b]=!0,i=function(e,t){return u(e,b,t),t},a=function(e){return d(e,b)?e[b]:{}},o=function(e){return d(e,b)}}e.exports={set:i,get:a,has:o,enforce:function(e){return o(e)?a(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=a(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},"6eeb":function(e,t,n){var i=n("da84"),a=n("9112"),o=n("5135"),s=n("ce4e"),r=n("8925"),l=n("69f3"),u=l.get,d=l.enforce,c=String(String).split("String");(e.exports=function(e,t,n,r){var l=!!r&&!!r.unsafe,u=!!r&&!!r.enumerable,p=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||a(n,"name",t),d(n).source=c.join("string"==typeof t?t:"")),e!==i?(l?!p&&e[t]&&(u=!0):delete e[t],u?e[t]=n:a(e,t,n)):u?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||r(this)}))},"6f53":function(e,t,n){var i=n("83ab"),a=n("df75"),o=n("fc6a"),s=n("d1e7").f,r=function(e){return function(t){for(var n,r=o(t),l=a(r),u=l.length,d=0,c=[];u>d;)n=l[d++],i&&!s.call(r,n)||c.push(e?[n,r[n]]:r[n]);return c}};e.exports={entries:r(!0),values:r(!1)}},"73d9":function(e,t,n){n("44d2")("flatMap")},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var i=n("428f"),a=n("5135"),o=n("e538"),s=n("9bf2").f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});a(t,e)||s(t,e,{value:o.f(e)})}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(e,t,n){var i=n("1d80");e.exports=function(e){return Object(i(e))}},"7c73":function(e,t,n){var i,a=n("825a"),o=n("37e8"),s=n("7839"),r=n("d012"),l=n("1be4"),u=n("cc12"),d=n("f772"),c=d("IE_PROTO"),p=function(){},_=function(e){return"<script>"+e+"<\/script>"},h=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(a){}var e,t;h=i?function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(_("document.F=Object")),e.close(),e.F);for(var n=s.length;n--;)delete h.prototype[s[n]];return h()};r[c]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=a(e),n=new p,p.prototype=null,n[c]=e):n=h(),void 0===t?n:o(n,t)}},"7dd0":function(e,t,n){var i=n("23e7"),a=n("9ed3"),o=n("e163"),s=n("d2bb"),r=n("d44e"),l=n("9112"),u=n("6eeb"),d=n("b622"),c=n("c430"),p=n("3f8c"),_=n("ae93"),h=_.IteratorPrototype,f=_.BUGGY_SAFARI_ITERATORS,m=d("iterator"),g="keys",b="values",y="entries",v=function(){return this};e.exports=function(e,t,n,d,_,w,x){a(n,t,d);var C,k,E,O=function(e){if(e===_&&I)return I;if(!f&&e in A)return A[e];switch(e){case g:case b:case y:return function(){return new n(this,e)}}return function(){return new n(this)}},S=t+" Iterator",D=!1,A=e.prototype,T=A[m]||A["@@iterator"]||_&&A[_],I=!f&&T||O(_),M="Array"==t&&A.entries||T;if(M&&(C=o(M.call(new e)),h!==Object.prototype&&C.next&&(c||o(C)===h||(s?s(C,h):"function"!=typeof C[m]&&l(C,m,v)),r(C,S,!0,!0),c&&(p[S]=v))),_==b&&T&&T.name!==b&&(D=!0,I=function(){return T.call(this)}),c&&!x||A[m]===I||l(A,m,I),p[t]=I,_)if(k={values:O(b),keys:w?I:O(g),entries:O(y)},x)for(E in k)(f||D||!(E in A))&&u(A,E,k[E]);else i({target:t,proto:!0,forced:f||D},k);return k}},"7f9a":function(e,t,n){var i=n("da84"),a=n("8925"),o=i.WeakMap;e.exports="function"==typeof o&&/native code/.test(a(o))},"825a":function(e,t,n){var i=n("861d");e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},"83ab":function(e,t,n){var i=n("d039");e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){var i=n("c04e"),a=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var s=i(t);s in e?a.f(e,s,o(0,n)):e[s]=n}},"861d":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},8875:function(e,t,n){var i,a,o;"undefined"!=typeof self&&self,a=[],void 0===(o="function"==typeof(i=function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var n,i,a,o=/@([^@]*):(\d+):(\d+)\s*$/gi,s=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(p.stack)||o.exec(p.stack),r=s&&s[1]||!1,l=s&&s[2]||!1,u=document.location.href.replace(document.location.hash,""),d=document.getElementsByTagName("script");r===u&&(n=document.documentElement.outerHTML,i=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),a=n.replace(i,"$1").trim());for(var c=0;c<d.length;c++){if("interactive"===d[c].readyState)return d[c];if(d[c].src===r)return d[c];if(r===u&&d[c].innerHTML&&d[c].innerHTML.trim()===a)return d[c]}return null}}return e})?i.apply(t,a):i)||(e.exports=o)},8925:function(e,t,n){var i=n("c6cd"),a=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return a.call(e)}),e.exports=i.inspectSource},"8aa5":function(e,t,n){var i=n("6547").charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},"8bbf":function(e,t){e.exports=Dt},"90e3":function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},9112:function(e,t,n){var i=n("83ab"),a=n("9bf2"),o=n("5c6c");e.exports=i?function(e,t,n){return a.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9263:function(e,t,n){var i,a,o=n("ad6d"),s=n("9f7f"),r=RegExp.prototype.exec,l=String.prototype.replace,u=r,d=(i=/a/,a=/b*/g,r.call(i,"a"),r.call(a,"a"),0!==i.lastIndex||0!==a.lastIndex),c=s.UNSUPPORTED_Y||s.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(d||p||c)&&(u=function(e){var t,n,i,a,s=this,u=c&&s.sticky,_=o.call(s),h=s.source,f=0,m=e;return u&&(-1===(_=_.replace("y","")).indexOf("g")&&(_+="g"),m=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(h="(?: "+h+")",m=" "+m,f++),n=new RegExp("^(?:"+h+")",_)),p&&(n=new RegExp("^"+h+"$(?!\\s)",_)),d&&(t=s.lastIndex),i=r.call(u?n:s,m),u?i?(i.input=i.input.slice(f),i[0]=i[0].slice(f),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:d&&i&&(s.lastIndex=s.global?i.index+i[0].length:t),p&&i&&i.length>1&&l.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i}),e.exports=u},"94ca":function(e,t,n){var i=n("d039"),a=/#|\.prototype\./,o=function(e,t){var n=r[s(e)];return n==u||n!=l&&("function"==typeof t?i(t):!!t)},s=o.normalize=function(e){return String(e).replace(a,".").toLowerCase()},r=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},"99af":function(e,t,n){var i=n("23e7"),a=n("d039"),o=n("e8b5"),s=n("861d"),r=n("7b0b"),l=n("50c4"),u=n("8418"),d=n("65f0"),c=n("1dde"),p=n("b622"),_=n("2d00"),h=p("isConcatSpreadable"),f=9007199254740991,m="Maximum allowed index exceeded",g=_>=51||!a((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),b=c("concat"),y=function(e){if(!s(e))return!1;var t=e[h];return void 0!==t?!!t:o(e)};i({target:"Array",proto:!0,forced:!g||!b},{concat:function(e){var t,n,i,a,o,s=r(this),c=d(s,0),p=0;for(t=-1,i=arguments.length;t<i;t++)if(y(o=-1===t?s:arguments[t])){if(p+(a=l(o.length))>f)throw TypeError(m);for(n=0;n<a;n++,p++)n in o&&u(c,p,o[n])}else{if(p>=f)throw TypeError(m);u(c,p++,o)}return c.length=p,c}})},"9bdd":function(e,t,n){var i=n("825a");e.exports=function(e,t,n,a){try{return a?t(i(n)[0],n[1]):t(n)}catch(s){var o=e.return;throw void 0!==o&&i(o.call(e)),s}}},"9bf2":function(e,t,n){var i=n("83ab"),a=n("0cfb"),o=n("825a"),s=n("c04e"),r=Object.defineProperty;t.f=i?r:function(e,t,n){if(o(e),t=s(t,!0),o(n),a)try{return r(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9ed3":function(e,t,n){var i=n("ae93").IteratorPrototype,a=n("7c73"),o=n("5c6c"),s=n("d44e"),r=n("3f8c"),l=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=a(i,{next:o(1,n)}),s(e,u,!1,!0),r[u]=l,e}},"9f7f":function(e,t,n){var i=n("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a2bf:function(e,t,n){var i=n("e8b5"),a=n("50c4"),o=n("0366"),s=function(e,t,n,r,l,u,d,c){for(var p,_=l,h=0,f=!!d&&o(d,c,3);h<r;){if(h in n){if(p=f?f(n[h],h,t):n[h],u>0&&i(p))_=s(e,t,p,a(p.length),_,u-1)-1;else{if(_>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[_]=p}_++}h++}return _};e.exports=s},a352:function(e,t){e.exports=At},a434:function(e,t,n){var i=n("23e7"),a=n("23cb"),o=n("a691"),s=n("50c4"),r=n("7b0b"),l=n("65f0"),u=n("8418"),d=n("1dde"),c=n("ae40"),p=d("splice"),_=c("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,f=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!_},{splice:function(e,t){var n,i,d,c,p,_,b=r(this),y=s(b.length),v=a(e,y),w=arguments.length;if(0===w?n=i=0:1===w?(n=0,i=y-v):(n=w-2,i=f(h(o(t),0),y-v)),y+n-i>m)throw TypeError(g);for(d=l(b,i),c=0;c<i;c++)(p=v+c)in b&&u(d,c,b[p]);if(d.length=i,n<i){for(c=v;c<y-i;c++)_=c+n,(p=c+i)in b?b[_]=b[p]:delete b[_];for(c=y;c>y-i+n;c--)delete b[c-1]}else if(n>i)for(c=y-i;c>v;c--)_=c+n-1,(p=c+i-1)in b?b[_]=b[p]:delete b[_];for(c=0;c<n;c++)b[c+v]=arguments[c+2];return b.length=y-i+n,d}})},a4d3:function(e,t,n){var i=n("23e7"),a=n("da84"),o=n("d066"),s=n("c430"),r=n("83ab"),l=n("4930"),u=n("fdbf"),d=n("d039"),c=n("5135"),p=n("e8b5"),_=n("861d"),h=n("825a"),f=n("7b0b"),m=n("fc6a"),g=n("c04e"),b=n("5c6c"),y=n("7c73"),v=n("df75"),w=n("241c"),x=n("057f"),C=n("7418"),k=n("06cf"),E=n("9bf2"),O=n("d1e7"),S=n("9112"),D=n("6eeb"),A=n("5692"),T=n("f772"),I=n("d012"),M=n("90e3"),R=n("b622"),L=n("e538"),N=n("746f"),V=n("d44e"),z=n("69f3"),P=n("b727").forEach,U=T("hidden"),j="Symbol",G=R("toPrimitive"),Z=z.set,F=z.getterFor(j),B=Object.prototype,Y=a.Symbol,X=o("JSON","stringify"),$=k.f,W=E.f,H=x.f,K=O.f,J=A("symbols"),q=A("op-symbols"),Q=A("string-to-symbol-registry"),ee=A("symbol-to-string-registry"),te=A("wks"),ne=a.QObject,ie=!ne||!ne.prototype||!ne.prototype.findChild,ae=r&&d((function(){return 7!=y(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=$(B,t);i&&delete B[t],W(e,t,n),i&&e!==B&&W(B,t,i)}:W,oe=function(e,t){var n=J[e]=y(Y.prototype);return Z(n,{type:j,tag:e,description:t}),r||(n.description=t),n},se=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Y},re=function(e,t,n){e===B&&re(q,t,n),h(e);var i=g(t,!0);return h(n),c(J,i)?(n.enumerable?(c(e,U)&&e[U][i]&&(e[U][i]=!1),n=y(n,{enumerable:b(0,!1)})):(c(e,U)||W(e,U,b(1,{})),e[U][i]=!0),ae(e,i,n)):W(e,i,n)},le=function(e,t){h(e);var n=m(t),i=v(n).concat(pe(n));return P(i,(function(t){r&&!ue.call(n,t)||re(e,t,n[t])})),e},ue=function(e){var t=g(e,!0),n=K.call(this,t);return!(this===B&&c(J,t)&&!c(q,t))&&(!(n||!c(this,t)||!c(J,t)||c(this,U)&&this[U][t])||n)},de=function(e,t){var n=m(e),i=g(t,!0);if(n!==B||!c(J,i)||c(q,i)){var a=$(n,i);return!a||!c(J,i)||c(n,U)&&n[U][i]||(a.enumerable=!0),a}},ce=function(e){var t=H(m(e)),n=[];return P(t,(function(e){c(J,e)||c(I,e)||n.push(e)})),n},pe=function(e){var t=e===B,n=H(t?q:m(e)),i=[];return P(n,(function(e){!c(J,e)||t&&!c(B,e)||i.push(J[e])})),i};l||(D((Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=M(e),n=function(e){this===B&&n.call(q,e),c(this,U)&&c(this[U],t)&&(this[U][t]=!1),ae(this,t,b(1,e))};return r&&ie&&ae(B,t,{configurable:!0,set:n}),oe(t,e)}).prototype,"toString",(function(){return F(this).tag})),D(Y,"withoutSetter",(function(e){return oe(M(e),e)})),O.f=ue,E.f=re,k.f=de,w.f=x.f=ce,C.f=pe,L.f=function(e){return oe(R(e),e)},r&&(W(Y.prototype,"description",{configurable:!0,get:function(){return F(this).description}}),s||D(B,"propertyIsEnumerable",ue,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:Y}),P(v(te),(function(e){N(e)})),i({target:j,stat:!0,forced:!l},{for:function(e){var t=String(e);if(c(Q,t))return Q[t];var n=Y(t);return Q[t]=n,ee[n]=t,n},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(c(ee,e))return ee[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),i({target:"Object",stat:!0,forced:!l,sham:!r},{create:function(e,t){return void 0===t?y(e):le(y(e),t)},defineProperty:re,defineProperties:le,getOwnPropertyDescriptor:de}),i({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ce,getOwnPropertySymbols:pe}),i({target:"Object",stat:!0,forced:d((function(){C.f(1)}))},{getOwnPropertySymbols:function(e){return C.f(f(e))}}),X&&i({target:"JSON",stat:!0,forced:!l||d((function(){var e=Y();return"[null]"!=X([e])||"{}"!=X({a:e})||"{}"!=X(Object(e))}))},{stringify:function(e,t,n){for(var i,a=[e],o=1;arguments.length>o;)a.push(arguments[o++]);if(i=t,(_(t)||void 0!==e)&&!se(e))return p(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!se(t))return t}),a[1]=t,X.apply(null,a)}}),Y.prototype[G]||S(Y.prototype,G,Y.prototype.valueOf),V(Y,j),I[U]=!0},a630:function(e,t,n){var i=n("23e7"),a=n("4df4");i({target:"Array",stat:!0,forced:!n("1c7e")((function(e){Array.from(e)}))},{from:a})},a640:function(e,t,n){var i=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},ab13:function(e,t,n){var i=n("b622")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(a){}}return!1}},ac1f:function(e,t,n){var i=n("23e7"),a=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,n){var i=n("825a");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ae40:function(e,t,n){var i=n("83ab"),a=n("d039"),o=n("5135"),s=Object.defineProperty,r={},l=function(e){throw e};e.exports=function(e,t){if(o(r,e))return r[e];t||(t={});var n=[][e],u=!!o(t,"ACCESSORS")&&t.ACCESSORS,d=o(t,0)?t[0]:l,c=o(t,1)?t[1]:void 0;return r[e]=!!n&&!a((function(){if(u&&!i)return!0;var e={length:-1};u?s(e,1,{enumerable:!0,get:l}):e[1]=1,n.call(e,d,c)}))}},ae93:function(e,t,n){var i,a,o,s=n("e163"),r=n("9112"),l=n("5135"),u=n("b622"),d=n("c430"),c=u("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(a=s(s(o)))!==Object.prototype&&(i=a):p=!0),null==i&&(i={}),d||l(i,c)||r(i,c,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},b041:function(e,t,n){var i=n("00ee"),a=n("f5df");e.exports=i?{}.toString:function(){return"[object "+a(this)+"]"}},b0c0:function(e,t,n){var i=n("83ab"),a=n("9bf2").f,o=Function.prototype,s=o.toString,r=/^\s*function ([^ (]*)/,l="name";i&&!(l in o)&&a(o,l,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(e){return""}}})},b622:function(e,t,n){var i=n("da84"),a=n("5692"),o=n("5135"),s=n("90e3"),r=n("4930"),l=n("fdbf"),u=a("wks"),d=i.Symbol,c=l?d:d&&d.withoutSetter||s;e.exports=function(e){return o(u,e)||(r&&o(d,e)?u[e]=d[e]:u[e]=c("Symbol."+e)),u[e]}},b64b:function(e,t,n){var i=n("23e7"),a=n("7b0b"),o=n("df75");i({target:"Object",stat:!0,forced:n("d039")((function(){o(1)}))},{keys:function(e){return o(a(e))}})},b727:function(e,t,n){var i=n("0366"),a=n("44ad"),o=n("7b0b"),s=n("50c4"),r=n("65f0"),l=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,d=4==e,c=6==e,p=5==e||c;return function(_,h,f,m){for(var g,b,y=o(_),v=a(y),w=i(h,f,3),x=s(v.length),C=0,k=m||r,E=t?k(_,x):n?k(_,0):void 0;x>C;C++)if((p||C in v)&&(b=w(g=v[C],C,y),e))if(t)E[C]=b;else if(b)switch(e){case 3:return!0;case 5:return g;case 6:return C;case 2:l.call(E,g)}else if(d)return!1;return c?-1:u||d?d:E}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},c04e:function(e,t,n){var i=n("861d");e.exports=function(e,t){if(!i(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!i(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},c6cd:function(e,t,n){var i=n("da84"),a=n("ce4e"),o="__core-js_shared__",s=i[o]||a(o,{});e.exports=s},c740:function(e,t,n){var i=n("23e7"),a=n("b727").findIndex,o=n("44d2"),s=n("ae40"),r="findIndex",l=!0,u=s(r);r in[]&&Array(1).findIndex((function(){l=!1})),i({target:"Array",proto:!0,forced:l||!u},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o(r)},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"==typeof window&&(n=window)}e.exports=n},c975:function(e,t,n){var i=n("23e7"),a=n("4d64").indexOf,o=n("a640"),s=n("ae40"),r=[].indexOf,l=!!r&&1/[1].indexOf(1,-0)<0,u=o("indexOf"),d=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!u||!d},{indexOf:function(e){return l?r.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})},ca84:function(e,t,n){var i=n("5135"),a=n("fc6a"),o=n("4d64").indexOf,s=n("d012");e.exports=function(e,t){var n,r=a(e),l=0,u=[];for(n in r)!i(s,n)&&i(r,n)&&u.push(n);for(;t.length>l;)i(r,n=t[l++])&&(~o(u,n)||u.push(n));return u}},caad:function(e,t,n){var i=n("23e7"),a=n("4d64").includes,o=n("44d2");i({target:"Array",proto:!0,forced:!n("ae40")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cc12:function(e,t,n){var i=n("da84"),a=n("861d"),o=i.document,s=a(o)&&a(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},ce4e:function(e,t,n){var i=n("da84"),a=n("9112");e.exports=function(e,t){try{a(i,e,t)}catch(n){i[e]=t}return t}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var i=n("428f"),a=n("da84"),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(i[e])||o(a[e]):i[e]&&i[e][t]||a[e]&&a[e][t]}},d1e7:function(e,t,n){var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!i.call({1:2},1);t.f=o?function(e){var t=a(this,e);return!!t&&t.enumerable}:i},d28b:function(e,t,n){n("746f")("iterator")},d2bb:function(e,t,n){var i=n("825a"),a=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(o){}return function(n,o){return i(n),a(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},d3b7:function(e,t,n){var i=n("00ee"),a=n("6eeb"),o=n("b041");i||a(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(e,t,n){var i=n("9bf2").f,a=n("5135"),o=n("b622")("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},d58f:function(e,t,n){var i=n("1c0b"),a=n("7b0b"),o=n("44ad"),s=n("50c4"),r=function(e){return function(t,n,r,l){i(n);var u=a(t),d=o(u),c=s(u.length),p=e?c-1:0,_=e?-1:1;if(r<2)for(;;){if(p in d){l=d[p],p+=_;break}if(p+=_,e?p<0:c<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:c>p;p+=_)p in d&&(l=n(l,d[p],p,u));return l}};e.exports={left:r(!1),right:r(!0)}},d784:function(e,t,n){n("ac1f");var i=n("6eeb"),a=n("d039"),o=n("b622"),s=n("9263"),r=n("9112"),l=o("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d="$0"==="a".replace(/./,"$0"),c=o("replace"),p=!!/./[c]&&""===/./[c]("a","$0"),_=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,c){var h=o(e),f=!a((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),m=f&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!f||!m||"replace"===e&&(!u||!d||p)||"split"===e&&!_){var g=/./[h],b=n(h,""[e],(function(e,t,n,i,a){return t.exec===s?f&&!a?{done:!0,value:g.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),y=b[0],v=b[1];i(String.prototype,e,y),i(RegExp.prototype,h,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}c&&r(RegExp.prototype[h],"sham",!0)}},d81d:function(e,t,n){var i=n("23e7"),a=n("b727").map,o=n("1dde"),s=n("ae40"),r=o("map"),l=s("map");i({target:"Array",proto:!0,forced:!r||!l},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,t,n){var i=n("23e7"),a=n("83ab"),o=n("56ef"),s=n("fc6a"),r=n("06cf"),l=n("8418");i({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){for(var t,n,i=s(e),a=r.f,u=o(i),d={},c=0;u.length>c;)void 0!==(n=a(i,t=u[c++]))&&l(d,t,n);return d}})},dbf1:function(e,t,n){(function(e){n.d(t,"a",(function(){return i}));var i="undefined"!=typeof window?window.console:e.console}).call(this,n("c8ba"))},ddb0:function(e,t,n){var i=n("da84"),a=n("fdbc"),o=n("e260"),s=n("9112"),r=n("b622"),l=r("iterator"),u=r("toStringTag"),d=o.values;for(var c in a){var p=i[c],_=p&&p.prototype;if(_){if(_[l]!==d)try{s(_,l,d)}catch(f){_[l]=d}if(_[u]||s(_,u,c),a[c])for(var h in o)if(_[h]!==o[h])try{s(_,h,o[h])}catch(f){_[h]=o[h]}}}},df75:function(e,t,n){var i=n("ca84"),a=n("7839");e.exports=Object.keys||function(e){return i(e,a)}},e01a:function(e,t,n){var i=n("23e7"),a=n("83ab"),o=n("da84"),s=n("5135"),r=n("861d"),l=n("9bf2").f,u=n("e893"),d=o.Symbol;if(a&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var c={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new d(e):void 0===e?d():d(e);return""===e&&(c[t]=!0),t};u(p,d);var _=p.prototype=d.prototype;_.constructor=p;var h=_.toString,f="Symbol(test)"==String(d("test")),m=/^Symbol\((.*)\)[^)]+$/;l(_,"description",{configurable:!0,get:function(){var e=r(this)?this.valueOf():this,t=h.call(e);if(s(c,e))return"";var n=f?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:p})}},e163:function(e,t,n){var i=n("5135"),a=n("7b0b"),o=n("f772"),s=n("e177"),r=o("IE_PROTO"),l=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=a(e),i(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},e177:function(e,t,n){var i=n("d039");e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,n){var i=n("fc6a"),a=n("44d2"),o=n("3f8c"),s=n("69f3"),r=n("7dd0"),l="Array Iterator",u=s.set,d=s.getterFor(l);e.exports=r(Array,"Array",(function(e,t){u(this,{type:l,target:i(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},e439:function(e,t,n){var i=n("23e7"),a=n("d039"),o=n("fc6a"),s=n("06cf").f,r=n("83ab"),l=a((function(){s(1)}));i({target:"Object",stat:!0,forced:!r||l,sham:!r},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},e538:function(e,t,n){var i=n("b622");t.f=i},e893:function(e,t,n){var i=n("5135"),a=n("56ef"),o=n("06cf"),s=n("9bf2");e.exports=function(e,t){for(var n=a(t),r=s.f,l=o.f,u=0;u<n.length;u++){var d=n[u];i(e,d)||r(e,d,l(t,d))}}},e8b5:function(e,t,n){var i=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}},e95a:function(e,t,n){var i=n("b622"),a=n("3f8c"),o=i("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||s[o]===e)}},f5df:function(e,t,n){var i=n("00ee"),a=n("c6b6"),o=n("b622")("toStringTag"),s="Arguments"==a(function(){return arguments}());e.exports=i?a:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),o))?n:s?a(t):"Object"==(i=a(t))&&"function"==typeof t.callee?"Arguments":i}},f772:function(e,t,n){var i=n("5692"),a=n("90e3"),o=i("keys");e.exports=function(e){return o[e]||(o[e]=a(e))}},fb15:function(e,t,n){if(n.r(t),"undefined"!=typeof window){var i=window.document.currentScript,a=n("8875");i=a(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:a});var o=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return n}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n("99af"),n("4de4"),n("4160"),n("c975"),n("d81d"),n("a434"),n("159b"),n("a4d3"),n("e439"),n("dbb4"),n("b64b"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0"),n("a630"),n("fb6a"),n("b0c0"),n("25f0");var _=n("a352"),h=n.n(_);function f(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function m(e,t,n){var i=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,i)}var g=n("dbf1");n("13d5"),n("4fad"),n("ac1f"),n("5319");var b,y,v=/-(\w)/g,w=(b=function(e){return e.replace(v,(function(e,t){return t.toUpperCase()}))},y=Object.create(null),function(e){return y[e]||(y[e]=b(e))});n("5db7"),n("73d9");var x=["Start","Add","Remove","Update","End"],C=["Choose","Unchoose","Sort","Filter","Clone"],k=["Move"],E=[k,x,C].flatMap((function(e){return e})).map((function(e){return"on".concat(e)})),O={manage:k,manageAndEmit:x,emit:C};n("caad"),n("2ca0");var S=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function D(e){return["id","class","role","style"].includes(e)||e.startsWith("data-")||e.startsWith("aria-")||e.startsWith("on")}function A(e){return e.reduce((function(e,t){var n=c(t,2),i=n[0],a=n[1];return e[i]=a,e}),{})}function T(e){return Object.entries(e).filter((function(e){var t=c(e,2),n=t[0];return t[1],!D(n)})).map((function(e){var t=c(e,2),n=t[0],i=t[1];return[w(n),i]})).filter((function(e){var t,n=c(e,2),i=n[0];return n[1],t=i,!(-1!==E.indexOf(t))}))}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n("c740");var M=function(e){return e.el},R=function(e){return e.__draggable_context},L=function(){function e(t){var n=t.nodes,i=n.header,a=n.default,o=n.footer,s=t.root,r=t.realList;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultNodes=a,this.children=[].concat(p(i),p(a),p(o)),this.externalComponent=s.externalComponent,this.rootTransition=s.transition,this.tag=s.tag,this.realList=r}var t,n,i;return t=e,(n=[{key:"render",value:function(e,t){var n=this.tag,i=this.children;return e(n,t,this._isRootComponent?{default:function(){return i}}:i)}},{key:"updated",value:function(){var e=this.defaultNodes,t=this.realList;e.forEach((function(e,n){var i,a;i=M(e),a={element:t[n],index:n},i.__draggable_context=a}))}},{key:"getUnderlyingVm",value:function(e){return R(e)}},{key:"getVmIndexFromDomIndex",value:function(e,t){var n=this.defaultNodes,i=n.length,a=t.children,o=a.item(e);if(null===o)return i;var s=R(o);if(s)return s.index;if(0===i)return 0;var r=M(n[0]);return e<p(a).findIndex((function(e){return e===r}))?0:i}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}])&&I(t.prototype,n),i&&I(t,i),e}(),N=n("8bbf");function V(e){var t=["transition-group","TransitionGroup"].includes(e),n=!function(e){return S.includes(e)}(e)&&!t;return{transition:t,externalComponent:n,tag:n?Object(N.resolveComponent)(e):t?N.TransitionGroup:e}}function z(e){var t=e.$slots,n=e.tag,i=e.realList,a=function(e){var t=e.$slots,n=e.realList,i=e.getKey,a=n||[],o=c(["header","footer"].map((function(e){return(n=t[e])?n():[];var n})),2),s=o[0],r=o[1],u=t.item;if(!u)throw new Error("draggable element must have an item slot");var d=a.flatMap((function(e,t){return u({element:e,index:t}).map((function(t){return t.key=i(e),t.props=l(l({},t.props||{}),{},{"data-draggable":!0}),t}))}));if(d.length!==a.length)throw new Error("Item slot must have only one child");return{header:s,footer:r,default:d}}({$slots:t,realList:i,getKey:e.getKey}),o=V(n);return new L({nodes:a,root:o,realList:i})}function P(e,t){var n=this;Object(N.nextTick)((function(){return n.$emit(e.toLowerCase(),t)}))}function U(e){var t=this;return function(n,i){if(null!==t.realList)return t["onDrag".concat(e)](n,i)}}function j(e){var t=this,n=U.call(this,e);return function(i,a){n.call(t,i,a),P.call(t,e,i)}}var G=null,Z={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(e){return e}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},F=["update:modelValue","change"].concat(p([].concat(p(O.manageAndEmit),p(O.emit)).map((function(e){return e.toLowerCase()})))),B=Object(N.defineComponent)({name:"draggable",inheritAttrs:!1,props:Z,emits:F,data:function(){return{error:!1}},render:function(){try{this.error=!1;var e=this.$slots,t=this.$attrs,n=this.tag,i=this.componentData,a=z({$slots:e,tag:n,realList:this.realList,getKey:this.getKey});this.componentStructure=a;var o=function(e){var t=e.$attrs,n=e.componentData,i=void 0===n?{}:n;return l(l({},A(Object.entries(t).filter((function(e){var t=c(e,2),n=t[0];return t[1],D(n)})))),i)}({$attrs:t,componentData:i});return a.render(N.h,o)}catch(s){return this.error=!0,Object(N.h)("pre",{style:{color:"red"}},s.stack)}},created:function(){null!==this.list&&null!==this.modelValue&&g.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var e=this;if(!this.error){var t=this.$attrs,n=this.$el;this.componentStructure.updated();var i=function(e){var t=e.$attrs,n=e.callBackBuilder,i=A(T(t));Object.entries(n).forEach((function(e){var t=c(e,2),n=t[0],a=t[1];O[n].forEach((function(e){i["on".concat(e)]=a(e)}))}));var a="[data-draggable]".concat(i.draggable||"");return l(l({},i),{},{draggable:a})}({$attrs:t,callBackBuilder:{manageAndEmit:function(t){return j.call(e,t)},emit:function(t){return P.bind(e,t)},manage:function(t){return U.call(e,t)}}}),a=1===n.nodeType?n:n.parentElement;this._sortable=new h.a(a,i),this.targetDomElement=a,a.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{realList:function(){var e=this.list;return e||this.modelValue},getKey:function(){var e=this.itemKey;return"function"==typeof e?e:function(t){return t[e]}}},watch:{$attrs:{handler:function(e){var t=this._sortable;t&&T(e).forEach((function(e){var n=c(e,2),i=n[0],a=n[1];t.option(i,a)}))},deep:!0}},methods:{getUnderlyingVm:function(e){return this.componentStructure.getUnderlyingVm(e)||null},getUnderlyingPotencialDraggableComponent:function(e){return e.__draggable_component__},emitChanges:function(e){var t=this;Object(N.nextTick)((function(){return t.$emit("change",e)}))},alterList:function(e){if(this.list)e(this.list);else{var t=p(this.modelValue);e(t),this.$emit("update:modelValue",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,p(e))};this.alterList(t)},updatePosition:function(e,t){this.alterList((function(n){return n.splice(t,0,n.splice(e,1)[0])}))},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,i=this.getUnderlyingPotencialDraggableComponent(t);if(!i)return{component:i};var a=i.realList,o={list:a,component:i};return t!==n&&a?l(l({},i.getUnderlyingVm(n)||{}),o):o},getVmIndexFromDomIndex:function(e){return this.componentStructure.getVmIndexFromDomIndex(e,this.targetDomElement)},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),G=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){f(e.item);var n=this.getVmIndexFromDomIndex(e.newIndex);this.spliceList(n,0,t);var i={element:t,newIndex:n};this.emitChanges({added:i})}},onDragRemove:function(e){if(m(this.$el,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context,n=t.index,i=t.element;this.spliceList(n,1);var a={element:i,oldIndex:n};this.emitChanges({removed:a})}else f(e.clone)},onDragUpdate:function(e){f(e.item),m(e.from,e.item,e.oldIndex);var t=this.context.index,n=this.getVmIndexFromDomIndex(e.newIndex);this.updatePosition(t,n);var i={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:i})},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=p(t.to.children).filter((function(e){return"none"!==e.style.display})),i=n.indexOf(t.related),a=e.component.getVmIndexFromDomIndex(i);return-1===n.indexOf(G)&&t.willInsertAfter?a+1:a},onDragMove:function(e,t){var n=this.move,i=this.realList;if(!n||!i)return!0;var a=this.getRelatedContextFromMoveEvent(e),o=this.computeFutureIndex(a,e),s=l(l({},this.context),{},{futureIndex:o});return n(l(l({},e),{},{relatedContext:a,draggedContext:s}),t)},onDragEnd:function(){G=null}}});t.default=B},fb6a:function(e,t,n){var i=n("23e7"),a=n("861d"),o=n("e8b5"),s=n("23cb"),r=n("50c4"),l=n("fc6a"),u=n("8418"),d=n("b622"),c=n("1dde"),p=n("ae40"),_=c("slice"),h=p("slice",{ACCESSORS:!0,0:0,1:2}),f=d("species"),m=[].slice,g=Math.max;i({target:"Array",proto:!0,forced:!_||!h},{slice:function(e,t){var n,i,d,c=l(this),p=r(c.length),_=s(e,p),h=s(void 0===t?p:t,p);if(o(c)&&("function"!=typeof(n=c.constructor)||n!==Array&&!o(n.prototype)?a(n)&&null===(n=n[f])&&(n=void 0):n=void 0,n===Array||void 0===n))return m.call(c,_,h);for(i=new(void 0===n?Array:n)(g(h-_,0)),d=0;_<h;_++,d++)_ in c&&u(i,d,c[_]);return i.length=d,i}})},fc6a:function(e,t,n){var i=n("44ad"),a=n("1d80");e.exports=function(e){return i(a(e))}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var i=n("4930");e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}}).default));function Mt(){let e=[{name:"自定义",value:"",id:ZY.rid(),data:{tagName:"div"},lib:""},{name:"template",value:"",id:ZY.rid(),data:{tagName:"template"},lib:""}];for(let t=1;t<6;t++)e.push({name:"h"+t,value:"",id:ZY.rid(),data:{tagName:"h"+t},lib:"html"});return e}function Rt(){return function(){let e=[];return["view","text","image","icon","button","match-media"].forEach((t=>{e.push({name:t,value:"",id:ZY.rid(),data:{tagName:t},lib:"wxml"})})),e}().concat([])}function Lt(){let e=getApp().getElementComponentTags().map((e=>({name:e,value:"",id:ZY.rid(),data:{tagName:e},lib:"element"})));return Mt().concat(e)}const Nt={name:"PlumbLayout",mixins:[Ot,{components:{draggable:It,Fold:Oe,Remove:Se,Plus:De,Edit:Ae},computed:{styleObj(){return{"--ele-panel-width":"350px","--com-panel-width":this.panelOpend?"350px":"70px"}},classObj(){return{"plumb-layout--panel-opened":this.panelOpend}}},props:{openPanel:{type:Boolean,default:!0},handleList1:null},data(){let e=this.handleList1?this.handleList1():Lt();return{panelOpend:this.openPanel,list1:e,list2:[],isDragging:!1,disableDrag:!1,filterList1:""}},methods:{onDropStart(){this.isDragging=!0,this.disableDrag=!0},onDropEnd(){this.isDragging=!1},togglePanel(){this.panelOpend=!this.panelOpend},async onList2Change(e){await this.$nextTick();let{added:t={}}=e,n=Te(t.element.data);this.insertEleGroup(r({},n),t.element),this.disableDrag=!1,this.$emit("ele-drag-change")},list1ItemCls(e){return{"list-group-item--hidden":!e.name.includes(this.filterList1)}}}},Ct,Et],props:{rootId:String,handleAppend:{type:Function,default:()=>function(){}},handleDep:{type:Function,default:()=>function(){}},handleGroup:{type:Function,default:()=>function(){}}},data:()=>({pointsMap:{},instance:null,config:{},deps:[]}),watch:{},computed:{buildedGroups(){return this.handleGroup(this.groups)}},mounted(){let e=this;e.config=St(e),jsPlumb.ready((function(){e.instance=jsPlumb.getInstance({Container:e.$refs.container}),e.$emit("init",e)}))},methods:{init({deps:e=[]}={}){this.deps=e},insDeps(e){let t=this,n=this.instance;e.forEach((e=>{t.insDep(e.id,n,e.items)}))},async useDeps(e=[]){var t;let n=[],i=null!=(t=await ZY_EXT.store.getItem(this.storagePrefix+"-deps"))?t:e;return i&&i.forEach((e=>{let t=tt(e.type,e);t&&n.push(t)})),this.deps=n,n},async useLinks(e){let t=await ZY_EXT.store.getItem(this.storagePrefix+"-links"),n={eventLinks:[],links:null!=t?t:[]};return n&&(n.eventLinks&&this.insEventLinks(n.eventLinks),n.links&&this.insComLinks(n.links)),[]},insEventLinks(e=[]){let t=this.instance;Array.isArray(e)&&e.forEach((e=>{let n=t.getEndpoints(e.from),i=t.getEndpoints(e.to);t.connect({source:n[0],target:i[0]})}))},insComLinks(e=[]){let t=this.instance;Array.isArray(e)&&e.forEach((e=>{let n=t.getEndpoints(e.from),i=t.getEndpoints(e.to);t.connect({source:n[1],target:i[0]})}))},insDep(e,t,n=[]){let i=this;i.addEndpoint(e+"-top",{anchors:["Left"]},e),n.forEach((t=>{i.renderItem(t,e)})),i.makeDraggable(e,t,n)},addEndpoint(e,t,n,i=""){this.pointsMap[n]||(this.pointsMap[n]={});let a=this.config,o=this.instance;document.getElementById(e)&&(this.pointsMap[n][e+i]=o.addEndpoint(e,t,a.baseStyle))},uninsDep(e){let t=e.id,n=this.instance;[t+"-top"].forEach((e=>{if(document.getElementById(e)){let e=this.pointsMap[t];if(e){for(let[t,i]of Object.entries(e))n.deleteEndpoint(i);delete this.pointsMap[t]}}}))},deleteDep(e){let t=e.id,n=this.deps.findIndex((e=>e.id===t));n>-1&&(this.uninsDep(e),this.deps.splice(n,1)),this.$nextTick((()=>{this.instance.repaintEverything(),this.$emit("delete-dep",{dep:e})}))},async appendDep(e){this.handleDep&&this.handleDep(e),this.deps.push(e),await this.$nextTick(),this.insDep(e.id,this.instance,e.items)},editDep(e){this.$emit("edit-dep",e)},setDep(e,t){let n=this.deps.find((t=>t.id===e));if(n)for(let i in t)n[i]=t[i]},insertEleGroup(e=null,t={}){let n=this.buildedGroups.find((e=>"ele"===e.type));if(n){let i=this.buildDepFromGroup(n);i.data=null!=e?e:{tagName:"div"},i.lib=t.lib,Array.isArray(t.items)&&(i.items=t.items),this.appendDep(i)}},save(){let e=this.getToolsData();this.saveCache2Storage(e),this.$emit("save-data",e.data)}}},Vt=["id"],zt={class:"a-space-mb-10"},Pt={key:0,class:"a-space-mb-10"},Ut={class:"a-space-mb-20"},jt=be("选择"),Gt={class:"playground"},Zt={class:"com-panel"},Ft={class:"a-space-mb-10"},Bt=be("添加组"),Yt={class:"element-panel"},Xt={class:"a-space-mb-20 a-space-ph-10"},$t={style:{height:"450px",overflow:"auto"}},Wt={class:"element-list-item"},Ht={class:"container-con"},Kt=["id"],Jt=["id","dep-name"],qt=["data-pid","id"],Qt=me("h3",{style:{margin:"10px 0"}},"items",-1),en=["id","data-pid"],tn=["data-pid","id"],nn={class:"a-space-mb-10 plumb-layout__header-desc"},an=me("div",null,null,-1),on={key:0},sn={key:0},rn={key:1},ln=["id","data-pid"],un={class:"a-space-mr-10 plumb-layout__item-action"},dn={class:"drag-put-area"};Nt.render=function(e,t,n,i,a,o){const s=pe("el-space"),r=pe("el-image"),l=pe("el-button"),u=pe("el-col"),d=pe("el-row"),c=pe("el-dialog"),p=pe("Fold"),_=pe("el-icon"),h=pe("el-input"),f=pe("draggable"),m=pe("Remove"),g=pe("el-popconfirm"),b=pe("Edit"),y=pe("plus");return q(),Q("div",{class:ue(["plumb-layout",e.classObj]),id:e.comId,style:ne(e.styleObj)},[ge(c,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dialogVisible=t),title:"组选择",width:"72vw","close-on-click-modal":!1},{default:he((()=>[ge(d,{gutter:20},{default:he((()=>[(q(!0),Q(ee,null,te(o.buildedGroups,(t=>(q(),_e(u,{span:6},{default:he((()=>[me("div",zt,[ge(s,null,{default:he((()=>[me("div",null,Ie(t.type),1),me("div",null,Ie(t.desc),1)])),_:2},1024)]),t.img?(q(),Q("div",Pt,[ge(r,{src:t.img},null,8,["src"])])):ye("",!0),me("div",Ut,[ge(l,{type:"primary",size:"small",onClick:n=>e.selectGroupTemplate(t)},{default:he((()=>[jt])),_:2},1032,["onClick"])])])),_:2},1024)))),256))])),_:1})])),_:1},8,["modelValue"]),me("div",Gt,[me("div",Zt,[me("div",Ft,[ge(l,{size:"small",onClick:e.togglePanel},{default:he((()=>[ge(_,null,{default:he((()=>[ge(p)])),_:1})])),_:1},8,["onClick"])]),ge(d,{align:"middle",class:"tools plumb-layout__tools"},{default:he((()=>[ge(l,{size:"small",class:"add-group-btn",onClick:t[1]||(t[1]=t=>e.toggleGroupDialog(!0))},{default:he((()=>[Bt])),_:1})])),_:1}),me("div",Yt,[me("div",Xt,[ge(h,{modelValue:e.filterList1,"onUpdate:modelValue":t[2]||(t[2]=t=>e.filterList1=t),placeholder:"搜索"},null,8,["modelValue"])]),me("div",$t,[ge(f,{class:"dragArea list-group",modelValue:e.list1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.list1=t),onStart:e.onDropStart,onEnd:e.onDropEnd,group:{name:"people",pull:"clone",put:!1},sort:!1,disabled:e.disableDrag,"item-key":"id",tag:"el-row",style:{"align-items":"flex-start","flex-wrap":"wrap"}},{item:he((({element:t})=>[ge(u,{class:ue(["list-group-item",e.list1ItemCls(t)]),span:12},{default:he((()=>[me("div",Wt,Ie(t.label?t.label:t.name),1)])),_:2},1032,["class"])])),_:1},8,["modelValue","onStart","onEnd","disabled"])])])]),me("div",Ht,[me("div",{id:e.containerId,ref:"container",class:"container"},[(q(!0),Q(ee,null,te(a.deps,((t,n)=>(q(),Q("div",{id:t.id,class:"abs section","dep-name":t.id,key:t.id},[ge(g,{title:"这是一段内容确定删除吗？",onConfirm:e=>o.deleteDep(t)},{reference:he((()=>[ge(l,{size:"mini",type:"danger"},{default:he((()=>[ge(_,null,{default:he((()=>[ge(m)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),"events"===t.type?(q(),Q(ee,{key:0},[me("div",{class:"item header","data-pid":t.id,id:t.id+"-top"},[me("div",null,[me("div",null,[ge(l,{size:"mini",onClick:e=>o.editDep(t)},{default:he((()=>[ge(_,null,{default:he((()=>[ge(b)])),_:1})])),_:2},1032,["onClick"])]),me("div",null,"类型: "+Ie(t.type),1),me("div",null,"SUB: "+Ie(t.sub),1),me("div",null,"ID: "+Ie(t.id),1)])],8,qt),t.config.closure?ye("",!0):(q(),Q(ee,{key:0},[Qt,(q(!0),Q(ee,null,te(t.items,((e,n)=>(q(),Q("div",{key:n,id:e.id,"data-pid":t.id,class:"item content-item"},[me("div",null,Ie(e.name),1)],8,en)))),128))],64))],64)):(q(),Q(ee,{key:1},[me("div",{class:"item header","data-pid":t.id,id:t.id+"-top"},[me("div",nn,[ge(s,null,{default:he((()=>[me("div",null,"类型: "+Ie(t.typeLabel?t.typeLabel:t.type),1),ge(l,{size:"mini",onClick:e=>o.editDep(t)},{default:he((()=>[ge(_,null,{default:he((()=>[ge(b)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),an,"ele"===t.type?(q(),Q("div",on,[t.data&&t.data.tagName?(q(),Q("div",sn,"标签名: "+Ie(t.data.tagName),1)):ye("",!0)])):ye("",!0),t.data&&t.data.partName?(q(),Q("div",rn,"PART: "+Ie(t.data.partName),1)):ye("",!0)])],8,tn),t.config.closure?ye("",!0):(q(),Q(ee,{key:0},[(q(!0),Q(ee,null,te(t.items,((n,i)=>(q(),Q("div",{key:i,id:n.id,"data-pid":t.id,class:"item content-item"},[me("div",un,[ge(h,{class:"plumb-layout__item-input-key",readonly:t.keyReadonly,modelValue:n.key,"onUpdate:modelValue":e=>n.key=e,placeholder:"请填写key"},null,8,["readonly","modelValue","onUpdate:modelValue"]),ie(e.$slots,"item-action-beforeend",ae(oe({item:n,dep:t})))]),t.noToolsRemove?ye("",!0):(q(),_e(l,{key:0,size:"mini",onClick:a=>e.deleteItem(t,n,i)},{default:he((()=>[ge(_,null,{default:he((()=>[ge(m)])),_:1})])),_:2},1032,["onClick"]))],8,ln)))),128)),t.noToolsAdd?ye("",!0):(q(),_e(l,{key:0,class:"plumb-layout__plus-btn",size:"mini",onClick:n=>e.appendItem(t)},{default:he((()=>[ge(_,null,{default:he((()=>[ge(y)])),_:1})])),_:2},1032,["onClick"])),ie(e.$slots,"plus-action",ae(oe({dep:t,renderRefresh:e.renderRefresh})))],64))],64))],8,Jt)))),128))],8,Kt),re(me("div",dn,[ge(f,{class:"dragArea list-group",list:e.list2,group:"people",sort:!1,"item-key":"id",onChange:e.onList2Change},{item:he((({element:e})=>[me("div",null,Ie(e.name),1)])),_:1},8,["list","onChange"])],512),[[le,e.isDragging]])])])],14,Vt)};const cn=fe({name:"ZLayoutEditor",mixins:[{data:()=>({LayoutContext:null,showCurrent:!0,currentLinks:[],currentLayoutMap:{}}),props:{autoLoad:{type:Boolean,default:!0},debug:Boolean,drawerWidth:{type:String,default:"600px"}},methods:{async onPlumbLayoutInit(e){if(this.LayoutContext=e,this.autoLoad){let t=[];await e.usePosMap(),await e.useDeps(t),await e.$nextTick(),await ZY.sleep(300),e.insDeps(e.deps),await ZY.sleep(300),e.useLinks()}this.$emit("plumb-inited",{LayoutContext:e,context:this})},handleDep(e){},handleGroup(e){var t;let n=null!=(t=it())?t:[],i=["array","object"],a=n.filter((e=>!i.includes(e[0]))).map((e=>e[1]));return e.concat(a)},handleAppend(e,t){at(e,t)},async onSaveData({deps:e,links:t=[]}){let n=function(e=[],t=[]){let n=e,i=[],a=t.map((e=>e.fromPID)),o=t.map((e=>e.toPID));t.map((e=>e.from)),0===o.length&&0===a.length?n.length>0&&(i.push(n[0]),n[0].id):n.forEach((e=>{let t=e.id;a.includes(t)&&!o.includes(t)&&i.push(e)}));return i}(e,t)[0].id,i={[n]:e.find((e=>e.id===n))};t.forEach((t=>{let{toPID:n=""}=t;if(n){let t=e.find((e=>e.id===n));t&&(i[n]=t)}}));let a=JSON.parse(JSON.stringify(i)),o=JSON.parse(JSON.stringify(t));this.currentLayoutMap=a,this.currentLinks=o,this.showCurrent=!1;let s={uuid:ZY.nid(),currentLayoutMap:a,currentLinks:o};await this.onSaveLayout({origin:{deps:e,links:t},currentData:s}),this.showCurrent=!0}}},{methods:{handleNext(e){let t=e.id,n=this.currentLinks.filter((e=>e.from===t));return Array.isArray(n)&&n[0]?n[0].toPID:""}}},{props:{editorContent:String},data:()=>({renderFormLoading:!1,renderFormDesigner:!1,currentEditDep:null}),methods:{async onEditDep(e){if(this.renderFormLoading=!0,this.renderFormDesigner=!1,this.currentEditDep=e,this.editorContent)await this.loadStepByContent(this.editorContent,"editor_step");else if(e.editor&&await this.loadStepByContent(e.editor,"editor_step"),Array.isArray(e.editorTpl)){let[t]=e.editorTpl,n=nt(t)(e,{weapp:this.weapp});await this.loadStepByContent(n,"editor_step")}await this.$nextTick(),await ZY.sleep(30),this.renderFormLoading=!1,this.renderFormDesigner=!0},async onDeleteDep({dep:e}){let t=e.id;this.LayoutContext.deletePos(t),this.$emit("del-dep")}}}],props:{storePrefix:{type:String,default:"play"},controls:{type:Boolean,default:!0},openPanel:{type:Boolean,default:!0},handleList1:null,weapp:{type:Boolean,default:!1}},data:()=>({rootId:"i1",layoutMap:{},layout:[]}),components:{PlumbLayout:Nt,RenderLayout:xt},setup(e,t){let n=Me().ctx;let i=c({properties:{editor_step:{type:String}},computed:{}},{onInited:function({storeControl:e}){},extendContext:{}});i=p(i);let a,{EVENT_NAMES:o}=_(i);function s(){let e="";if(n.LayoutContext){let{data:t}=n.LayoutContext.getToolsData();e=h(t)}return e}return i.setEventHandler({"add:arr:common"(e){let{parts:t,partName:n,selfpath:i,process:a}=e;t[n].arrAppend(i)},"call:save"(e){n.LayoutContext&&n.LayoutContext.save()},"get:xml"(e){s()},"model:update:all"(e){let{model:a,key:o,newVal:s,config:r}=e;if(Te(a),r.process===i.store.model.editor_step&&(n.currentEditDep.data=Te(s),n.currentEditDep.str_data=ZY.JSON5.stringify(Te(s)),"form"===n.currentEditDep.type))try{n.currentEditDep.content=function(t=[],n){var i;let a=ZY.JSON5,o=[],s={};t.forEach((t=>{if(t.name&&t.type)try{let e=a.parse(t.ui),n=a.parse(t.properties),i=(a.parse(t.computed),{type:t.type,name:t.name,serviceTpl:{def:{},args:{src:"bservice.twig"}},def:{type:"object",ui:e,properties:n},computed:{}});s[i.name]=a.parse(t.defaultVal),o.push(i)}catch(e){console.log(e)}}));let r={name:null!=(i=n.name)?i:"process-step1",defaultVal:s,init:{def:{constants:{},parts:o},args:{src:"comformscr.twig"}}};return a.stringify(r)}(a.parts,a),n.LayoutContext.setDep(n.currentEditDep.id,{content:n.currentEditDep.content})}catch(l){console.error(l)}t.emit("mode:update:all",e)}}),{EVENT_NAMES:o,getXML:s,onFires:function(e,n){t.emit(e,n)},importToolsData:function(e){return i.ctx.LayoutContext.importToolsData(e)},onDrawerClose:function(e){},saveCache2Storage:function(e){return i.ctx.LayoutContext.saveCache2Storage(e)},onSaveLayout:async function({origin:e,currentData:n}){return a=ZY.JSON5.parse(ZY.JSON5.stringify(e)),t.emit("save-layout",{cachedPageLayout:a,currentData:n}),""},getToolsData:function(){return n.LayoutContext.getToolsData()},clearLayoutStorage:function(e){return i.ctx.LayoutContext.clearStorage(e)},loadStepByContent:async function(e="",t=""){let[,a]=await ZY.awaitTo(ZY.importJsStr(e));if(!a||!a.default)throw new Error("loadStepByContent res");const o=a.default;let s={updateData(e,t){i.setPartModel(o.name,e,t)}};return i.setDef(o,(function({done:e}){for(let[t,i]of Object.entries(o.defaultVal))if(console.log(t,i,n.currentEditDep),n.currentEditDep.data){ZY.lodash.keys(n.currentEditDep.data).length>0?s.updateData(t,n.currentEditDep.data):s.updateData(t,i)}else s.updateData(t,n.currentEditDep);e()})),await we(),i.setByPath(t,o.name),s},store:i.store,save:function(){n.LayoutContext&&n.LayoutContext.save()},page:i,allDef:i.defMap}}}),pn={key:0,class:"z-layout-editor"},_n=be("保存"),hn=be("获取xml"),fn={key:0};cn.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("el-row"),l=pe("PlumbLayout"),u=pe("el-divider"),d=pe("el-space"),c=pe("HttpComponent"),p=pe("el-drawer"),_=Re("loading");return e.page.inited?(q(),Q("div",pn,[e.page.inited?(q(),Q(ee,{key:0},[e.controls?(q(),_e(r,{key:0,class:"a-space-mb-10"},{default:he((()=>[ge(s,{type:"primary",onClick:t[0]||(t[0]=t=>e.page.callEvent("call:save"))},{default:he((()=>[_n])),_:1}),ge(s,{type:"primary",onClick:t[1]||(t[1]=t=>e.page.callEvent("get:xml"))},{default:he((()=>[hn])),_:1})])),_:1})):ye("",!0),ge(r,{style:{"flex-wrap":"nowrap"}},{default:he((()=>[ge(l,{style:{flex:"1"},storePrefix:e.storePrefix,onInit:e.onPlumbLayoutInit,"root-id":e.rootId,handleAppend:e.handleAppend,"handle-dep":e.handleDep,"open-panel":e.openPanel,handleList1:e.handleList1,"handle-group":e.handleGroup,onDeleteDep:e.onDeleteDep,onSaveData:e.onSaveData,onEditDep:e.onEditDep,onEleDragChange:t[2]||(t[2]=t=>e.onFires("ele-drag-change",t))},{"item-action-beforeend":he((t=>[ie(e.$slots,"plumb-layout-item-action-beforeend",ae(oe(t)))])),"plus-action":he((t=>[ie(e.$slots,"plumb-layout-plus-action",ae(oe(t)))])),_:3},8,["storePrefix","onInit","root-id","handleAppend","handle-dep","open-panel","handleList1","handle-group","onDeleteDep","onSaveData","onEditDep"]),ge(p,{title:"属性",size:"900px",modelValue:e.renderFormDesigner,"onUpdate:modelValue":t[3]||(t[3]=t=>e.renderFormDesigner=t),"lock-scroll":!1,"destroy-on-close":"",onClosed:t[4]||(t[4]=t=>e.onDrawerClose(e.currentEditItem,e.currentEditDep))},{default:he((()=>[re(me("div",null,[e.renderFormDesigner?(q(),_e(c,{key:0,defs:e.allDef,is:e.store.model.editor_step,debug:e.debug},{array_con_afterbegin:he((e=>[ge(u)])),array_afterbegin:he((t=>[ge(d,{align:"middle"},{default:he((()=>[me("h3",null,Ie(t.label),1),"items"!==t.key?(q(),_e(s,{key:0,type:"primary",size:"small",onClick:n=>e.page.callEvent(e.EVENT_NAMES.ARR_APPEND_COMMON,t)},{default:he((()=>[be("添加"+Ie(t.label),1)])),_:2},1032,["onClick"])):ye("",!0)])),_:2},1024)])),array_con_beforeend:he((t=>["items"!==t.key?(q(),Q("div",fn,[ge(s,{type:"danger",size:"small",onClick:n=>e.page.callEvent(e.EVENT_NAMES.ARR_REMOVE_COMMON,t)},{default:he((()=>[be("删除"+Ie(t.label),1)])),_:2},1032,["onClick"])])):ye("",!0)])),_:1},8,["defs","is","debug"])):ye("",!0)],512),[[_,e.renderFormLoading]])])),_:1},8,["size","modelValue"])])),_:3})],64)):ye("",!0)])):ye("",!0)};var mn={exports:{}},gn={},bn={exports:{}},yn={},vn={};function wn(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function xn(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function Cn(e,t){this.__indent_cache=new xn(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new wn(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}wn.prototype.clone_empty=function(){var e=new wn(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},wn.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},wn.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},wn.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},wn.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},wn.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},wn.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},wn.prototype.is_empty=function(){return 0===this.__items.length},wn.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},wn.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},wn.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},wn.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},wn.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},wn.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},wn.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},xn.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),n+=e*this.__indent_size,n+=t},xn.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+=this.__cache[t]},xn.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()},xn.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},Cn.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},Cn.prototype.get_line_number=function(){return this.__lines.length},Cn.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},Cn.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},Cn.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},Cn.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},Cn.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==e&&(n=n.replace(/[\n]/g,e)),n},Cn.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},Cn.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},Cn.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},Cn.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},Cn.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},Cn.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},Cn.prototype.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},Cn.prototype.just_added_newline=function(){return this.current_line.is_empty()},Cn.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},Cn.prototype.ensure_empty_line_above=function(e,t){for(var n=this.__lines.length-2;n>=0;){var i=this.__lines[n];if(i.is_empty())break;if(0!==i.item(0).indexOf(e)&&i.item(-1)!==t){this.__lines.splice(n+1,0,new wn(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},vn.Output=Cn;var kn={};kn.Token=function(e,t,n,i){this.type=e,this.text=t,this.comments_before=null,this.newlines=n||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null};var En,On,Sn,Dn,An,Tn={};On="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",Dn="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",An="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+(Sn="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc")+"])",(En=Tn).identifier=new RegExp(An+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),En.identifierStart=new RegExp(An),En.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+On+Sn+Dn+"])+"),En.newline=/[\n\r\u2028\u2029]/,En.lineBreak=new RegExp("\r\n|"+En.newline.source),En.allLineBreaks=new RegExp(En.lineBreak.source,"g");var In={},Mn={};function Rn(e,t){this.raw_options=Ln(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function Ln(e,t){var n,i={};for(n in e=Nn(e))n!==t&&(i[n]=e[n]);if(t&&e[t])for(n in e[t])i[n]=e[t][n];return i}function Nn(e){var t,n={};for(t in e){n[t.replace(/-/g,"_")]=e[t]}return n}Rn.prototype._get_array=function(e,t){var n=this.raw_options[e],i=t||[];return"object"==typeof n?null!==n&&"function"==typeof n.concat&&(i=n.concat()):"string"==typeof n&&(i=n.split(/[^a-zA-Z0-9_\/\-]+/)),i},Rn.prototype._get_boolean=function(e,t){var n=this.raw_options[e];return void 0===n?!!t:!!n},Rn.prototype._get_characters=function(e,t){var n=this.raw_options[e],i=t||"";return"string"==typeof n&&(i=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),i},Rn.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var i=parseInt(n,10);return isNaN(i)&&(i=t),i},Rn.prototype._get_selection=function(e,t,n){var i=this._get_selection_list(e,t,n);if(1!==i.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return i[0]},Rn.prototype._get_selection_list=function(e,t,n){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var i=this._get_array(e,n);if(!this._is_valid_selection(i,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return i},Rn.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},Mn.Options=Rn,Mn.normalizeOpts=Nn,Mn.mergeOpts=Ln;var Vn=Mn.Options,zn=["before-newline","after-newline","preserve-newline"];function Pn(e){Vn.call(this,e,"js");var t=this.raw_options.brace_style||null;"expand-strict"===t?this.raw_options.brace_style="expand":"collapse-preserve-inline"===t?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var i=0;i<n.length;i++)"preserve-inline"===n[i]?this.brace_preserve_inline=!0:this.brace_style=n[i];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",zn),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}Pn.prototype=new Vn,In.Options=Pn;var Un={},jn={},Gn=RegExp.prototype.hasOwnProperty("sticky");function Zn(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}Zn.prototype.restart=function(){this.__position=0},Zn.prototype.back=function(){this.__position>0&&(this.__position-=1)},Zn.prototype.hasNext=function(){return this.__position<this.__input_length},Zn.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},Zn.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},Zn.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return!n||Gn&&e.sticky||n.index!==t&&(n=null),n},Zn.prototype.test=function(e,t){return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&!!this.__match(e,t)},Zn.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,null!==n&&e.test(n)},Zn.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},Zn.prototype.read=function(e,t,n){var i,a="";return e&&(i=this.match(e))&&(a+=i[0]),!t||!i&&e||(a+=this.readUntil(t,n)),a},Zn.prototype.readUntil=function(e,t){var n,i=this.__position;e.lastIndex=this.__position;var a=e.exec(this.__input);return a?(i=a.index,t&&(i+=a[0].length)):i=this.__input_length,n=this.__input.substring(this.__position,i),this.__position=i,n},Zn.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},Zn.prototype.get_regexp=function(e,t){var n=null,i="g";return t&&Gn&&(i="y"),"string"==typeof e&&""!==e?n=new RegExp(e,i):e&&(n=new RegExp(e.source,i)),n},Zn.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},Zn.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n},Zn.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},jn.InputScanner=Zn;var Fn={},Bn={};function Yn(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}Yn.prototype.restart=function(){this.__position=0},Yn.prototype.isEmpty=function(){return 0===this.__tokens_length},Yn.prototype.hasNext=function(){return this.__position<this.__tokens_length},Yn.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},Yn.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},Yn.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},Bn.TokenStream=Yn;var Xn={},$n={};function Wn(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}Wn.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},Wn.prototype.read_match=function(){return this._input.match(this._match_pattern)},Wn.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},Wn.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},Wn.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},Wn.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},Wn.prototype._create=function(){return new Wn(this._input,this)},Wn.prototype._update=function(){},$n.Pattern=Wn;var Hn=$n.Pattern;function Kn(e,t){Hn.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}Kn.prototype=new Hn,Kn.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},Kn.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},Kn.prototype.matching=function(e,t){var n=this._create();return n.__set_whitespace_patterns(e,t),n._update(),n},Kn.prototype._create=function(){return new Kn(this._input,this)},Kn.prototype.__split=function(e,t){e.lastIndex=0;for(var n=0,i=[],a=e.exec(t);a;)i.push(t.substring(n,a.index)),n=a.index+a[0].length,a=e.exec(t);return n<t.length?i.push(t.substring(n,t.length)):i.push(""),i},Xn.WhitespacePattern=Kn;var Jn=jn.InputScanner,qn=kn.Token,Qn=Bn.TokenStream,ei=Xn.WhitespacePattern,ti={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},ni=function(e,t){this._input=new Jn(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new ei(this._input)};ni.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new Qn,this._reset();for(var t=new qn(ti.START,""),n=null,i=[],a=new Qn;t.type!==ti.EOF;){for(e=this._get_next_token(t,n);this._is_comment(e);)a.add(e),e=this._get_next_token(t,n);a.isEmpty()||(e.comments_before=a,a=new Qn),e.parent=n,this._is_opening(e)?(i.push(n),n=e):n&&this._is_closing(e,n)&&(e.opened=n,n.closed=e,n=i.pop(),e.parent=n),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},ni.prototype._is_first_token=function(){return this.__tokens.isEmpty()},ni.prototype._reset=function(){},ni.prototype._get_next_token=function(e,t){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(ti.RAW,n):this._create_token(ti.EOF,"")},ni.prototype._is_comment=function(e){return!1},ni.prototype._is_opening=function(e){return!1},ni.prototype._is_closing=function(e,t){return!1},ni.prototype._create_token=function(e,t){return new qn(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},ni.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},Fn.Tokenizer=ni,Fn.TOKEN=ti;var ii={};function ai(e,t){e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}ai.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t},ai.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},ii.Directives=ai;var oi={},si=$n.Pattern,ri={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function li(e,t){si.call(this,e,t),this.__template_pattern=null,this._disabled=Object.assign({},ri),this._excluded=Object.assign({},ri),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=Object.assign(this._excluded,t._excluded),this._disabled=Object.assign(this._disabled,t._disabled));var n=new si(e);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/),smarty:n.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:n.starting_with(/{\*/).until_after(/\*}/),smarty_literal:n.starting_with(/{literal}/).until_after(/{\/literal}/)}}li.prototype=new si,li.prototype._create=function(){return new li(this._input,this)},li.prototype._update=function(){this.__set_templated_pattern()},li.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},li.prototype.read_options=function(e){var t=this._create();for(var n in ri)t._disabled[n]=-1===e.templating.indexOf(n);return t._update(),t},li.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},li.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},li.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||e.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},li.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=(e=(e=e||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=(e=e||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(e=(e=(e=e||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return e},oi.TemplatablePattern=li;var ui=jn.InputScanner,di=Fn.Tokenizer,ci=Fn.TOKEN,pi=ii.Directives,_i=Tn,hi=$n.Pattern,fi=oi.TemplatablePattern;function mi(e,t){return-1!==t.indexOf(e)}var gi={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:ci.START,RAW:ci.RAW,EOF:ci.EOF},bi=new pi(/\/\*/,/\*\//),yi=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,vi=/[0-9]/,wi=/[^\d\.]/,xi=">>> === !== << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),Ci=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";Ci=(Ci="\\?\\.(?!\\d) "+(Ci=Ci.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var ki,Ei=new RegExp(Ci),Oi="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),Si=Oi.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),Di=new RegExp("^(?:"+Si.join("|")+")$"),Ai=function(e,t){di.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new hi(this._input),i=new fi(this._input).read_options(this._options);this.__patterns={template:i,identifier:i.starting_with(_i.identifier).matching(_i.identifierMatch),number:n.matching(yi),punct:n.matching(Ei),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(_i.lineBreak),shebang:n.starting_with(/#!/).until_after(_i.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\]|)(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:i.until(/['\\\n\r\u2028\u2029]/),double_quote:i.until(/["\\\n\r\u2028\u2029]/),template_text:i.until(/[`\\$]/),template_expression:i.until(/[`}\\]/)}};(Ai.prototype=new di)._is_comment=function(e){return e.type===gi.COMMENT||e.type===gi.BLOCK_COMMENT||e.type===gi.UNKNOWN},Ai.prototype._is_opening=function(e){return e.type===gi.START_BLOCK||e.type===gi.START_EXPR},Ai.prototype._is_closing=function(e,t){return(e.type===gi.END_BLOCK||e.type===gi.END_EXPR)&&t&&("]"===e.text&&"["===t.text||")"===e.text&&"("===t.text||"}"===e.text&&"{"===t.text)},Ai.prototype._reset=function(){ki=!1},Ai.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var i=this._input.peek();return null===i?this._create_token(gi.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_non_javascript(i))||this._read_string(i))||this._read_word(e))||this._read_singles(i))||this._read_comment(i))||this._read_regexp(i,e))||this._read_xml(i,e))||this._read_punctuation())||this._create_token(gi.UNKNOWN,this._input.next())},Ai.prototype._read_word=function(e){var t;return""!==(t=this.__patterns.identifier.read())?(t=t.replace(_i.allLineBreaks,"\n"),e.type!==gi.DOT&&(e.type!==gi.RESERVED||"set"!==e.text&&"get"!==e.text)&&Di.test(t)?"in"===t||"of"===t?this._create_token(gi.OPERATOR,t):this._create_token(gi.RESERVED,t):this._create_token(gi.WORD,t)):""!==(t=this.__patterns.number.read())?this._create_token(gi.WORD,t):void 0},Ai.prototype._read_singles=function(e){var t=null;return"("===e||"["===e?t=this._create_token(gi.START_EXPR,e):")"===e||"]"===e?t=this._create_token(gi.END_EXPR,e):"{"===e?t=this._create_token(gi.START_BLOCK,e):"}"===e?t=this._create_token(gi.END_BLOCK,e):";"===e?t=this._create_token(gi.SEMICOLON,e):"."===e&&wi.test(this._input.peek(1))?t=this._create_token(gi.DOT,e):","===e&&(t=this._create_token(gi.COMMA,e)),t&&this._input.next(),t},Ai.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(""!==e)return"="===e?this._create_token(gi.EQUALS,e):"?."===e?this._create_token(gi.DOT,e):this._create_token(gi.OPERATOR,e)},Ai.prototype._read_non_javascript=function(e){var t="";if("#"===e){if(this._is_first_token()&&(t=this.__patterns.shebang.read()))return this._create_token(gi.UNKNOWN,t.trim()+"\n");if(t=this.__patterns.include.read())return this._create_token(gi.UNKNOWN,t.trim()+"\n");e=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(vi)){do{n+=e=this._input.next()}while(this._input.hasNext()&&"#"!==e&&"="!==e);return"#"===e||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(gi.WORD,n)}this._input.back()}else if("<"===e&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(_i.newline);)t+=this._input.next();return ki=!0,this._create_token(gi.COMMENT,t)}}else if(ki&&"-"===e&&(t=this.__patterns.html_comment_end.read()))return ki=!1,this._create_token(gi.COMMENT,t);return null},Ai.prototype._read_comment=function(e){var t=null;if("/"===e){var n="";if("*"===this._input.peek(1)){n=this.__patterns.block_comment.read();var i=bi.get_directives(n);i&&"start"===i.ignore&&(n+=bi.readIgnored(this._input)),n=n.replace(_i.allLineBreaks,"\n"),(t=this._create_token(gi.BLOCK_COMMENT,n)).directives=i}else"/"===this._input.peek(1)&&(n=this.__patterns.comment.read(),t=this._create_token(gi.COMMENT,n))}return t},Ai.prototype._read_string=function(e){if("`"===e||"'"===e||'"'===e){var t=this._input.next();return this.has_char_escapes=!1,t+="`"===e?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=function(e){var t="",n=0,i=new ui(e),a=null;for(;i.hasNext();)if((a=i.match(/([\s]|[^\\]|\\\\)+/g))&&(t+=a[0]),"\\"===i.peek()){if(i.next(),"x"===i.peek())a=i.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==i.peek()){t+="\\",i.hasNext()&&(t+=i.next());continue}a=i.match(/u([0-9A-Fa-f]{4})/g)}if(!a)return e;if((n=parseInt(a[1],16))>126&&n<=255&&0===a[0].indexOf("x"))return e;if(n>=0&&n<32){t+="\\"+a[0];continue}t+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return t}(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(_i.allLineBreaks,"\n"),this._create_token(gi.STRING,t)}return null},Ai.prototype._allow_regexp_or_xml=function(e){return e.type===gi.RESERVED&&mi(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===gi.END_EXPR&&")"===e.text&&e.opened.previous.type===gi.RESERVED&&mi(e.opened.previous.text,["if","while","for"])||mi(e.type,[gi.COMMENT,gi.START_EXPR,gi.START_BLOCK,gi.START,gi.END_BLOCK,gi.OPERATOR,gi.EQUALS,gi.EOF,gi.SEMICOLON,gi.COMMA])},Ai.prototype._read_regexp=function(e,t){if("/"===e&&this._allow_regexp_or_xml(t)){for(var n=this._input.next(),i=!1,a=!1;this._input.hasNext()&&(i||a||this._input.peek()!==e)&&!this._input.testChar(_i.newline);)n+=this._input.peek(),i?i=!1:(i="\\"===this._input.peek(),"["===this._input.peek()?a=!0:"]"===this._input.peek()&&(a=!1)),this._input.next();return this._input.peek()===e&&(n+=this._input.next(),n+=this._input.read(_i.identifier)),this._create_token(gi.STRING,n)}return null},Ai.prototype._read_xml=function(e,t){if(this._options.e4x&&"<"===e&&this._allow_regexp_or_xml(t)){var n="",i=this.__patterns.xml.read_match();if(i){for(var a=i[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),o=0===a.indexOf("{"),s=0;i;){var r=!!i[1],l=i[2];if(!(!!i[i.length-1]||"![CDATA["===l.slice(0,8))&&(l===a||o&&l.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(r?--s:++s),n+=i[0],s<=0)break;i=this.__patterns.xml.read_match()}return i||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(_i.allLineBreaks,"\n"),this._create_token(gi.STRING,n)}}return null},Ai.prototype._read_string_recursive=function(e,t,n){var i,a;"'"===e?a=this.__patterns.single_quote:'"'===e?a=this.__patterns.double_quote:"`"===e?a=this.__patterns.template_text:"}"===e&&(a=this.__patterns.template_expression);for(var o=a.read(),s="";this._input.hasNext();){if((s=this._input.next())===e||!t&&_i.newline.test(s)){this._input.back();break}"\\"===s&&this._input.hasNext()?("x"===(i=this._input.peek())||"u"===i?this.has_char_escapes=!0:"\r"===i&&"\n"===this._input.peek(1)&&this._input.next(),s+=this._input.next()):n&&("${"===n&&"$"===s&&"{"===this._input.peek()&&(s+=this._input.next()),n===s&&(s+="`"===e?this._read_string_recursive("}",t,"`"):this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(s+=this._input.next()))),o+=s+=a.read()}return o},Un.Tokenizer=Ai,Un.TOKEN=gi,Un.positionable_operators=xi.slice(),Un.line_starters=Oi.slice();var Ti=vn.Output,Ii=kn.Token,Mi=Tn,Ri=In.Options,Li=Un.Tokenizer,Ni=Un.line_starters,Vi=Un.positionable_operators,zi=Un.TOKEN;function Pi(e,t){return-1!==t.indexOf(e)}function Ui(e,t){return e&&e.type===zi.RESERVED&&e.text===t}function ji(e,t){return e&&e.type===zi.RESERVED&&Pi(e.text,t)}var Gi=["case","return","do","if","throw","else","await","break","continue","async"],Zi=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].replace(/-/g,"_")]=e[n];return t}(["before-newline","after-newline","preserve-newline"]),Fi=[Zi.before_newline,Zi.preserve_newline],Bi="BlockStatement",Yi="Statement",Xi="ObjectLiteral",$i="ArrayLiteral",Wi="ForInitializer",Hi="Conditional",Ki="Expression";function Ji(e,t){t.multiline_frame||t.mode===Wi||t.mode===Hi||e.remove_indent(t.start_line_index)}function qi(e){return e===$i}function Qi(e){return Pi(e,[Ki,Wi,Hi])}function ea(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new Ri(t)}ea.prototype.create_flags=function(e,t){var n=0;return e&&(n=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_token:e?e.last_token:new Ii(zi.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,alignment:0,line_indent_level:e?e.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},ea.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new Ti(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(Bi);var n=new Li(e,this._options);return this._tokens=n.tokenize(),e},ea.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._reset(this._source_text),t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&Mi.lineBreak.test(e||"")&&(t=e.match(Mi.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(t)},ea.prototype.handle_token=function(e,t){e.type===zi.START_EXPR?this.handle_start_expr(e):e.type===zi.END_EXPR?this.handle_end_expr(e):e.type===zi.START_BLOCK?this.handle_start_block(e):e.type===zi.END_BLOCK?this.handle_end_block(e):e.type===zi.WORD||e.type===zi.RESERVED?this.handle_word(e):e.type===zi.SEMICOLON?this.handle_semicolon(e):e.type===zi.STRING?this.handle_string(e):e.type===zi.EQUALS?this.handle_equals(e):e.type===zi.OPERATOR?this.handle_operator(e):e.type===zi.COMMA?this.handle_comma(e):e.type===zi.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===zi.COMMENT?this.handle_comment(e,t):e.type===zi.DOT?this.handle_dot(e):e.type===zi.EOF?this.handle_eof(e):(e.type,zi.UNKNOWN,this.handle_unknown(e,t))},ea.prototype.handle_whitespace_and_comments=function(e,t){var n=e.newlines,i=this._options.keep_array_indentation&&qi(this._flags.mode);if(e.comments_before)for(var a=e.comments_before.next();a;)this.handle_whitespace_and_comments(a,t),this.handle_token(a,t),a=e.comments_before.next();if(i)for(var o=0;o<n;o+=1)this.print_newline(o>0,t);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,t);for(var s=1;s<n;s+=1)this.print_newline(!0,t)}};var ta=["async","break","continue","return","throw","yield"];ea.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=void 0!==t&&t,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&e.newlines||t;if(Pi(this._flags.last_token.text,Vi)||Pi(e.text,Vi)){var i=Pi(this._flags.last_token.text,Vi)&&Pi(this._options.operator_position,Fi)||Pi(e.text,Vi);n=n&&i}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(ji(this._flags.last_token,ta))return;this._output.set_wrap_point()}}},ea.prototype.print_newline=function(e,t){if(!t&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==zi.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text))for(var n=this._tokens.peek();!(this._flags.mode!==Yi||this._flags.if_block&&Ui(n,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)},ea.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&("["===e.text||qi(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},ea.prototype.print_token=function(e){if(this._output.raw)this._output.add_raw_token(e);else{if(this._options.comma_first&&e.previous&&e.previous.type===zi.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},ea.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ea.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ea.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ea.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===Yi&&Ji(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ea.prototype.start_of_object_property=function(){return this._flags.parent.mode===Xi&&this._flags.mode===Yi&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||ji(this._flags.last_token,["get","set"]))},ea.prototype.start_of_statement=function(e){var t=!1;return!!(t=(t=(t=(t=(t=(t=(t=t||ji(this._flags.last_token,["var","let","const"])&&e.type===zi.WORD)||Ui(this._flags.last_token,"do"))||!(this._flags.parent.mode===Xi&&this._flags.mode===Yi)&&ji(this._flags.last_token,ta)&&!e.newlines)||Ui(this._flags.last_token,"else")&&!(Ui(e,"if")&&!e.comments_before))||this._flags.last_token.type===zi.END_EXPR&&(this._previous_flags.mode===Wi||this._previous_flags.mode===Hi))||this._flags.last_token.type===zi.WORD&&this._flags.mode===Bi&&!this._flags.in_case&&!("--"===e.text||"++"===e.text)&&"function"!==this._last_last_text&&e.type!==zi.WORD&&e.type!==zi.RESERVED)||this._flags.mode===Xi&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||ji(this._flags.last_token,["get","set"])))&&(this.set_mode(Yi),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,ji(e,["do","for","if","while"])),!0)},ea.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=Ki;if("["===e.text){if(this._flags.last_token.type===zi.WORD||")"===this._flags.last_token.text)return ji(this._flags.last_token,Ni)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));t=$i,qi(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),Pi(this._flags.last_token.type,[zi.START_EXPR,zi.END_EXPR,zi.WORD,zi.OPERATOR,zi.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===zi.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,t=Wi):Pi(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,t=Hi):Pi(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===e.whitespace_before?this._output.space_before_token=!1:(Pi(this._flags.last_token.text,Ni)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===zi.EQUALS||this._flags.last_token.type===zi.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===zi.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var i=this._tokens.peek(-4);ji(n,["async","function"])||"*"===n.text&&ji(i,["async","function"])?this._output.space_before_token=!0:this._flags.mode===Xi&&("{"!==n.text&&","!==n.text&&("*"!==n.text||"{"!==i.text&&","!==i.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===zi.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(Pi(this._last_last_text,["function","yield"])||this._flags.mode===Xi&&Pi(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===zi.START_BLOCK?this.print_newline():this._flags.last_token.type!==zi.END_EXPR&&this._flags.last_token.type!==zi.START_EXPR&&this._flags.last_token.type!==zi.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==zi.COMMA||this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},ea.prototype.handle_end_expr=function(e){for(;this._flags.mode===Yi;)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,"]"===e.text&&qi(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==zi.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(e),this.restore_mode(),Ji(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===Hi&&(this._previous_flags.mode=Ki,this._flags.do_block=!1,this._flags.do_while=!1)},ea.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===zi.END_EXPR?(this.set_mode(Bi),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(Bi):n&&(Pi(n.text,[":",","])&&Pi(t.type,[zi.STRING,zi.WORD,zi.RESERVED])||Pi(t.text,["get","set","..."])&&Pi(n.type,[zi.WORD,zi.RESERVED]))?Pi(this._last_last_text,["class","interface"])?this.set_mode(Bi):this.set_mode(Xi):this._flags.last_token.type===zi.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(Bi):Pi(this._flags.last_token.type,[zi.EQUALS,zi.START_EXPR,zi.COMMA,zi.OPERATOR])||ji(this._flags.last_token,["return","throw","import","default"])?this.set_mode(Xi):this.set_mode(Bi);var i=!t.comments_before&&"}"===t.text,a=i&&"function"===this._flags.last_word&&this._flags.last_token.type===zi.END_EXPR;if(this._options.brace_preserve_inline){var o=0,s=null;this._flags.inline_frame=!0;do{if(o+=1,(s=this._tokens.peek(o-1)).newlines){this._flags.inline_frame=!1;break}}while(s.type!==zi.EOF&&(s.type!==zi.END_BLOCK||s.opened!==e))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==zi.OPERATOR&&(a||this._flags.last_token.type===zi.EQUALS||ji(this._flags.last_token,Gi)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!qi(this._previous_flags.mode)||this._flags.last_token.type!==zi.START_EXPR&&this._flags.last_token.type!==zi.COMMA||((this._flags.last_token.type===zi.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===zi.COMMA||this._flags.last_token.type===zi.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==zi.OPERATOR&&this._flags.last_token.type!==zi.START_EXPR&&(this._flags.last_token.type!==zi.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(e),this.indent(),i||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},ea.prototype.handle_end_block=function(e){for(this.handle_whitespace_and_comments(e);this._flags.mode===Yi;)this.restore_mode();var t=this._flags.last_token.type===zi.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:"expand"===this._options.brace_style?t||this.print_newline():t||(qi(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)},ea.prototype.handle_word=function(e){if(e.type===zi.RESERVED)if(Pi(e.text,["set","get"])&&this._flags.mode!==Xi)e.type=zi.WORD;else if("import"===e.text&&"("===this._tokens.peek().text)e.type=zi.WORD;else if(Pi(e.text,["as","from"])&&!this._flags.import_block)e.type=zi.WORD;else if(this._flags.mode===Xi){":"===this._tokens.peek().text&&(e.type=zi.WORD)}if(this.start_of_statement(e)?ji(this._flags.last_token,["var","let","const"])&&e.type===zi.WORD&&(this._flags.declaration_statement=!0):!e.newlines||Qi(this._flags.mode)||this._flags.last_token.type===zi.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===zi.EQUALS||!this._options.preserve_newlines&&ji(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(e):(this.handle_whitespace_and_comments(e),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(Ui(e,"while"))return this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&Ui(e,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===Yi;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&ji(e,["case","default"]))return this.print_newline(),this._flags.last_token.type!==zi.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),void(this._flags.in_case=!0);if(this._flags.last_token.type!==zi.COMMA&&this._flags.last_token.type!==zi.START_EXPR&&this._flags.last_token.type!==zi.EQUALS&&this._flags.last_token.type!==zi.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e),Ui(e,"function"))return(Pi(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!Pi(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==zi.OPERATOR)&&(this._output.just_added_blankline()||e.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===zi.RESERVED||this._flags.last_token.type===zi.WORD?ji(this._flags.last_token,["get","set","new","export"])||ji(this._flags.last_token,ta)||Ui(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===zi.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!Qi(this._flags.mode)&&!qi(this._flags.mode))&&this.print_newline(),this.print_token(e),void(this._flags.last_word=e.text);var t="NONE";(this._flags.last_token.type===zi.END_BLOCK?this._previous_flags.inline_frame?t="SPACE":ji(e,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines?t="NEWLINE":(t="SPACE",this._output.space_before_token=!0):t="NEWLINE":this._flags.last_token.type===zi.SEMICOLON&&this._flags.mode===Bi?t="NEWLINE":this._flags.last_token.type===zi.SEMICOLON&&Qi(this._flags.mode)?t="SPACE":this._flags.last_token.type===zi.STRING?t="NEWLINE":this._flags.last_token.type===zi.RESERVED||this._flags.last_token.type===zi.WORD||"*"===this._flags.last_token.text&&(Pi(this._last_last_text,["function","yield"])||this._flags.mode===Xi&&Pi(this._last_last_text,["{",","]))?t="SPACE":this._flags.last_token.type===zi.START_BLOCK?t=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===zi.END_EXPR&&(this._output.space_before_token=!0,t="NEWLINE"),ji(e,Ni)&&")"!==this._flags.last_token.text&&(t=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),ji(e,["else","catch","finally"]))?(this._flags.last_token.type!==zi.END_BLOCK||this._previous_flags.mode!==Bi||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),"}"!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):"NEWLINE"===t?ji(this._flags.last_token,Gi)||"declare"===this._flags.last_token.text&&ji(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==zi.END_EXPR?this._flags.last_token.type===zi.START_EXPR&&ji(e,["var","let","const"])||":"===this._flags.last_token.text||(Ui(e,"if")&&Ui(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):ji(e,Ni)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&qi(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===t&&(this._output.space_before_token=!0);!e.previous||e.previous.type!==zi.WORD&&e.previous.type!==zi.RESERVED||(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===zi.RESERVED&&("do"===e.text?this._flags.do_block=!0:"if"===e.text?this._flags.if_block=!0:"import"===e.text?this._flags.import_block=!0:this._flags.import_block&&Ui(e,"from")&&(this._flags.import_block=!1))},ea.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);for(var t=this._tokens.peek();!(this._flags.mode!==Yi||this._flags.if_block&&Ui(t,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)},ea.prototype.handle_string=function(e){(!e.text.startsWith("`")||0!==e.newlines||""!==e.whitespace_before||")"!==e.previous.text&&this._flags.last_token.type!==zi.WORD)&&(this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===zi.RESERVED||this._flags.last_token.type===zi.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===zi.COMMA||this._flags.last_token.type===zi.START_EXPR||this._flags.last_token.type===zi.EQUALS||this._flags.last_token.type===zi.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):!e.text.startsWith("`")||this._flags.last_token.type!==zi.END_EXPR||"]"!==e.previous.text&&")"!==e.previous.text||0!==e.newlines?this.print_newline():this._output.space_before_token=!0)),this.print_token(e)},ea.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0},ea.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(Qi(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===Xi||this._flags.mode===Yi&&this._flags.parent.mode===Xi?(this._flags.mode===Yi&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)},ea.prototype.handle_operator=function(e){var t="*"===e.text&&(ji(this._flags.last_token,["function","yield"])||Pi(this._flags.last_token.type,[zi.START_BLOCK,zi.COMMA,zi.END_BLOCK,zi.SEMICOLON])),n=Pi(e.text,["-","+"])&&(Pi(this._flags.last_token.type,[zi.START_BLOCK,zi.START_EXPR,zi.EQUALS,zi.OPERATOR])||Pi(this._flags.last_token.text,Ni)||","===this._flags.last_token.text);if(this.start_of_statement(e));else{var i=!t;this.handle_whitespace_and_comments(e,i)}if(ji(this._flags.last_token,Gi))return this._output.space_before_token=!0,void this.print_token(e);if("*"!==e.text||this._flags.last_token.type!==zi.DOT)if("::"!==e.text){if(this._flags.last_token.type===zi.OPERATOR&&Pi(this._options.operator_position,Fi)&&this.allow_wrap_or_preserved_newline(e),":"===e.text&&this._flags.in_case)return this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==zi.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var a=!0,o=!0,s=!1;if(":"===e.text?0===this._flags.ternary_depth?a=!1:(this._flags.ternary_depth-=1,s=!0):"?"===e.text&&(this._flags.ternary_depth+=1),!n&&!t&&this._options.preserve_newlines&&Pi(e.text,Vi)){var r=":"===e.text,l=r&&s,u=r&&!s;switch(this._options.operator_position){case Zi.before_newline:return this._output.space_before_token=!u,this.print_token(e),r&&!l||this.allow_wrap_or_preserved_newline(e),void(this._output.space_before_token=!0);case Zi.after_newline:return this._output.space_before_token=!0,!r||l?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),void(this._output.space_before_token=!0);case Zi.preserve_newline:return u||this.allow_wrap_or_preserved_newline(e),a=!(this._output.just_added_newline()||u),this._output.space_before_token=a,this.print_token(e),void(this._output.space_before_token=!0)}}if(t){this.allow_wrap_or_preserved_newline(e),a=!1;var d=this._tokens.peek();o=d&&Pi(d.type,[zi.WORD,zi.RESERVED])}else"..."===e.text?(this.allow_wrap_or_preserved_newline(e),a=this._flags.last_token.type===zi.START_BLOCK,o=!1):(Pi(e.text,["--","++","!","~"])||n)&&(this._flags.last_token.type!==zi.COMMA&&this._flags.last_token.type!==zi.START_EXPR||this.allow_wrap_or_preserved_newline(e),a=!1,o=!1,!e.newlines||"--"!==e.text&&"++"!==e.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&Qi(this._flags.mode)&&(a=!0),this._flags.last_token.type===zi.RESERVED?a=!0:this._flags.last_token.type===zi.END_EXPR?a=!("]"===this._flags.last_token.text&&("--"===e.text||"++"===e.text)):this._flags.last_token.type===zi.OPERATOR&&(a=Pi(e.text,["--","-","++","+"])&&Pi(this._flags.last_token.text,["--","-","++","+"]),Pi(e.text,["+","-"])&&Pi(this._flags.last_token.text,["--","++"])&&(o=!0)),(this._flags.mode!==Bi||this._flags.inline_frame)&&this._flags.mode!==Yi||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||a,this.print_token(e),this._output.space_before_token=o}else this.print_token(e);else this.print_token(e)},ea.prototype.handle_block_comment=function(e,t){return this._output.raw?(this._output.add_raw_token(e),void(e.directives&&"end"===e.directives.preserve&&(this._output.raw=this._options.test_output_raw))):e.directives?(this.print_newline(!1,t),this.print_token(e),"start"===e.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):Mi.newline.test(e.text)||e.newlines?void this.print_block_commment(e,t):(this._output.space_before_token=!0,this.print_token(e),void(this._output.space_before_token=!0))},ea.prototype.print_block_commment=function(e,t){var n,i=function(e){for(var t=[],n=(e=e.replace(Mi.allLineBreaks,"\n")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),n=(e=e.substring(n+1)).indexOf("\n");return e.length&&t.push(e),t}(e.text),a=!1,o=!1,s=e.whitespace_before,r=s.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(i[0]),this.print_newline(!1,t),i.length>1){for(a=function(e,t){for(var n=0;n<e.length;n++)if(e[n].trim().charAt(0)!==t)return!1;return!0}(i=i.slice(1),"*"),o=function(e,t){for(var n,i=0,a=e.length;i<a;i++)if((n=e[i])&&0!==n.indexOf(t))return!1;return!0}(i,s),a&&(this._flags.alignment=1),n=0;n<i.length;n++)a?(this.print_token_line_indentation(e),this._output.add_token(i[n].replace(/^\s+/g,""))):o&&i[n]?(this.print_token_line_indentation(e),this._output.add_token(i[n].substring(r))):(this._output.current_line.set_indent(-1),this._output.add_token(i[n])),this.print_newline(!1,t);this._flags.alignment=0}},ea.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)},ea.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),ji(this._flags.last_token,Gi)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)},ea.prototype.handle_unknown=function(e,t){this.print_token(e),"\n"===e.text[e.text.length-1]&&this.print_newline(!1,t)},ea.prototype.handle_eof=function(e){for(;this._flags.mode===Yi;)this.restore_mode();this.handle_whitespace_and_comments(e)},yn.Beautifier=ea;var na=yn.Beautifier,ia=In.Options;bn.exports=function(e,t){return new na(e,t).beautify()},bn.exports.defaultOptions=function(){return new ia};var aa={exports:{}},oa={},sa={},ra=Mn.Options;function la(e){ra.call(this,e,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var t=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||t;var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var i=0;i<n.length;i++)"expand"!==n[i]?this.brace_style="collapse":this.brace_style=n[i]}la.prototype=new ra,sa.Options=la;var ua=sa.Options,da=vn.Output,ca=jn.InputScanner,pa=new(0,ii.Directives)(/\/\*/,/\*\//),_a=/\r\n|[\r\n]/,ha=/\r\n|[\r\n]/g,fa=/\s/,ma=/(?:\s|\n)+/g,ga=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,ba=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function ya(e,t){this._source_text=e||"",this._options=new ua(t),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}ya.prototype.eatString=function(e){var t="";for(this._ch=this._input.next();this._ch;){if(t+=this._ch,"\\"===this._ch)t+=this._input.next();else if(-1!==e.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return t},ya.prototype.eatWhitespace=function(e){for(var t=fa.test(this._input.peek()),n=0;fa.test(this._input.peek());)this._ch=this._input.next(),e&&"\n"===this._ch&&(0===n||n<this._options.max_preserve_newlines)&&(n++,this._output.add_new_line(!0));return t},ya.prototype.foundNestedPseudoClass=function(){for(var e=0,t=1,n=this._input.peek(t);n;){if("{"===n)return!0;if("("===n)e+=1;else if(")"===n){if(0===e)return!1;e-=1}else if(";"===n||"}"===n)return!1;t++,n=this._input.peek(t)}return!1},ya.prototype.print_string=function(e){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(e)},ya.prototype.preserveSingleSpace=function(e){e&&(this._output.space_before_token=!0)},ya.prototype.indent=function(){this._indentLevel++},ya.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},ya.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;"auto"===t&&(t="\n",e&&_a.test(e||"")&&(t=e.match(_a)[0]));var n=(e=e.replace(ha,"\n")).match(/^[\t ]*/)[0];this._output=new da(this._options,n),this._input=new ca(e),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var i,a,o=0,s=!1,r=!1,l=!1,u=!1,d=!1,c=this._ch;i=""!==this._input.read(ma),a=c,this._ch=this._input.next(),"\\"===this._ch&&this._input.hasNext()&&(this._ch+=this._input.next()),c=this._ch,this._ch;)if("/"===this._ch&&"*"===this._input.peek()){this._output.add_new_line(),this._input.back();var p=this._input.read(ga),_=pa.get_directives(p);_&&"start"===_.ignore&&(p+=pa.readIgnored(this._input)),this.print_string(p),this.eatWhitespace(!0),this._output.add_new_line()}else if("/"===this._ch&&"/"===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(ba)),this.eatWhitespace(!0);else if("@"===this._ch)if(this.preserveSingleSpace(i),"{"===this._input.peek())this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var h=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);h.match(/[ :]$/)&&(h=this.eatString(": ").replace(/\s$/,""),this.print_string(h),this._output.space_before_token=!0),"extend"===(h=h.replace(/\s$/,""))?u=!0:"import"===h&&(d=!0),h in this.NESTED_AT_RULE?(this._nestedLevel+=1,h in this.CONDITIONAL_GROUP_RULE&&(l=!0)):s||0!==o||-1===h.indexOf(":")||(r=!0,this.indent())}else"#"===this._ch&&"{"===this._input.peek()?(this.preserveSingleSpace(i),this.print_string(this._ch+this.eatString("}"))):"{"===this._ch?(r&&(r=!1,this.outdent()),l?(l=!1,s=this._indentLevel>=this._nestedLevel):s=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&s&&this._output.previous_line&&"{"!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,"expand"===this._options.brace_style?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line()):"}"===this._ch?(this.outdent(),this._output.add_new_line(),"{"===a&&this._output.trim(!0),d=!1,u=!1,r&&(this.outdent(),r=!1),this.print_string(this._ch),s=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&"}"!==this._input.peek()&&this._output.add_new_line(!0)):":"===this._ch?!s&&!l||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||u||0!==o?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),r||(r=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):'"'===this._ch||"'"===this._ch?(this.preserveSingleSpace(i),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):";"===this._ch?0===o?(r&&(this.outdent(),r=!1),u=!1,d=!1,this.print_string(this._ch),this.eatWhitespace(!0),"/"!==this._input.peek()&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0):"("===this._ch?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),o++,this.indent(),this._ch=this._input.next(),")"===this._ch||'"'===this._ch||"'"===this._ch?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),o&&(o--,this.outdent()))):(this.preserveSingleSpace(i),this.print_string(this._ch),this.eatWhitespace(),o++,this.indent()):")"===this._ch?(o&&(o--,this.outdent()),this.print_string(this._ch)):","===this._ch?(this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||r||0!==o||d||u?this._output.space_before_token=!0:this._output.add_new_line()):">"!==this._ch&&"+"!==this._ch&&"~"!==this._ch||r||0!==o?"]"===this._ch?this.print_string(this._ch):"["===this._ch?(this.preserveSingleSpace(i),this.print_string(this._ch)):"="===this._ch?(this.eatWhitespace(),this.print_string("="),fa.test(this._ch)&&(this._ch="")):"!"!==this._ch||this._input.lookBack("\\")?(this.preserveSingleSpace(i),this.print_string(this._ch)):(this.print_string(" "),this.print_string(this._ch)):this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&fa.test(this._ch)&&(this._ch=""));return this._output.get_code(t)},oa.Beautifier=ya;var va=oa.Beautifier,wa=sa.Options;aa.exports=function(e,t){return new va(e,t).beautify()},aa.exports.defaultOptions=function(){return new wa};var xa={exports:{}},Ca={},ka={},Ea=Mn.Options;function Oa(e){Ea.call(this,e,"html"),1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}Oa.prototype=new Ea,ka.Options=Oa;var Sa={},Da=Fn.Tokenizer,Aa=Fn.TOKEN,Ta=ii.Directives,Ia=oi.TemplatablePattern,Ma=$n.Pattern,Ra={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:Aa.START,RAW:Aa.RAW,EOF:Aa.EOF},La=new Ta(/<\!--/,/-->/),Na=function(e,t){Da.call(this,e,t),this._current_tag_name="";var n=new Ia(this._input).read_options(this._options),i=new Ma(this._input);if(this.__patterns={word:n.until(/[\n\r\t <]/),single_quote:n.until_after(/'/),double_quote:n.until_after(/"/),attribute:n.until(/[\n\r\t =>]|\/>/),element_name:n.until(/[\n\r\t >\/]/),handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),handlebars_open:i.until(/[\n\r\t }]/),handlebars_raw_close:i.until(/}}/),comment:i.starting_with(/<!--/).until_after(/-->/),cdata:i.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:i.starting_with(/<!\[/).until_after(/]>/),processing:i.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var a=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=i.matching(a).until_after(a)}};(Na.prototype=new Da)._is_comment=function(e){return!1},Na.prototype._is_opening=function(e){return e.type===Ra.TAG_OPEN},Na.prototype._is_closing=function(e,t){return e.type===Ra.TAG_CLOSE&&t&&((">"===e.text||"/>"===e.text)&&"<"===t.text[0]||"}}"===e.text&&"{"===t.text[0]&&"{"===t.text[1])},Na.prototype._reset=function(){this._current_tag_name=""},Na.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var i=this._input.peek();return null===i?this._create_token(Ra.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_open_handlebars(i,t))||this._read_attribute(i,e,t))||this._read_close(i,t))||this._read_raw_content(i,e,t))||this._read_content_word(i))||this._read_comment_or_cdata(i))||this._read_processing(i))||this._read_open(i,t))||this._create_token(Ra.UNKNOWN,this._input.next())},Na.prototype._read_comment_or_cdata=function(e){var t=null,n=null,i=null;"<"===e&&("!"===this._input.peek(1)&&((n=this.__patterns.comment.read())?(i=La.get_directives(n))&&"start"===i.ignore&&(n+=La.readIgnored(this._input)):n=this.__patterns.cdata.read()),n&&((t=this._create_token(Ra.COMMENT,n)).directives=i));return t},Na.prototype._read_processing=function(e){var t=null,n=null;if("<"===e){var i=this._input.peek(1);"!"!==i&&"?"!==i||(n=(n=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),n&&((t=this._create_token(Ra.COMMENT,n)).directives=null)}return t},Na.prototype._read_open=function(e,t){var n=null,i=null;return t||"<"===e&&(n=this._input.next(),"/"===this._input.peek()&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),i=this._create_token(Ra.TAG_OPEN,n)),i},Na.prototype._read_open_handlebars=function(e,t){var n=null,i=null;return t||this._options.indent_handlebars&&"{"===e&&"{"===this._input.peek(1)&&("!"===this._input.peek(2)?(n=(n=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),i=this._create_token(Ra.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),i=this._create_token(Ra.TAG_OPEN,n))),i},Na.prototype._read_close=function(e,t){var n=null,i=null;return t&&("<"===t.text[0]&&(">"===e||"/"===e&&">"===this._input.peek(1))?(n=this._input.next(),"/"===e&&(n+=this._input.next()),i=this._create_token(Ra.TAG_CLOSE,n)):"{"===t.text[0]&&"}"===e&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),i=this._create_token(Ra.TAG_CLOSE,"}}"))),i},Na.prototype._read_attribute=function(e,t,n){var i=null,a="";if(n&&"<"===n.text[0])if("="===e)i=this._create_token(Ra.EQUALS,this._input.next());else if('"'===e||"'"===e){var o=this._input.next();o+='"'===e?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),i=this._create_token(Ra.VALUE,o)}else(a=this.__patterns.attribute.read())&&(i=t.type===Ra.EQUALS?this._create_token(Ra.VALUE,a):this._create_token(Ra.ATTRIBUTE,a));return i},Na.prototype._is_content_unformatted=function(e){return-1===this._options.void_elements.indexOf(e)&&(-1!==this._options.content_unformatted.indexOf(e)||-1!==this._options.unformatted.indexOf(e))},Na.prototype._read_raw_content=function(e,t,n){var i="";if(n&&"{"===n.text[0])i=this.__patterns.handlebars_raw_close.read();else if(t.type===Ra.TAG_CLOSE&&"<"===t.opened.text[0]&&"/"!==t.text[0]){var a=t.opened.text.substr(1).toLowerCase();if("script"===a||"style"===a){var o=this._read_comment_or_cdata(e);if(o)return o.type=Ra.TEXT,o;i=this._input.readUntil(new RegExp("</"+a+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(a)&&(i=this._input.readUntil(new RegExp("</"+a+"[\\n\\r\\t ]*?>","ig")))}return i?this._create_token(Ra.TEXT,i):null},Na.prototype._read_content_word=function(e){var t="";if(this._options.unformatted_content_delimiter&&e===this._options.unformatted_content_delimiter[0]&&(t=this.__patterns.unformatted_content_delimiter.read()),t||(t=this.__patterns.word.read()),t)return this._create_token(Ra.TEXT,t)},Sa.Tokenizer=Na,Sa.TOKEN=Ra;var Va=ka.Options,za=vn.Output,Pa=Sa.Tokenizer,Ua=Sa.TOKEN,ja=/\r\n|[\r\n]/,Ga=/\r\n|[\r\n]/g,Za=function(e,t){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=e.max_preserve_newlines,this.preserve_newlines=e.preserve_newlines,this._output=new za(e,t)};Za.prototype.current_line_has_match=function(e){return this._output.current_line.has_match(e)},Za.prototype.set_space_before_token=function(e,t){this._output.space_before_token=e,this._output.non_breaking_space=t},Za.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},Za.prototype.add_raw_token=function(e){this._output.add_raw_token(e)},Za.prototype.print_preserved_newlines=function(e){var t=0;e.type!==Ua.TEXT&&e.previous.type!==Ua.TEXT&&(t=e.newlines?1:0),this.preserve_newlines&&(t=e.newlines<this.max_preserve_newlines+1?e.newlines:this.max_preserve_newlines+1);for(var n=0;n<t;n++)this.print_newline(n>0);return 0!==t},Za.prototype.traverse_whitespace=function(e){return!(!e.whitespace_before&&!e.newlines)&&(this.print_preserved_newlines(e)||(this._output.space_before_token=!0),!0)},Za.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},Za.prototype.print_newline=function(e){this._output.add_new_line(e)},Za.prototype.print_token=function(e){e.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(e.text))},Za.prototype.indent=function(){this.indent_level++},Za.prototype.get_full_indent=function(e){return(e=this.indent_level+(e||0))<1?"":this._output.get_indent_string(e)};var Fa=function(e,t){var n=null,i=null;return t.closed?("script"===e?n="text/javascript":"style"===e&&(n="text/css"),(n=function(e){for(var t=null,n=e.next;n.type!==Ua.EOF&&e.closed!==n;){if(n.type===Ua.ATTRIBUTE&&"type"===n.text){n.next&&n.next.type===Ua.EQUALS&&n.next.next&&n.next.next.type===Ua.VALUE&&(t=n.next.next.text);break}n=n.next}return t}(t)||n).search("text/css")>-1?i="css":n.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?i="javascript":n.search(/(text|application|dojo)\/(x-)?(html)/)>-1?i="html":n.search(/test\/null/)>-1&&(i="null"),i):null};function Ba(e,t){return-1!==t.indexOf(e)}function Ya(e,t,n){this.parent=e||null,this.tag=t?t.tag_name:"",this.indent_level=n||0,this.parser_token=t||null}function Xa(e){this._printer=e,this._current_frame=null}function $a(e,t,n,i){this._source_text=e||"",t=t||{},this._js_beautify=n,this._css_beautify=i,this._tag_stack=null;var a=new Va(t,"html");this._options=a,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,"force".length),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,"preserve".length),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}Xa.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},Xa.prototype.record_tag=function(e){var t=new Ya(this._current_frame,e,this._printer.indent_level);this._current_frame=t},Xa.prototype._try_pop_frame=function(e){var t=null;return e&&(t=e.parser_token,this._printer.indent_level=e.indent_level,this._current_frame=e.parent),t},Xa.prototype._get_frame=function(e,t){for(var n=this._current_frame;n&&-1===e.indexOf(n.tag);){if(t&&-1!==t.indexOf(n.tag)){n=null;break}n=n.parent}return n},Xa.prototype.try_pop=function(e,t){var n=this._get_frame([e],t);return this._try_pop_frame(n)},Xa.prototype.indent_to_tag=function(e){var t=this._get_frame(e);t&&(this._printer.indent_level=t.indent_level)},$a.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&ja.test(e)&&(t=e.match(ja)[0]));var n=(e=e.replace(Ga,"\n")).match(/^[\t ]*/)[0],i={text:"",type:""},a=new Wa,o=new Za(this._options,n),s=new Pa(e,this._options).tokenize();this._tag_stack=new Xa(o);for(var r=null,l=s.next();l.type!==Ua.EOF;)l.type===Ua.TAG_OPEN||l.type===Ua.COMMENT?a=r=this._handle_tag_open(o,l,a,i):l.type===Ua.ATTRIBUTE||l.type===Ua.EQUALS||l.type===Ua.VALUE||l.type===Ua.TEXT&&!a.tag_complete?r=this._handle_inside_tag(o,l,a,s):l.type===Ua.TAG_CLOSE?r=this._handle_tag_close(o,l,a):l.type===Ua.TEXT?r=this._handle_text(o,l,a):o.add_raw_token(l),i=r,l=s.next();return o._output.get_code(t)},$a.prototype._handle_tag_close=function(e,t,n){var i={text:t.text,type:t.type};return e.alignment_size=0,n.tag_complete=!0,e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),n.is_unformatted?e.add_raw_token(t):("<"===n.tag_start_char&&(e.set_space_before_token("/"===t.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&n.has_wrapped_attrs&&e.print_newline(!1)),e.print_token(t)),!n.indent_content||n.is_unformatted||n.is_content_unformatted||(e.indent(),n.indent_content=!1),n.is_inline_element||n.is_unformatted||n.is_content_unformatted||e.set_wrap_point(),i},$a.prototype._handle_inside_tag=function(e,t,n,i){var a=n.has_wrapped_attrs,o={text:t.text,type:t.type};if(e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),n.is_unformatted)e.add_raw_token(t);else if("{"===n.tag_start_char&&t.type===Ua.TEXT)e.print_preserved_newlines(t)?(t.newlines=0,e.add_raw_token(t)):e.print_token(t);else{if(t.type===Ua.ATTRIBUTE?(e.set_space_before_token(!0),n.attr_count+=1):(t.type===Ua.EQUALS||t.type===Ua.VALUE&&t.previous.type===Ua.EQUALS)&&e.set_space_before_token(!1),t.type===Ua.ATTRIBUTE&&"<"===n.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(e.traverse_whitespace(t),a=a||0!==t.newlines),this._is_wrap_attributes_force)){var s=n.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&1===n.attr_count){var r,l=!0,u=0;do{if((r=i.peek(u)).type===Ua.ATTRIBUTE){l=!1;break}u+=1}while(u<4&&r.type!==Ua.EOF&&r.type!==Ua.TAG_CLOSE);s=!l}s&&(e.print_newline(!1),a=!0)}e.print_token(t),a=a||e.previous_token_wrapped(),n.has_wrapped_attrs=a}return o},$a.prototype._handle_text=function(e,t,n){var i={text:t.text,type:"TK_CONTENT"};return n.custom_beautifier_name?this._print_custom_beatifier_text(e,t,n):n.is_unformatted||n.is_content_unformatted?e.add_raw_token(t):(e.traverse_whitespace(t),e.print_token(t)),i},$a.prototype._print_custom_beatifier_text=function(e,t,n){var i=this;if(""!==t.text){var a,o=t.text,s=1,r="",l="";"javascript"===n.custom_beautifier_name&&"function"==typeof this._js_beautify?a=this._js_beautify:"css"===n.custom_beautifier_name&&"function"==typeof this._css_beautify?a=this._css_beautify:"html"===n.custom_beautifier_name&&(a=function(e,t){return new $a(e,t,i._js_beautify,i._css_beautify).beautify()}),"keep"===this._options.indent_scripts?s=0:"separate"===this._options.indent_scripts&&(s=-e.indent_level);var u=e.get_full_indent(s);if(o=o.replace(/\n[ \t]*$/,""),"html"!==n.custom_beautifier_name&&"<"===o[0]&&o.match(/^(<!--|<!\[CDATA\[)/)){var d=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(o);if(!d)return void e.add_raw_token(t);r=u+d[1]+"\n",o=d[4],d[5]&&(l=u+d[5]),o=o.replace(/\n[ \t]*$/,""),(d[2]||-1!==d[3].indexOf("\n"))&&(d=d[3].match(/[ \t]+$/))&&(t.whitespace_before=d[0])}if(o)if(a){var c=function(){this.eol="\n"};c.prototype=this._options.raw_options,o=a(u+o,new c)}else{var p=t.whitespace_before;p&&(o=o.replace(new RegExp("\n("+p+")?","g"),"\n")),o=u+o.replace(/\n/g,"\n"+u)}r&&(o=o?r+o+"\n"+l:r+l),e.print_newline(!1),o&&(t.text=o,t.whitespace_before="",t.newlines=0,e.add_raw_token(t),e.print_newline(!0))}},$a.prototype._handle_tag_open=function(e,t,n,i){var a=this._get_tag_open_token(t);return!n.is_unformatted&&!n.is_content_unformatted||n.is_empty_element||t.type!==Ua.TAG_OPEN||0!==t.text.indexOf("</")?(e.traverse_whitespace(t),this._set_tag_position(e,t,a,n,i),a.is_inline_element||e.set_wrap_point(),e.print_token(t)):(e.add_raw_token(t),a.start_tag_token=this._tag_stack.try_pop(a.tag_name)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(a.alignment_size=t.text.length+1),a.tag_complete||a.is_unformatted||(e.alignment_size=a.alignment_size),a};var Wa=function(e,t){var n;(this.parent=e||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",t)?(this.tag_start_char=t.text[0],this.text=t.text,"<"===this.tag_start_char?(n=t.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:""):(n=t.text.match(/^{{(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=n?n[1]:"","{{#>"===t.text&&">"===this.tag_check&&null!==t.next&&(this.tag_check=t.next.text)),this.tag_check=this.tag_check.toLowerCase(),t.type===Ua.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||t.closed&&"/>"===t.closed.text,this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))):this.tag_complete=!0};$a.prototype._get_tag_open_token=function(e){var t=new Wa(this._tag_stack.get_parser_token(),e);return t.alignment_size=this._options.wrap_attributes_indent_size,t.is_end_tag=t.is_end_tag||Ba(t.tag_check,this._options.void_elements),t.is_empty_element=t.tag_complete||t.is_start_tag&&t.is_end_tag,t.is_unformatted=!t.tag_complete&&Ba(t.tag_check,this._options.unformatted),t.is_content_unformatted=!t.is_empty_element&&Ba(t.tag_check,this._options.content_unformatted),t.is_inline_element=Ba(t.tag_name,this._options.inline)||"{"===t.tag_start_char,t},$a.prototype._set_tag_position=function(e,t,n,i,a){if(n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n)&&(n.is_inline_element||e.print_newline(!1)),this._tag_stack.record_tag(n),"script"!==n.tag_name&&"style"!==n.tag_name||n.is_unformatted||n.is_content_unformatted||(n.custom_beautifier_name=Fa(n.tag_check,t)))),Ba(n.tag_check,this._options.extra_liners)&&(e.print_newline(!1),e._output.just_added_blankline()||e.print_newline(!0)),n.is_empty_element){if("{"===n.tag_start_char&&"else"===n.tag_check)this._tag_stack.indent_to_tag(["if","unless","each"]),n.indent_content=!0,e.current_line_has_match(/{{#if/)||e.print_newline(!1);"!--"===n.tag_name&&a.type===Ua.TAG_CLOSE&&i.is_end_tag&&-1===n.text.indexOf("\n")||(n.is_inline_element||n.is_unformatted||e.print_newline(!1),this._calcluate_parent_multiline(e,n))}else if(n.is_end_tag){var o=!1;o=(o=n.start_tag_token&&n.start_tag_token.multiline_content)||!n.is_inline_element&&!(i.is_inline_element||i.is_unformatted)&&!(a.type===Ua.TAG_CLOSE&&n.start_tag_token===i)&&"TK_CONTENT"!==a.type,(n.is_content_unformatted||n.is_unformatted)&&(o=!1),o&&e.print_newline(!1)}else n.indent_content=!n.custom_beautifier_name,"<"===n.tag_start_char&&("html"===n.tag_name?n.indent_content=this._options.indent_inner_html:"head"===n.tag_name?n.indent_content=this._options.indent_head_inner_html:"body"===n.tag_name&&(n.indent_content=this._options.indent_body_inner_html)),n.is_inline_element||n.is_unformatted||"TK_CONTENT"===a.type&&!n.is_content_unformatted||e.print_newline(!1),this._calcluate_parent_multiline(e,n)},$a.prototype._calcluate_parent_multiline=function(e,t){!t.parent||!e._output.just_added_newline()||(t.is_inline_element||t.is_unformatted)&&t.parent.is_inline_element||(t.parent.multiline_content=!0)};var Ha=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],Ka=["a","audio","del","ins","map","noscript","video"];$a.prototype._do_optional_end_element=function(e){var t=null;if(!e.is_empty_element&&e.is_start_tag&&e.parent){if("body"===e.tag_name)t=t||this._tag_stack.try_pop("head");else if("li"===e.tag_name)t=t||this._tag_stack.try_pop("li",["ol","ul"]);else if("dd"===e.tag_name||"dt"===e.tag_name)t=(t=t||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]);else if("p"===e.parent.tag_name&&-1!==Ha.indexOf(e.tag_name)){var n=e.parent.parent;n&&-1!==Ka.indexOf(n.tag_name)||(t=t||this._tag_stack.try_pop("p"))}else"rp"===e.tag_name||"rt"===e.tag_name?t=(t=t||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):"optgroup"===e.tag_name?t=t||this._tag_stack.try_pop("optgroup",["select"]):"option"===e.tag_name?t=t||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===e.tag_name?t=t||this._tag_stack.try_pop("caption",["table"]):"thead"===e.tag_name?t=(t=t||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):"tbody"===e.tag_name||"tfoot"===e.tag_name?t=(t=(t=(t=t||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):"tr"===e.tag_name?t=(t=(t=t||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):"th"!==e.tag_name&&"td"!==e.tag_name||(t=(t=t||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return e.parent=this._tag_stack.get_parser_token(),t}},Ca.Beautifier=$a;var Ja=Ca.Beautifier,qa=ka.Options;xa.exports=function(e,t,n,i){return new Ja(e,t,n,i).beautify()},xa.exports.defaultOptions=function(){return new qa};var Qa,eo,to,no,io,ao,oo=bn.exports,so=aa.exports,ro=xa.exports;function lo(e,t,n,i){return ro(e,t,n=n||oo,i=i||so)}lo.defaultOptions=ro.defaultOptions,gn.js=oo,gn.css=so,gn.html=lo,Qa=mn,(ao=gn).js_beautify=ao.js,ao.css_beautify=ao.css,ao.html_beautify=ao.html,Qa.exports=(to=ao,no=ao,(io=function(e,t){return eo.js_beautify(e,t)}).js=(eo=ao).js_beautify,io.css=to.css_beautify,io.html=no.html_beautify,io.js_beautify=eo.js_beautify,io.css_beautify=to.css_beautify,io.html_beautify=no.html_beautify,io);var uo=mn.exports;const co={name:"EwXmlShower",mixins:[],props:{value:String},setup(e,t){var n;let i=Le({value:null!=(n=e.value)?n:"",inited:!1});return Ne((()=>{i.inited=!0})),Ve((()=>e.value),(e=>{i.value=null!=e?e:""})),{state:i,prettyStr:function(e){return uo.html(e)}}}};co.render=function(e,t,n,i,a,o){const s=pe("el-input");return i.state.inited?(q(),_e(s,{key:0,type:"textarea",value:i.prettyStr(i.state.value),readonly:""},null,8,["value"])):ye("",!0)};async function po(e="",t=(()=>{})){let n=await ZY_EXT.store.getItem(e);Array.isArray(n)||(n=[]),n=await t(n),await ZY_EXT.store.setItem(e,n)}const _o={name:"CusLayoutEditor",components:{EwXmlShower:co,ZLayoutEditor:cn},mixins:[f],setup(e,t){let n;e.defs;let i=ZY.JSON5,a=ZY.rid(6);!async function(){await po("layout-store-prefix",(e=>(e.forEach((e=>{kt(e)})),[])))}();let{data:o,methods:s,listeners:r,init:l,widgetConfig2:u}=m(e,t,{handleValueInit:e=>(e||(e="{data: {links: [], deps: []}, posMap: {}}"),e&&(n=i.parse(e)),e)}),d=o({dialogVisible:!1,previewVisible:!1});l(e);let c=null;async function p(){let e=c.getToolsData();await c.saveCache2Storage(e);let t=i.stringify(e);s.on_change(t)}return ze((()=>{c&&c.clearLayoutStorage()})),{state:d,getXML:function(){c.getXML()},openDialog:async function(){d.dialogVisible=!0,await po("layout-store-prefix",(e=>e.concat([a])))},onPlumbInited:async function({context:e}){await e.importToolsData(n),await ZY.sleep(300),await e.saveCache2Storage(n)},onEleDragChange:function(){},onClosed:async function(){await p()},onSaveLayout:function(e){console.log("onSaveLayout",e)},storePrefix:a,save:p,setLayoutRef:function(e,t){c=e},handleList1:function(){return"base"===u.dragLib?Mt().concat([]).concat(Rt()):Lt()},onPlumbUpdate:function(e){let t=c.getToolsData();d.value=i.stringify(t)},getXMLDisplay:function(e){return getApp().buildAllXml(e)},onPlumbDelDep:function(){let e=c.getToolsData();d.value=i.stringify(e)},widgetConfig:u,methods:s,listeners:r}}},ho={class:"cus-layout-editor"},fo=be("打开编辑"),mo=be("XML预览"),go=["mode"],bo=be("保存");_o.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("EwXmlShower"),l=pe("el-popover"),u=pe("el-row"),d=pe("ZLayoutEditor"),c=pe("el-dialog");return q(),Q("div",ho,[e.inited?(q(),Q(ee,{key:0},[ge(u,{type:"flex"},{default:he((()=>[ge(s,{size:"small",onClick:i.openDialog},{default:he((()=>[fo])),_:1},8,["onClick"]),ge(l,{visible:i.state.previewVisible,"onUpdate:visible":t[1]||(t[1]=e=>i.state.previewVisible=e),placement:"bottom",title:"",width:600,trigger:"click"},{reference:he((()=>[ge(s,{size:"small",onClick:t[0]||(t[0]=e=>i.state.previewVisible=!i.state.previewVisible)},{default:he((()=>[mo])),_:1})])),default:he((()=>[ge(r,{value:i.getXMLDisplay(i.state.value)},null,8,["value"])])),_:1},8,["visible"])])),_:1}),ge(c,{modelValue:i.state.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>i.state.dialogVisible=e),title:"DOM编辑",width:"80vw","close-on-click-modal":!1,onClosed:i.onClosed},{default:he((()=>[me("div",{mode:i.widgetConfig.mode},[ge(u,{class:"a-space-mb-10"},{default:he((()=>[ge(s,{type:"primary",onClick:i.save},{default:he((()=>[bo])),_:1},8,["onClick"])])),_:1}),me("div",null,[ge(r,{value:i.getXMLDisplay(i.state.value)},null,8,["value"])]),ge(d,{ref:i.setLayoutRef,controls:!1,onEleDragChange:i.onEleDragChange,"store-prefix":i.storePrefix,"auto-load":!1,onPlumbInited:i.onPlumbInited,"onMode:update:all":i.onPlumbUpdate,onDelDep:i.onPlumbDelDep,onSaveLayout:i.onSaveLayout,weapp:i.widgetConfig.weapp,"handle-list1":i.handleList1},null,8,["onEleDragChange","store-prefix","onPlumbInited","onMode:update:all","onDelDep","onSaveLayout","weapp","handle-list1"])],8,go)])),_:1},8,["modelValue","onClosed"])],64)):ye("",!0)])};const yo={name:"CusFormAttr",mixins:[f],setup(e,t){let n;e.defs;let i=ZY.JSON5,{data:a,methods:o,listeners:s,init:r}=m(e,t,{handleValueInit(e){if(e||(e={}),e)try{return n=i.parse(e),n}catch(t){}return{}}}),l=a({value:{}});return r(e),{state:l,widgetConfig:e.ui.widgetConfig,onChange:function(){let e=i.stringify(l.value);o.on_change(e)},methods:o,listeners:s}}},vo=be("普通"),wo=be("禁用"),xo=be("只读"),Co=be("隐藏");yo.render=function(e,t,n,i,a,o){const s=pe("el-input"),r=pe("z-cell-item"),l=pe("el-radio-button"),u=pe("el-radio-group"),d=pe("el-switch"),c=pe("el-input-number");return e.inited?(q(),Q(ee,{key:0},[ge(r,{label:"占位提示"},{default:he((()=>[ge(s,{modelValue:i.state.value.placeholder,"onUpdate:modelValue":t[0]||(t[0]=e=>i.state.value.placeholder=e),clearable:"",onChange:i.onChange},null,8,["modelValue","onChange"])])),_:1}),ge(r,{label:"状态"},{default:he((()=>[ge(u,{modelValue:i.state.value.statusType,"onUpdate:modelValue":t[1]||(t[1]=e=>i.state.value.statusType=e),onChange:i.onChange},{default:he((()=>[ge(l,{label:"common"},{default:he((()=>[vo])),_:1}),ge(l,{label:"disabled"},{default:he((()=>[wo])),_:1}),ge(l,{label:"readonly"},{default:he((()=>[xo])),_:1}),ge(l,{label:"hidden"},{default:he((()=>[Co])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),ge(r,{label:"清除按钮"},{default:he((()=>[ge(d,{modelValue:i.state.value.clearable,"onUpdate:modelValue":t[2]||(t[2]=e=>i.state.value.clearable=e),onChange:i.onChange,"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue","onChange"])])),_:1}),ge(r,{label:"字数统计"},{default:he((()=>[ge(d,{modelValue:i.state.value.showWordLimit,"onUpdate:modelValue":t[3]||(t[3]=e=>i.state.value.showWordLimit=e),onChange:i.onChange,"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue","onChange"])])),_:1}),ge(r,{label:"最大长度"},{default:he((()=>[ge(c,{modelValue:i.state.value.maxlength,"onUpdate:modelValue":t[4]||(t[4]=e=>i.state.value.maxlength=e),onChange:i.onChange,min:1,max:1e3},null,8,["modelValue","onChange"])])),_:1}),ge(r,{label:"最小长度"},{default:he((()=>[ge(c,{modelValue:i.state.value.minlength,"onUpdate:modelValue":t[5]||(t[5]=e=>i.state.value.minlength=e),onChange:i.onChange,min:1,max:1e3},null,8,["modelValue","onChange"])])),_:1})],64)):ye("",!0)};const ko={name:"EwSuggest",components:{EPopover:g,SimpleList:b},props:{modelValue:null,teleportTo:String,suggest:[],column:[],noInput:Boolean,usePrepend:Boolean,placement:{type:String,default:"top"},conWidth:{type:[String,Number],default:400}},setup(e,t){var n;let i=Le({value:null!=(n=e.modelValue)?n:"",popoverVisible:!1});function a(){t.emit("update:modelValue",i.value)}let[o,s]=y({timeout:500});return Ve((()=>e.modelValue),(e=>{i.value=e})),{state:i,setRefMan:s,onBlur:function(){t.emit("blur")},getSuggest:function(){return e.suggest?e.suggest:[]},onInput:function(){setTimeout((()=>{a(),t.emit("value:change",i.value)}),30)},openPopver:function(){i.popoverVisible=!0,s(!0)},selectSuggest:function(e){i.value=e,setTimeout((()=>{a(),t.emit("value:change",i.value)}),30)},refMan:o}}};de("data-v-a7a3e85a");const Eo=be("选择"),Oo={style:{"min-height":"200px","max-height":"400px",overflow:"auto"}};ce(),ko.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("SimpleList"),l=pe("e-popover"),u=pe("el-input");return q(),Q("div",{class:ue(["ew-suggest",{"input-width-none":n.noInput}])},[ge(u,se(e.$attrs,{modelValue:i.state.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.state.value=e),onBlur:i.onBlur,onInput:i.onInput}),{prepend:he((()=>[ie(e.$slots,"prepend",ae(oe({value:i.state.value})),void 0,!0)])),append:he((()=>[ge(l,{class:"cus-suggest__popover",placement:n.placement,width:n.conWidth,trigger:"click","append-to-body":!0,teleportTo:n.teleportTo,visible:i.state.popoverVisible,"onUpdate:visible":t[1]||(t[1]=e=>i.state.popoverVisible=e)},{reference:he((()=>[ge(s,{class:"cus-suggest__button",onClick:t[0]||(t[0]=e=>i.setRefMan(!0))},{default:he((()=>[ie(e.$slots,"button-text",{},(()=>[Eo]),{})])),_:3})])),default:he((()=>[me("div",Oo,[i.refMan.showed?(q(),_e(r,{key:0,"con-class":"ew-suggest-list-con",column:n.column,suggest:i.getSuggest(),onSelectItem:i.selectSuggest},null,8,["column","suggest","onSelectItem"])):ye("",!0)])])),_:3},8,["placement","width","teleportTo","visible"])])),_:3},16,["modelValue","onBlur","onInput"])],2)},ko.__scopeId="data-v-a7a3e85a";const So={name:"EwSelect",emits:["update:modelValue"],props:{options:{type:Array,default:e=>[]},modelValue:null},data:()=>({value:null}),watch:{modelValue:{handler(e){this.value=e},immediate:!0}},methods:{change(e){this.$emit("update:modelValue",e),this.$emit("change",e)}}},Do={class:"ew-select"};So.render=function(e,t,n,i,a,o){const s=pe("el-option"),r=pe("el-select");return q(),Q("div",Do,[ge(r,se({class:"ew-select__select",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},e.$attrs,{onChange:t[1]||(t[1]=e=>o.change(e))}),{default:he((()=>[(q(!0),Q(ee,null,te(n.options,((e,t)=>(q(),_e(s,{class:"ew-select__option",key:"ew-select__option"+t,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},16,["modelValue"])])};const Ao=fe({name:"ZRadioButtons",props:{modelValue:null,options:Array},emits:["val-change"],watch:{modelValue:{handler(e){this.radio=e},immediate:!0}},data:()=>({radio:""}),methods:{getOptions:e=>e.map((e=>e)),getIconCls:e=>"fa-"+e.icon,onChange(e){this.$emit("change",this.radio),this.$emit("val-change",this.radio)}}}),To={key:1};Ao.render=function(e,t,n,i,a,o){const s=pe("el-tooltip"),r=pe("el-radio-button"),l=pe("el-radio-group");return q(),_e(l,se({modelValue:e.radio,"onUpdate:modelValue":t[0]||(t[0]=t=>e.radio=t)},e.$attrs),{default:he((()=>[(q(!0),Q(ee,null,te(e.getOptions(e.options),(t=>(q(),_e(r,{label:t.value,onChange:e.onChange},{default:he((()=>[ge(s,{effect:"dark",content:t.label,placement:"top-start"},{default:he((()=>[t.icon?(q(),Q("i",{key:0,class:ue(["fa",e.getIconCls(t)])},null,2)):t.label?(q(),Q("span",To,Ie(t.label),1)):ye("",!0)])),_:2},1032,["content"])])),_:2},1032,["label","onChange"])))),256))])),_:1},16,["modelValue"])};let Io=["width","height"],Mo=["color","background-color"],Ro=["text-align","font-family","font-weight","color","font-style"];const Lo={name:"ZStyles",components:r({ZRadioButtons:Ao,ZWindow:v,EwSuggest:ko,EwSelect:So,UnitInput:u},Pe),emits:["props-change","form:input:blur"],props:{value:null,valueConfig:Object,nameConfig:Object},data:()=>({loading:!1}),setup(e,t){let n={editor_step:{type:String},styleObj:{type:null},options:{type:null}},i=new ZY.Lock,a=!0,o=ZY.DOM.getAllPropKeys().filter((e=>!e.startsWith("webkit"))).filter((e=>!Ro.includes(e)));function s(e=[]){if(r&&r.setData){let t=Array.isArray(e)?e:[];r.setData({styleObj:t,options:o.map((e=>({label:e,value:e})))}),setTimeout((()=>{a=!1}),150)}}let r=c({properties:n,computed:{}},{onInited:function({storeControl:n}){a&&s(e.value),t.emit("inited",{initData:s})},extendContext:{}});r=p(r);let{EVENT_NAMES:l,onChange:u}=_(r);function d(){i.lock((()=>{t.emit("props-change",r.store.model.styleObj)}))}function h(e,t){let n=r.store.model.styleObj,i=n.find((t=>t[0]===e));i?i[1]=t:n.push([e,t]),setTimeout((()=>{d()}),0)}function f(e){let t=r.store.model.styleObj.find((t=>t[0]===e));if(t)return t[1]}r.setEventHandler({"add:styleObj"(e){e.push(["",""])}});return Ve((()=>e.value),(e=>{a&&s(e)}),{}),{isLengthProp:function(e){return!!e&&Io.includes(e)},isPropType:function(e,t=""){return"color"===t&&(Mo.includes(e)||e.includes("-color"))},onPropKeyChange:function(e,t){t[1]&&(t[1]="")},filterStatic:function(e=[]){return e.filter((e=>!Ro.includes(e[0])))},filterOptions:function(e){return e},getStyleObjValue:f,removeStyleItem:function(e,t){let n=e.findIndex((e=>e[0]===t[0]));n>-1&&e.splice(n,1),setTimeout((()=>{d()}),0)},EVENT_NAMES:l,onStaticChange:h,onArrLikeStaticChange:function(e,t){h(e,t.join())},onPropValueChange:function(){setTimeout((()=>{d()}),0)},getStyleObjArrLikeValue:function(e){let t=f(e);return t?t.includes(",")?t.split(","):[t]:""},page:r,store:r.store,predefineColors:["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#303133"],fontStyle:{alignOptions:[{label:"left",icon:"align-left",value:"left"},{label:"center",icon:"align-center",value:"center"},{label:"right",icon:"align-right",value:"right"},{label:"justify",icon:"align-justify",value:"justify"}],familyOptions:[{label:"Arial",value:"Arial"},{label:"Helvetica",value:"Helvetica"},{label:"微软雅黑",value:"微软雅黑"},{label:"sans-serif",value:"sans-serif"}],weightOptions:[{label:"lighter 细",value:"lighter"},{label:"normal 正常",value:"normal"},{label:"bold 粗",value:"bold"}],styleOptions:[{label:"normal 正常",value:"normal"},{label:"italic 斜",value:"italic"}]}}}},No={key:0,class:"z-styles"},Vo={class:"a-space-mr-10"},zo=be("字体 "),Po=me("i",{class:"fa fa-book"},null,-1),Uo={class:"a-space-mr-10"},jo=be("粗细 "),Go=me("i",{class:"fa fa-book"},null,-1),Zo={class:"a-space-mr-10"},Fo=be("样式 "),Bo=me("i",{class:"fa fa-book"},null,-1),Yo={class:"a-space-mr-10"},Xo=be("ALIGN "),$o=me("i",{class:"fa fa-book"},null,-1),Wo={class:"a-space-mr-10"},Ho=be("颜色 "),Ko=me("i",{class:"fa fa-book"},null,-1),Jo={title:"其他",class:"a-space-mb-15"},qo=me("i",{class:"fa fa-book"},null,-1),Qo={key:1,class:"a-space-ml-10",style:{display:"flex","align-items":"center"}},es={class:"a-space-ml-10",style:{display:"flex","align-items":"center"}};Lo.render=function(e,t,n,i,a,o){const s=pe("z-window"),r=pe("ew-select"),l=pe("el-row"),u=pe("ZRadioButtons"),d=pe("el-color-picker"),c=pe("el-collapse-item"),p=pe("unit-input"),_=pe("ew-suggest"),h=pe("Delete"),f=pe("el-icon"),m=pe("el-button"),g=pe("Plus"),b=pe("el-collapse");return i.page.inited?(q(),Q("div",No,[i.store.model.styleObj?(q(),_e(b,{key:0,border:!1},{default:he((()=>[ge(c,{title:"文字",class:"a-space-mb-15"},{default:he((()=>[ge(l,{align:"middle",type:"flex",class:"a-space-mb-15"},{default:he((()=>[me("div",Vo,[zo,ge(s,{class:"a-space-ml-5",url:"https://developer.mozilla.org/en-US/docs/Web/CSS/font-family"},{default:he((()=>[Po])),_:1},8,["url"])]),ge(r,{multiple:"",style:{width:"350px"},"model-value":i.getStyleObjArrLikeValue("font-family"),onChange:t[0]||(t[0]=e=>i.onArrLikeStaticChange("font-family",e)),options:i.fontStyle.familyOptions},null,8,["model-value","options"])])),_:1}),ge(l,{align:"middle",type:"flex",class:"a-space-mb-15"},{default:he((()=>[me("div",Uo,[jo,ge(s,{class:"a-space-ml-5",url:"https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight"},{default:he((()=>[Go])),_:1},8,["url"])]),ge(r,{"model-value":i.getStyleObjValue("font-weight"),onChange:t[1]||(t[1]=e=>i.onStaticChange("font-weight",e)),options:i.fontStyle.weightOptions},null,8,["model-value","options"])])),_:1}),ge(l,{align:"middle",type:"flex",class:"a-space-mb-15"},{default:he((()=>[me("div",Zo,[Fo,ge(s,{class:"a-space-ml-5",url:"https://developer.mozilla.org/en-US/docs/Web/CSS/font-style"},{default:he((()=>[Bo])),_:1},8,["url"])]),ge(r,{"model-value":i.getStyleObjValue("font-style"),onChange:t[2]||(t[2]=e=>i.onStaticChange("font-style",e)),options:i.fontStyle.styleOptions},null,8,["model-value","options"])])),_:1}),ge(l,{align:"middle",type:"flex",class:"a-space-mb-15"},{default:he((()=>[me("div",Yo,[Xo,ge(s,{class:"a-space-ml-5",url:"https://developer.mozilla.org/en-US/docs/Web/CSS/text-align"},{default:he((()=>[$o])),_:1},8,["url"])]),ge(u,{size:"small","model-value":i.getStyleObjValue("text-align"),options:i.fontStyle.alignOptions,onChange:t[3]||(t[3]=e=>i.onStaticChange("text-align",e))},null,8,["model-value","options"])])),_:1}),ge(l,{align:"middle",type:"flex",class:"a-space-mb-15"},{default:he((()=>[me("div",Wo,[Ho,ge(s,{class:"a-space-ml-5",url:"https://developer.mozilla.org/en-US/docs/Web/CSS/color"},{default:he((()=>[Ko])),_:1},8,["url"])]),ge(d,{"show-alpha":"","model-value":i.getStyleObjValue("color"),options:i.fontStyle.alignOptions,onChange:t[4]||(t[4]=e=>i.onStaticChange("color",e)),predefine:i.predefineColors},null,8,["model-value","options","predefine"])])),_:1})])),_:1}),me("div",Jo,[me("section",null,[(q(!0),Q(ee,null,te(i.filterStatic(i.store.model.styleObj),((e,t)=>(q(),_e(l,{align:"middle",type:"flex",class:"a-space-mb-10",key:t},{default:he((()=>[ge(r,{size:"small",class:"z-style-select",filterable:"","allow-create":"",options:i.store.model.options,onChange:n=>i.onPropKeyChange(t,e),modelValue:e[0],"onUpdate:modelValue":t=>e[0]=t},null,8,["options","onChange","modelValue","onUpdate:modelValue"]),e[0]?(q(),_e(s,{key:0,class:"a-space-ml-10",url:"https://developer.mozilla.org/en-US/docs/Web/CSS/"+e[0]},{default:he((()=>[qo])),_:2},1032,["url"])):ye("",!0),e[0]?(q(),Q("div",Qo,[i.isLengthProp(e[0])?(q(),_e(p,{key:0,modelValue:e[1],"onUpdate:modelValue":t=>e[1]=t,onChange:i.onPropValueChange},null,8,["modelValue","onUpdate:modelValue","onChange"])):i.isPropType(e[0],"color")?(q(),_e(d,{key:1,modelValue:e[1],"onUpdate:modelValue":t=>e[1]=t,"show-alpha":"",predefine:i.predefineColors,onChange:i.onPropValueChange},null,8,["modelValue","onUpdate:modelValue","predefine","onChange"])):(q(),_e(_,{key:2,size:"small",modelValue:e[1],"onUpdate:modelValue":t=>e[1]=t,"onValue:change":i.onPropValueChange},null,8,["modelValue","onUpdate:modelValue","onValue:change"]))])):ye("",!0),me("div",es,[ge(m,{size:"mini",type:"danger",onClick:t=>i.removeStyleItem(i.store.model.styleObj,e)},{default:he((()=>[ge(f,null,{default:he((()=>[ge(h)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)))),128))]),ge(m,{size:"mini",onClick:t[5]||(t[5]=e=>i.page.callEvent("add:styleObj",i.store.model.styleObj))},{default:he((()=>[ge(f,null,{default:he((()=>[ge(g)])),_:1})])),_:1})])])),_:1})):ye("",!0)])):ye("",!0)};const ts={name:"CusUI",components:{ZEasyModal:w,ZStyleEditor:x,UnitInput:u,ZCellItem:C,ZStyles:Lo,ZProps:k,EwSuggest:ko},mixins:[f],setup(e,t){let n;e.defs;let i=ZY.JSON5,{data:a,methods:o,listeners:s,init:r,widgetConfig2:l,buildGetRef:u}=m(e,t,{handleValueInit(e){if(!e)return e={control:{propsV2:{}},data:{}};if(e)try{if(n=i.parse(e),n.data||(n.data={}),n.control||(n.control={propsV2:{}}),n.data.attrs){let e=[];for(let[t,i]of n.data.attrs)e.push({name:t,value:i});n.control.attrsObj={props:e},n.control.propsV2=Object.fromEntries(n.data.attrs)}else n.control.attrsObj={props:[]};if(n.data.class){let e=[];for(let t of n.data.class)e.push({name:t,value:t});n.control.classObj={props:e}}return n.control.stylesObj="{cached: null, css: ''}",n.data.styles&&(n.control.stylesObj=n.data.styles),n}catch(t){console.log(t)}return{}}}),d=a({value:{}});function c(){let e=i.parse(i.stringify(d.value));Reflect.deleteProperty(e,"control");let t=i.stringify(e);o.on_change(t)}function p(){console.log("onBlur"),c()}r(e);let _=Le({props:{}});return{state:d,widgetConfig:l,onChange:c,methods:o,propsState:_,onAttrsChange:function(e){console.log("onAttrsChange",e.props),d.value.data.attrs=e.props.filter((e=>e.name)).map((e=>[e.name,ZY.defaultStr(e.value,"")]))},onClassChange:function(e){d.value.data.class=e.props.filter((e=>e.value)).map((e=>ZY.defaultStr(e.value,"")))},setPropVal:function(e,t,n){d.value.data.attrs=Object.entries(Te(e)),console.log("setPropVal",e,t,n,d.value.data.attrs),we((()=>{p()}))},onStyleChange2:function(e){d.value.data.styles=e,c()},onStylesChange:function(e){d.value.data.styles=e,c()},onBlur:p,save:function(){c()},listeners:s}}},ns=me("div",{class:"cus-ui__label"},"标题",-1),is=me("div",{class:"cus-ui__label"},"类",-1),as={class:"cus-ui__label"},os=be("属性 "),ss=me("i",{class:"fa fa-book"},null,-1),rs={key:0},ls={class:"cus-ui__label"},us=be("属性 "),ds=me("i",{class:"fa fa-book"},null,-1),cs=me("div",{class:"cus-ui__label"},"样式",-1),ps={class:"cus-ui__style-editor-con"},_s=be("编辑"),hs=me("div",{class:"cus-ui__label"},"样式",-1);ts.render=function(e,t,n,i,a,o){const s=pe("el-input"),r=pe("el-row"),l=pe("ZProps"),u=pe("z-window"),d=pe("el-option"),c=pe("el-select"),p=pe("z-cell-item"),_=pe("unit-input"),h=pe("z-style-editor"),f=pe("z-easy-modal"),m=pe("ZStyles");return e.inited?(q(),Q(ee,{key:0},[ge(r,{class:"a-space-mb-10 cus-ui__item-title"},{default:he((()=>[ns,ge(s,{style:{width:"auto",flex:"1"},modelValue:i.state.value.data.label,"onUpdate:modelValue":t[0]||(t[0]=e=>i.state.value.data.label=e),onBlur:i.onBlur},null,8,["modelValue","onBlur"])])),_:1}),ge(r,{class:"a-space-mb-10 cus-ui__class"},{default:he((()=>[is,ge(l,{style:{flex:"1"},class:"cus-ui__class-props",value:i.state.value.control.classObj,"onUpdate:value":t[1]||(t[1]=e=>i.state.value.control.classObj=e),"onForm:input:blur":i.onBlur,onPropsChange:i.onClassChange},null,8,["value","onForm:input:blur","onPropsChange"])])),_:1}),i.widgetConfig.propsV2?(q(),_e(r,{key:0,class:"a-space-mb-10"},{default:he((()=>[me("div",as,[os,ge(u,{class:"a-space-ml-5",url:"https://element-plus.gitee.io/zh-CN/component/form.html#form-%E6%96%B9%E6%B3%95"},{default:he((()=>[ss])),_:1})]),i.state.value.control.propsV2?(q(),Q("div",rs,[ge(p,{"label-width":"max-content",label:"标题位置(left, top)"},{default:he((()=>[ge(c,{modelValue:i.state.value.control.propsV2["label-position"],"onUpdate:modelValue":t[2]||(t[2]=e=>i.state.value.control.propsV2["label-position"]=e),onChange:t[3]||(t[3]=e=>i.setPropVal(i.state.value.control.propsV2,"label-position",e))},{default:he((()=>[ge(d,{label:"left",value:"left"}),ge(d,{label:"top",value:"top"})])),_:1},8,["modelValue"])])),_:1}),ge(p,{"label-width":"max-content",label:"标题长度"},{default:he((()=>[ge(_,{modelValue:i.state.value.control.propsV2["label-width"],"onUpdate:modelValue":t[4]||(t[4]=e=>i.state.value.control.propsV2["label-width"]=e),"default-unit":"px",onChange:t[5]||(t[5]=e=>i.setPropVal(i.state.value.control.propsV2,"label-width",e))},null,8,["modelValue"])])),_:1})])):ye("",!0)])),_:1})):(q(),_e(r,{key:1,class:"a-space-mb-10"},{default:he((()=>[me("div",ls,[us,ge(u,{class:"a-space-ml-5",url:"https://element-plus.gitee.io/zh-CN/component/form.html#form-%E6%96%B9%E6%B3%95"},{default:he((()=>[ds])),_:1})]),ge(l,{style:{flex:"1"},value:i.state.value.control.attrsObj,"onUpdate:value":t[6]||(t[6]=e=>i.state.value.control.attrsObj=e),"onForm:input:blur":i.onBlur,onPropsChange:i.onAttrsChange},null,8,["value","onForm:input:blur","onPropsChange"])])),_:1})),i.widgetConfig.propsV2?(q(),_e(r,{key:2,class:"a-space-mb-10"},{default:he((()=>[cs,me("div",ps,[ge(f,{title:"样式",modelAttr:{width:"96vw",appendToBody:!0,top:"10vh",modalClass:"el-dialog--no-modal"},"button-attr":{size:"small"}},{"button-content":he((()=>[_s])),default:he((()=>[ge(h,{class:"cus-ui__style-editor",value:i.state.value.control.stylesObj,"onVal:change":i.onStyleChange2},null,8,["value","onVal:change"])])),_:1})])])),_:1})):(q(),_e(r,{key:3,class:"a-space-mb-10"},{default:he((()=>[hs,ge(m,{style:{flex:"1"},value:i.state.value.control.stylesObj,"onForm:input:blur":i.onBlur,onPropsChange:i.onStylesChange},null,8,["value","onForm:input:blur","onPropsChange"])])),_:1}))],64)):ye("",!0)};const fs={name:"ZTooltip",components:{InfoFilled:Ue},props:{tooltip:String},setup(e){var t;return{state:Le({marked:ZY_EXT.marked(null!=(t=e.tooltip)?t:"")})}}},ms=["innerHTML"];fs.render=function(e,t,n,i,a,o){const s=pe("InfoFilled"),r=pe("el-icon"),l=pe("el-popover");return q(),_e(l,se({effect:"dark",placement:"top-start"},e.$attrs,{trigger:"hover"}),{reference:he((()=>[ge(r,null,{default:he((()=>[ge(s)])),_:1})])),default:he((()=>[me("div",{innerHTML:i.state.marked},null,8,ms)])),_:1},16)};const gs={name:"ZHttpCom",components:{ZWindow:v,ZTooltip:fs,HttpComponent:E},emits:["http:model:change","form:input:blur"],props:{value:null,resolveConfig:Function,debug:Boolean},data:()=>({loading:!1}),setup(e,t){let n=!0,i={},a={editor_step:{type:String},cached:{type:null},refreshed:{type:Boolean}};let o=c({properties:a,computed:{}},{onInited:function({storeControl:e}){},extendContext:{}});o=p(o);let{EVENT_NAMES:s,onChange:r}=_(o);function l(e,t){let n=new Function(e[0],e[1]),{parts:a,partName:o,pathArr:s}=t;return n({pathArr:s,getData:function(e){return a[o].getModelByPathArr(e)},model:i})}r(((e,n)=>{let{parts:i,partName:a,selfpath:o,process:s}=n,r=i[a].getModel(),l=Te(r);t.emit("update:value",l),t.emit("change",l)})),o.setEventHandler({"model:update:all"(e){i=Te(e.model),o.setByPath("cached",i),o.setByPath("refreshed",!1),setTimeout((()=>{o.setByPath("refreshed",!0)}),300),n||t.emit("http:model:change",e)},"cmfield:blur"(e){t.emit("form:input:blur",e)},"cus:com:fire"(e){let n=e.scope.name;t.emit(n,e.originEvent)}}),Ne((function(){try{let t=async function(){let t=await e.resolveConfig(e);return{default:ZY.JSON5.parse(ZY.JSON5.stringify(t.default))}}();o.commonLoadStep(t,"editor_step",{async onMounted(t,{setPartModel:i}){!function(e){e.init.def.parts[0].def}(t);e.value&&i(t.name,"form2",e.value),n=!1}})}catch(t){console.error(t)}}));let u=null;return{EVENT_NAMES:s,getZWindowUrl:l,getNoticeFunRef:function(e){return function(t){u=t,u&&(u.address=l(e.config.noticeFun,e))}},PATH_FORM_ARR:function(e=[]){return ZY.getObjPathFromPathArr(e)},page:o,cachedModel:i,store:o.store}}},bs={key:0,class:"z-http-com"},ys=me("i",{class:"fa fa-book"},null,-1),vs=me("i",{class:"fa fa-book"},null,-1);function ws(e={},t={},n={}){return st({defaultVal:{form2:r({},n)},computed:t,def:e})}if(gs.render=function(e,t,n,i,a,o){const s=pe("z-window"),r=pe("z-tooltip"),l=pe("el-button"),u=pe("HttpComponent");return i.page.inited?(q(),Q("div",bs,[ge(u,{defs:i.page.defMap,is:i.store.model.editor_step,debug:n.debug},{object_beforebegin:he((t=>{var n;return[me("div",null,[me("h3",null,Ie(null!=(n=t.label)?n:i.PATH_FORM_ARR(t.pathArr)),1),ie(e.$slots,"z_http_com-object_beforebegin",ae(oe({scope:t,page:i.page})))])]})),prop_afterbegin:he((t=>[ie(e.$slots,"prop_afterbegin",ae(oe({cached:i.store.model.cached,scope:t})))])),prop_label_beforeend:he((t=>[t.config?(q(),Q(ee,{key:0},[t.config.noticeIframe?(q(),_e(s,{key:0,target:t.config.noticeTarget,url:t.config.noticeIframe},{default:he((()=>[ys])),_:2},1032,["target","url"])):ye("",!0),ie(e.$slots,"prop_label_beforeend",ae(oe({cached:i.store.model.cached,scope:t}))),t.config.noticeFun?(q(),_e(s,{key:1,ref:i.getNoticeFunRef(t)},{default:he((()=>[vs])),_:2},1536)):ye("",!0),t.config.ui&&t.config.ui.notice?(q(),_e(r,{key:2,trigger:"click",tooltip:t.config.ui?t.config.ui.notice:""},null,8,["tooltip"])):ye("",!0)],64)):ye("",!0)])),array_con_afterbegin:he((e=>[])),array_beforebegin:he((e=>[me("div",null,[me("h3",null,Ie(e.label),1),ge(l,{type:"primary",size:"small",onClick:t=>i.page.callEvent(i.EVENT_NAMES.ARR_APPEND_COMMON,e)},{default:he((()=>[be("添加"+Ie(e.label),1)])),_:2},1032,["onClick"])])])),array_afterbegin:he((e=>[])),array_con_beforeend:he((e=>[me("div",null,[ge(l,{type:"danger",size:"small",onClick:t=>i.page.callEvent(i.EVENT_NAMES.ARR_REMOVE_COMMON,e)},{default:he((()=>[be("删除"+Ie(e.label),1)])),_:2},1032,["onClick"])])])),_:3},8,["defs","is","debug"])])):ye("",!0)},!window.loadedWangEditorCSS){let e=document.createElement("link");e.rel="stylesheet",e.href="/wangEditor.css",document.body.append(e),window.loadedWangEditorCSS=!0}const xs={name:"CusWidgetEditor",components:{ZWindow:v,ZRadioButtons:Ao,ZHttpCom:gs,EwSuggest:ko},mixins:[f],setup(e,t){let n,i=Me().ctx;e.defs;let a=ZY.JSON5,o=[],s=[],u={},d=!0,[c,p]=y({timeout:500}),{data:_,methods:h,listeners:f,init:g,onJSONChange:b}=m(e,t,{handleValueInit(e){if(!e)return e={control:{},data:{}};if(e)try{return n=a.parse(e),n.control||(n.control={}),n.data.widget&&(n.control.widget=n.data.widget),n}catch(t){console.error(t)}return{}}}),v=_({value:{},currentComponent:null,suggest:[],inited:!1});function w(){if(v.currentComponent){let e=v.currentComponent.CUS_EDITOR();return Te(e.props)}return null}function x(){var e,t;let n=a.parse(a.stringify(v.value));Reflect.deleteProperty(n,"control");let i={};ZY.lodash.each(n.data,(function(e,t){t.startsWith("common_")&&(i[t]=e)}));let o=null!=(t=null==(e=null==n?void 0:n.data)?void 0:e.widgetConfig)?t:{};n.data.widgetConfig=Object.assign(o,i);let s=w();if(Array.isArray(s)){let e=Object.keys(s),t=ZY.lodash.pick(n.data.widgetConfig,e);t=ZY.lodash.pickBy(t,(function(e){return"string"!=typeof e||e})),n.data.widgetConfig=Object.assign(n.data.widgetConfig,t)}let r=a.stringify(n);h.on_change(r)}function C(e){o[e]&&(d=!0,v.currentComponent=o[e],p())}g(e);const k={onReady(){o=CustomVueComponent.components;let t=[];t=t.concat(Object.entries(o).filter((([e,t])=>t.CUS_EDITOR))),s=t.map((e=>{let t=e[0];return e[1]&&e[1].CUS_TITLE&&(t=e[1].CUS_TITLE),{label:t,value:e[0],labelTip:"CUS_EDITOR"}}));let n=ZY.lodash.get(e,"ui.widgetConfig.enums","");n&&(v.suggest=s.concat(i.dxValueTemplate(n))),v.inited=!0,setTimeout((()=>{C(v.value.data.widget)}),100)}};let E=[{prop:"label",width:"250px",render(e,t){const n=t.scope,i=function(e=""){let t=ZY.lodash.kebabCase(e.replace("Cus",""));return"date-time-picker"===t&&(t="date-picker"),t}(n.row.value);let a=pe("el-tooltip"),o=pe("z-window"),s=e("span",{},n.row.label),r=e("i",{class:"el-icon-info a-space-ml-10"}),l=e(o,{url:`https://element-plus.gitee.io/zh-CN/component/${i}.html`,type:"primary",class:"a-space-ml-10",target:"_blank"},"文档"),u=e(a,{content:i,placement:"right"},[l,r]);return e("div",{},[s,u])}}];let O=je(null);return{state:v,widgetConfig:e.ui.widgetConfig,lifeTimes:k,methods:h,resolveConfig:async function(){let e=w(),t=function(){if(v.currentComponent){let e=v.currentComponent.CUS_EDITOR();return Te(e.computed)}return{}}();u={};for(let[n,i]of Object.entries(e))i&&(i.type===Number||i===Number?u[n]=l(r({},i),{type:"number",rules:{type:"number"}}):i.type===String||i===String?u[n]=l(r({},i),{type:"string"}):i.type===Boolean||i===Boolean?u[n]=l(r({},i),{type:"boolean",rules:{type:"boolean"}}):u[n]=r({},i),i.rules&&(u[n].rules=Object.assign(u[n].rules,i.rules)));return{default:ws({type:"object",ui:{attrs:[["label-width","120px"]]},properties:u},t)}},onModelChange:function(e){if(d){if(d=!1,v.value.data.widgetConfig)for(let t in v.value.data.widgetConfig)e.model[t]=v.value.data.widgetConfig[t]}else{let t=ZY.JSON5.parse(ZY.JSON5.stringify(e.model)),n={};ZY.lodash.each(t,((e,t)=>{t.endsWith("able")?null!==e&&(n[t]=e):""!==e&&(n[t]=e)})),Array.isArray(t.props)&&t.props.length<1&&Reflect.deleteProperty(t,"props"),v.value.data.widgetConfig=n,x()}},onCommonChange:function(){x()},onWidgetChange:function(){v.value.data.widget=v.value.control.widget,setTimeout((()=>{C(v.value.control.widget);for(let e in v.value.data.widgetConfig)Reflect.deleteProperty(v.value.data.widgetConfig,e);x()}),30)},commonOptions:[{label:"普通",value:""},{label:"只读",value:"readonly"},{label:"禁用",value:"disabled"},{label:"隐藏",value:"hidden"}],openPopover:function(e){O.openPopver()},getSuggestRef:function(e){O=e},getUrl:function(e){return getApp().get_elememt_doc_url(e)},refMan:c,onBlur:function(){x()},column:E,save:function(){x()},listeners:f}}},Cs={key:0},ks=me("div",{class:"a-space-mr-10"},"描述",-1),Es=me("div",{class:"a-space-mr-10"},"状态",-1),Os={class:"a-space-mb-15"},Ss=be(" 选择组件 "),Ds=me("i",{class:"fa fa-book"},null,-1),As={key:0};xs.render=function(e,t,n,i,a,o){const s=pe("el-input"),r=pe("el-row"),l=pe("ZRadioButtons"),u=pe("z-window"),d=pe("ew-suggest"),c=pe("z-http-com");return e.inited?(q(),Q(ee,{key:0},[i.state.inited&&i.state.value&&i.state.value.control?(q(),Q("div",Cs,[ge(r,{align:"middle",type:"flex",class:"a-space-mb-15"},{default:he((()=>[ks,ge(s,{type:"textarea",modelValue:i.state.value.data.common_desc,"onUpdate:modelValue":t[0]||(t[0]=e=>i.state.value.data.common_desc=e),onChange:i.onCommonChange,style:{width:"350px"}},null,8,["modelValue","onChange"])])),_:1}),ge(r,{align:"middle",type:"flex",class:"a-space-mb-15"},{default:he((()=>[Es,ge(l,{size:"small",options:i.commonOptions,modelValue:i.state.value.data.common_state,"onUpdate:modelValue":t[1]||(t[1]=e=>i.state.value.data.common_state=e),onChange:i.onCommonChange},null,8,["options","modelValue","onChange"])])),_:1}),me("div",Os,[ge(d,{modelValue:i.state.value.control.widget,"onUpdate:modelValue":t[2]||(t[2]=e=>i.state.value.control.widget=e),placement:"top",suggest:i.state.suggest,"con-width":570,column:i.column,"no-input":!0,"use-prepend":!0,ref:i.getSuggestRef,"onValue:change":i.onWidgetChange},{"button-text":he((()=>[Ss])),prepend:he((e=>[e.value?(q(),_e(r,{key:0,style:{"flex-wrap":"nowrap"}},{default:he((()=>[me("div",null,Ie(e.value),1),ge(u,{class:"a-space-ml-5",url:i.getUrl(e.value)},{default:he((()=>[Ds])),_:2},1032,["url"])])),_:2},1024)):(q(),Q(ee,{key:1},[],64))])),_:1},8,["modelValue","suggest","column","onValue:change"])]),i.state.currentComponent&&i.refMan.showed?(q(),Q("div",As,[ge(c,{"resolve-config":i.resolveConfig,"onHttp:model:change":i.onModelChange},null,8,["resolve-config","onHttp:model:change"])])):ye("",!0)])):ye("",!0)],64)):ye("",!0)};const Ts={name:"CusFormRules",components:{EwSuggest:ko},mixins:[f],setup(e,t){let n;e.defs;let i=ZY.JSON5,{data:a,methods:o,listeners:s,init:r}=m(e,t,{handleValueInit(e){if(e||(e={}),e)try{return n=i.parse(e),n}catch(t){}return{}}}),l=a({value:{}});r(e);let u=["string","number","boolean","method","regexp","integer","float","date","url","hex","email","any"].map((e=>({label:e,value:e})));return{state:l,widgetConfig:e.ui.widgetConfig,onChange:function(){let e=i.stringify(l.value);o.on_change(e)},methods:o,typeSuggest:u,listeners:s}}};Ts.render=function(e,t,n,i,a,o){const s=pe("ew-suggest"),r=pe("z-cell-item"),l=pe("el-input"),u=pe("el-switch"),d=pe("el-input-number");return e.inited?(q(),Q(ee,{key:0},[ge(r,{vertical:null,label:"类型"},{default:he((()=>[ge(s,{modelValue:i.state.value.type,"onUpdate:modelValue":t[0]||(t[0]=e=>i.state.value.type=e),"onValue:change":i.onChange,suggest:i.typeSuggest},null,8,["modelValue","onValue:change","suggest"])])),_:1}),ge(r,{vertical:null,label:"消息"},{default:he((()=>[ge(l,{modelValue:i.state.value.message,"onUpdate:modelValue":t[1]||(t[1]=e=>i.state.value.message=e),clearable:"",onChange:i.onChange},null,8,["modelValue","onChange"])])),_:1}),ge(r,{vertical:null,label:"是否必填"},{default:he((()=>[ge(u,{modelValue:i.state.value.required,"onUpdate:modelValue":t[2]||(t[2]=e=>i.state.value.required=e),onChange:i.onChange,"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue","onChange"])])),_:1}),ge(r,{vertical:null,label:"pattern"},{default:he((()=>[ge(l,{modelValue:i.state.value.pattern,"onUpdate:modelValue":t[3]||(t[3]=e=>i.state.value.pattern=e),clearable:"",onChange:i.onChange},null,8,["modelValue","onChange"])])),_:1}),ge(r,{vertical:null,label:"max"},{default:he((()=>[ge(d,{modelValue:i.state.value.max,"onUpdate:modelValue":t[4]||(t[4]=e=>i.state.value.max=e),onChange:i.onChange},null,8,["modelValue","onChange"])])),_:1}),ge(r,{vertical:null,label:"min"},{default:he((()=>[ge(d,{modelValue:i.state.value.min,"onUpdate:modelValue":t[5]||(t[5]=e=>i.state.value.min=e),onChange:i.onChange},null,8,["modelValue","onChange"])])),_:1})],64)):ye("",!0)};const Is={name:"CusComEvents",components:{EwSuggest:ko},mixins:[f],setup(e,t){let n;e.defs;let i=ZY.JSON5,{data:a,methods:o,listeners:s,init:r,widgetConfig2:l}=m(e,t,{handleValueInit(e){if(e||(e={}),e)try{return n=i.parse(e),n}catch(t){}return{}}}),u=a({value:{}});r(e);let d=["click","change","input"].map((e=>({label:e,value:e})));return{state:u,widgetConfig:l,onChange:function(){let e=i.stringify(u.value);o.on_change(e)},methods:o,typeSuggest:d,listeners:s}}};Is.render=function(e,t,n,i,a,o){const s=pe("ew-suggest"),r=pe("z-cell-item"),l=pe("el-input");return e.inited?(q(),Q(ee,{key:0},[ge(r,{label:"类型"},{default:he((()=>[ge(s,{modelValue:i.state.value.type,"onUpdate:modelValue":t[0]||(t[0]=e=>i.state.value.type=e),"onValue:change":i.onChange,suggest:i.typeSuggest},null,8,["modelValue","onValue:change","suggest"])])),_:1}),ge(r,{label:"名称"},{default:he((()=>[ge(l,{modelValue:i.state.value.eventName,"onUpdate:modelValue":t[1]||(t[1]=e=>i.state.value.eventName=e),clearable:"",onChange:i.onChange},null,8,["modelValue","onChange"])])),_:1})],64)):ye("",!0)};const Ms={name:"ZEasyModal",emits:["opened"],props:{title:{type:String,default:"打开"}},data:()=>({opened:!1}),methods:{openModal(){this.opened=!this.opened,this.opened&&this.$emit("opened")},getStyle(){return this.opened?{height:"auto"}:{}}}},Rs={class:"z-easy-modal"};Ms.render=function(e,t,n,i,a,o){const s=pe("el-button");return q(),Q("section",Rs,[ge(s,{onClick:o.openModal},{default:he((()=>[be(Ie(n.title),1)])),_:1},8,["onClick"]),me("div",{class:"z-easy-modal__content",style:ne(o.getStyle())},[ie(e.$slots,"default")],4)])};async function Ls(e="",t=(()=>{})){let n=await ZY_EXT.store.getItem(e);Array.isArray(n)||(n=[]),n=await t(n),await ZY_EXT.store.setItem(e,n)}const Ns={name:"CusJsxEditor",components:{ZEasyModal:Ms,EwXmlShower:co,ZLayoutEditor:cn},mixins:[f],setup(e,t){var n,i;let a;e.defs;let o=ZY.JSON5,s=ZY.rid(6);!async function(){await Ls("jsx-store-prefix",(e=>(e.forEach((e=>{kt(e)})),[])))}();let{data:r,methods:l,listeners:u,init:d}=m(e,t,{handleValueInit:e=>(e||(e="{data: {links: [], deps: []}, posMap: {}}"),e&&(a=o.parse(e)),e)}),c=r({dialogVisible:!1,previewVisible:!1});d(e);let p=null;let _=null;async function h(){let e=_.getToolsData();await _.saveCache2Storage(e);let t=o.stringify(e);l.on_change(t)}function f(e){return uo.js(getApp().buildJSX(e))}ze((()=>{_&&_.clearLayoutStorage()}));let g=ot({properties:{tagName:{type:"string",ui:{label:"标签名"}},editText:{type:"string",ui:{label:"文字",widgetConfig:{type:"textarea"}},computedProp:"text"},ui2:{type:"string",ui:{label:"样式配置",widget:"CusStyle"}},styles:{type:"string",computedProp:"ui2_styles",ui:{styles:[["height",0],["overflow","hidden"]],widgetConfig:{type:"textarea",disabled:!0}},rules:{type:"any"}},attrs:{type:"array",ui:{label:"属性"},items:{type:"object",properties:{name:{type:"string",ui:{widget:"CusSuggest",widgetConfig:{placement:"top"}}},value:{type:"string",ui:{}}}}},textContent:{type:"string",ui:{attrs:[],label:"text",widgetConfig:{type:"textarea",rows:1,disabled:!0}},computedProp:"computedEditText"}},computed:{ui2_styles:"A.get_ui2_styles(MODEL('ui2'))",computedEditText:"MODEL('editText', '')"}},{form2:{}});return{state:c,getXML:function(){_.getXML()},openDialog:async function(){c.dialogVisible=!0,await Ls("jsx-store-prefix",(e=>e.concat([s])))},onPlumbInited:async function({context:e}){await e.importToolsData(a),await ZY.sleep(300),await e.saveCache2Storage(a)},onEleDragChange:function(){},onClosed:async function(){await h()},onSaveLayout:function(e){console.log("onSaveLayout",e)},storePrefix:s,save:h,setLayoutRef:function(e,t){_=e},onDisplayOpened:function(){setTimeout((()=>{p.setModel(f(c.value))}),150)},setEditorRef:function(e,t){p=e},editorContent:g,toggleVisible:function(){c.previewVisible?c.previewVisible=!1:(c.previewVisible=!0,setTimeout((()=>{p.setModel(f(c.value))}),150))},onPlumbUpdate:function(e){let t=_.getToolsData(),n=o.stringify(t);c.value=n},getXMLDisplay:f,widgetConfig:null!=(i=null==(n=null==e?void 0:e.ui)?void 0:n.widgetConfig)?i:{},methods:l,listeners:u}}},Vs={class:"g-pointer-events-none-modal cus-jsx-editor"},zs=be("打开编辑"),Ps=be("JSX预览"),Us=["mode"],js=be("保存");Ns.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("EwXmlShower"),l=pe("el-popover"),u=pe("el-row"),d=pe("ZLayoutEditor"),c=pe("el-dialog");return q(),Q("div",Vs,[e.inited?(q(),Q(ee,{key:0},[ge(u,{type:"flex",align:"top"},{default:he((()=>[ge(s,{size:"small",onClick:i.openDialog},{default:he((()=>[zs])),_:1},8,["onClick"]),ge(l,{visible:i.state.previewVisible,"onUpdate:visible":t[0]||(t[0]=e=>i.state.previewVisible=e),placement:"bottom",title:"",width:600,trigger:"click"},{reference:he((()=>[ge(s,{size:"small",onClick:i.toggleVisible},{default:he((()=>[Ps])),_:1},8,["onClick"])])),default:he((()=>[ge(r,{value:i.getXMLDisplay(i.state.value)},null,8,["value"])])),_:1},8,["visible"])])),_:1}),ge(c,{modelValue:i.state.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>i.state.dialogVisible=e),title:"JSX编辑",width:"80vw","close-on-click-modal":!1,onClosed:i.onClosed,"append-to-body":"","lock-scroll":!1},{default:he((()=>[me("div",{mode:i.widgetConfig.mode},[ge(u,{class:"a-space-mb-10"},{default:he((()=>[ge(s,{type:"primary",onClick:i.save},{default:he((()=>[js])),_:1},8,["onClick"])])),_:1}),me("div",null,[ge(r,{value:i.getXMLDisplay(i.state.value)},null,8,["value"])]),ge(d,{ref:i.setLayoutRef,controls:!1,onEleDragChange:i.onEleDragChange,"store-prefix":i.storePrefix,"auto-load":!1,onPlumbInited:i.onPlumbInited,"onMode:update:all":i.onPlumbUpdate,onSaveLayout:i.onSaveLayout,"drawer-width":"750px","editor-content":i.editorContent,debug:!1},null,8,["onEleDragChange","store-prefix","onPlumbInited","onMode:update:all","onSaveLayout","editor-content"])],8,Us)])),_:1},8,["modelValue","onClosed"])],64)):ye("",!0)])};let Gs=[];Gs=Gs.concat(Gs.map((e=>e.toUpperCase())));const Zs={name:"CusComputed",components:{HttpComponent:E},mixins:[f],props:{},setup(e,t){let n=Me(),i=e.path_arr.slice(0,e.path_arr.length-1),a=ZY.getObjPathFromPathArr(i);e.ui.widgetConfig;let o=!0,s=null,{methods:r,init:l,data:u,widgetConfig2:d}=m(e,t,{handleValueInit(e){if(void 0!==e)try{s=ZY.JSON5.parse(e)}catch(t){console.error(new Error("json parse err",{cause:t}))}return e}});u({});let h={editor_step:{type:String},json:{type:String},dialog_open:{type:Boolean},loaded:{type:Boolean}},f="cus_form_dialog_"+ZY.rid(6);let g=c({properties:h,computed:{}},{onInited:function({storeControl:e}){g.setByPath("dialog_open",!0)},extendContext:{}});g=p(g);let{EVENT_NAMES:b}=_(g);g.setEventHandler({async"model:update:all"(e){let{model:t,key:n,newVal:i,config:a}=e;if(!o){let e=ZY.JSON5.stringify(t);g.setData({json:e}),await we(),r.on_change(e)}}});let y=null,v={};Ne((function(){let t=n.ctx.dxValueTemplate(`MODEL('${a}')`),i={};try{i=ZY.JSON5.parse(t.properties)}catch(r){console.error(r)}g.commonLoadStep(async function(){let e=[];return i.properties&&(e=Object.keys(i.properties)),{default:function({insText:e=[],insFun:t=[],insVars:n=[]}={}){let i={type:"object",ui:{attrs:[["label-width","100px"]]},properties:{parts:{type:"array",ui:{label:"部分"},items:{type:"object",properties:{name:{type:"string",ui:{label:"NAME"}},value:{type:"string",ui:{label:"值",widget:"CusInsert",widgetConfig:{insText:[...e],insFun:["MODEL",...t],insVars:[...n]}}}}}}}};return st({defaultVal:{form2:{name:ZY.nid(),computed:"{}",parts:[]}},computed:{},def:i})}({insFun:["ROOT_STATE"],insVars:e})}}(),"editor_step",{async onMounted(t,{setPartModel:n}){v=t,l(e),y=function(){s&&n(t.name,"form2",s)},o&&(o=!1,y())}})}));let w=!0;return e.ui.widgetConfig.hasOwnProperty("useDrag")&&(w=e.ui.widgetConfig.useDrag),{dialogName:f,widgetConfig:d,page:g,EVENT_NAMES:b,openDialog:function(){let e=globalThis.getCurrentPage("page.webComponentRef");e&&e.toggleDialog&&e.toggleDialog(f),o||y(),g.setByPath("dialog_open",!0)},getArrItemBeforeKey:function(e){let t={config:v.init.def},n=ZY.lodash.get(t,e.configPath);return ZY.getStrFromObj(n,"ui.label",e.key)},useDrag:w,onClosed:function(){console.log("onClosed")},store:g.store}}},Fs={hidden:""},Bs=be("添加"),Ys=be("删除");Zs.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("el-popconfirm"),l=pe("HttpComponent");return i.page.inited?(q(),Q("div",{key:0,class:"cus-form",style:ne(i.widgetConfig.style)},[me("div",Fs,Ie(i.store.model),1),!i.useDrag||i.store.model.dialog_open?(q(),_e(l,{key:0,defs:i.page.defMap,is:i.store.model.editor_step},{array_con_afterbegin:he((e=>[])),array_afterbegin:he((e=>[ge(s,{type:"primary",size:"small",onClick:t=>i.page.callEvent(i.EVENT_NAMES.ARR_APPEND_COMMON,e)},{default:he((()=>[Bs])),_:2},1032,["onClick"])])),array_con_beforeend:he((e=>[ge(r,{title:"确定删除吗？",onConfirm:t=>i.page.callEvent(i.EVENT_NAMES.ARR_REMOVE_COMMON,e)},{reference:he((()=>[ge(s,{type:"danger",size:"small"},{default:he((()=>[Ys])),_:1})])),_:2},1032,["onConfirm"])])),_:1},8,["defs","is"])):ye("",!0)],4)):ye("",!0)};var Xs;class $s extends(O()){constructor(){super()}}s($s,"symbol"!=typeof(Xs="STORAGE_KEY")?Xs+"":Xs,"form-options-key");const Ws={name:"ZOptionsManager",components:{ZCellItem:C,ZEasyModal:w,draggable:It,Plus:De,Rank:Ge,Remove:Se},setup(e,t){let n=Le({options:[]});async function i(){await $s.init(),await ZY.sleep(30);let e=$s.getOptions().map((e=>{e.id=ZY.rid();try{e.arr=ZY.JSON5.parse(e.value)}catch(t){e.arr=[]}return e}));n.options=e}Ne((()=>{}));let a=null;async function o(){$s.clear(),await $s.setStorage(r())}function s(e,t){let n=e.findIndex((e=>e.id===t));n>-1&&e.splice(n,1)}function r(){return Te(n.options.map((e=>(e.value=ZY.JSON5.stringify(e.arr),e))))}return{appendOption:function(e){e.arr.push({id:ZY.rid(),name:ZY.rid(),data:{label:"",value:""}})},selectOption:function(e){console.log(e),t.emit("select-item",Te(e)),a.hide()},save:o,appendGroup:function(){n.options.push({id:ZY.rid(),name:"",arr:[]}),we((()=>{setTimeout((()=>{o()}),30)}))},deleteGroup:function(e,t){s(e,t),we((()=>{setTimeout((()=>{o()}),30)}))},loadFile:async function(){await $s.loadFile(),await i()},deleteItem:s,exportFile:async function(){await $s.saveCache2File(r())},filterOptions:function(e=[]){let t=n.search;return t?e.filter((e=>!e.name||e.name.includes(t))):e},state:n,onOpened:function(e){i(),a=e}}}},Hs=be("枚举值管理"),Ks={class:"z-opt-man-group"},Js=be("加载"),qs=be("保存"),Qs=be("导出到本地"),er=me("div",null,"过滤name",-1),tr={class:"z-opt-man-item a-space-mb-10"},nr={class:"drag-handle"},ir={class:"z-opt-man-item__actions"},ar=be(" 选择 "),or={class:"z-opt-man-group__actions"};Ws.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("el-input"),l=pe("el-space"),u=pe("el-row"),d=pe("z-cell-item"),c=pe("el-col"),p=pe("Rank"),_=pe("el-icon"),h=pe("Remove"),f=pe("el-popconfirm"),m=pe("draggable"),g=pe("Plus"),b=pe("el-scrollbar"),y=pe("z-easy-modal");return q(),_e(y,{title:"枚举值管理",onOpened:i.onOpened,"model-attr":{appendToBody:!0}},{"button-content":he((()=>[Hs])),default:he((()=>[me("div",Ks,[ge(u,{align:"middle",class:"z-opt-man-group__header a-space-mb-10"},{default:he((()=>[ge(s,{size:"small",type:"primary",onClick:i.loadFile},{default:he((()=>[Js])),_:1},8,["onClick"]),ge(s,{size:"small",type:"primary",onClick:i.save},{default:he((()=>[qs])),_:1},8,["onClick"]),ge(s,{size:"small",type:"primary",onClick:i.exportFile},{default:he((()=>[Qs])),_:1},8,["onClick"]),ge(l,{class:"a-space-ml-10"},{default:he((()=>[er,ge(r,{modelValue:i.state.search,"onUpdate:modelValue":t[0]||(t[0]=e=>i.state.search=e)},null,8,["modelValue"])])),_:1})])),_:1}),ge(b,{height:"50vh",class:"a-space-mb-10"},{default:he((()=>[(q(!0),Q(ee,null,te(i.filterOptions(i.state.options),(e=>(q(),Q("div",tr,[ge(u,{class:"z-opt-man-item__label a-space-mb-10"},{default:he((()=>[ge(d,{label:"name"},{default:he((()=>[ge(r,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),ge(m,{class:"z-opt-man-item__options",modelValue:e.arr,"onUpdate:modelValue":t=>e.arr=t,"item-key":"id",tag:"el-row",style:{"align-items":"flex-start","flex-wrap":"wrap"},handle:".drag-handle"},{item:he((({element:t})=>[ge(c,{class:"list-group-item z-opt-man-item__option a-space-mb-10",span:24},{default:he((()=>[ge(u,{gutter:20,align:"middle"},{default:he((()=>[ge(c,{span:10},{default:he((()=>[ge(r,{modelValue:t.data.label,"onUpdate:modelValue":e=>t.data.label=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),ge(c,{span:10},{default:he((()=>[ge(r,{modelValue:t.data.value,"onUpdate:modelValue":e=>t.data.value=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),ge(c,{span:4},{default:he((()=>[ge(l,null,{default:he((()=>[me("div",nr,[ge(_,{size:"30"},{default:he((()=>[ge(p)])),_:1})]),ge(f,{title:"确定删除吗？",onConfirm:n=>i.deleteItem(e.arr,t.id)},{reference:he((()=>[ge(s,{type:"danger",size:"small"},{default:he((()=>[ge(_,null,{default:he((()=>[ge(h)])),_:1})])),_:1})])),_:2},1032,["onConfirm"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"]),me("div",ir,[ge(s,{size:"small",onClick:t=>i.appendOption(e)},{default:he((()=>[ge(_,null,{default:he((()=>[ge(g)])),_:1})])),_:2},1032,["onClick"]),ge(s,{size:"small",onClick:t=>i.selectOption(e)},{default:he((()=>[ar])),_:2},1032,["onClick"]),ge(f,{title:"确定删除吗？",onConfirm:t=>i.deleteGroup(i.state.options,e.id)},{reference:he((()=>[ge(s,{type:"danger",size:"small"},{default:he((()=>[ge(_,null,{default:he((()=>[ge(h)])),_:1})])),_:1})])),_:2},1032,["onConfirm"])])])))),256))])),_:1}),me("div",or,[ge(s,{size:"small",onClick:t[1]||(t[1]=e=>i.appendGroup())},{default:he((()=>[ge(_,null,{default:he((()=>[ge(g)])),_:1})])),_:1})])])])),_:1},8,["onOpened"])};const sr={name:"CusOptManager",components:{SimpleList:b,ZCellItem:C,ZOptionsManager:Ws},mixins:[f],setup(e,t){let n,i=Ze("curFormCon"),a=ZY.JSON5,{data:o,methods:s,listeners:r,init:l,widgetConfig2:u}=m(e,t,{handleValueInit(e,t){if(e)try{n=a.parse(e),d.control=n,d.value=n}catch(i){}else d.control=[],d.value=[];return d.checked=new Map,{}}}),d=o({value:[],checked:new Map,control:[]});function c(){let e=a.parse(a.stringify(d.control)),t=a.stringify(e);s.on_change(t)}function p(e){let t=ZY.JSON5.parse(e);d.control=t.map((e=>e.data)),setTimeout((()=>{c()}),30)}Ne((()=>{setTimeout((()=>{u.mounted&&l(e)}),30)}));let _=[{label:"标题",prop:"label"},{label:"值",prop:"value"}],h=!0;u.multi&&(_.unshift({label:"选择",width:"60px",prop:"LAY_CHECKED",render(e,t){const n=t.scope;let a=CustomVueComponent.resolve("ElCheckbox"),o=n.row.LAY_CHECKED;return n.row.value,d.checked.set(Te(n.row),o),e(a,{checked:o,onChange(e){d.checked.set(Te(n.row),e),n.row.LAY_CHECKED=e;const t=[...d.checked].filter((([e,t])=>t)).map((e=>e[0]));i.callPageEvent("cus:com:fire",{name:"select-checked"},{origin:{options:t}}),c()}})}}),h=!1);return{state:d,widgetConfig:u,onChange:c,methods:s,column:_,actionProps:{width:"0px"},onSelect:function(e){p(e.value)},onSelectList:function(e){i.callPageEvent("cus:com:fire",{name:"select-list"},{origin:e})},showAction:h,onStylesChange:p,save:function(){c()},listeners:r}}},rr={class:"a-space-mb-10"},lr={class:"a-space-mb-10"};sr.render=function(e,t,n,i,a,o){const s=pe("simple-list"),r=pe("z-options-manager");return e.inited?(q(),Q(ee,{key:0},[i.state.control?(q(),Q(ee,{key:0},[me("div",rr,[ge(s,{onSelect:i.onSelectList,actionProps:i.actionProps,"show-acion":i.showAction,column:i.column,suggest:i.state.control},null,8,["onSelect","actionProps","show-acion","column","suggest"])]),me("section",lr,[ge(r,{onSelectItem:i.onSelect},null,8,["onSelectItem"])])],64)):ye("",!0)],64)):ye("",!0)};let ur=["width","height"],dr=["color","background-color"],cr=[];const pr={name:"ZAttrs",components:r({ZWindow:v,EwSuggest:ko,EwSelect:So,UnitInput:u},Pe),emits:["props-change","form:input:blur"],props:{value:null,valueConfig:Object,nameConfig:Object},data:()=>({loading:!1}),setup(e,t){let n={editor_step:{type:String},styleObj:{type:null},options:{type:null}},i=new ZY.Lock,a=!0;function o(e=[]){if(s&&s.setData){let t=Array.isArray(e)?e:[];s.setData({styleObj:t,options:[{label:"ai",value:"ai"}]}),setTimeout((()=>{a=!1}),150)}}ZY.DOM.getAllPropKeys().filter((e=>!e.startsWith("webkit"))).filter((e=>!cr.includes(e)));let s=c({properties:n,computed:{}},{onInited:function({storeControl:n}){a&&o(e.value),t.emit("inited",{initData:o})},extendContext:{}});s=p(s);let{EVENT_NAMES:r}=_(s);function l(){i.lock((()=>{t.emit("props-change",s.store.model.styleObj)}))}function u(e){let t=s.store.model.styleObj.find((t=>t[0]===e));if(t)return t[1]}return s.setEventHandler({"add:styleObj"(e){e.push(["",""])}}),Ve((()=>e.value),(e=>{a&&o(e)}),{}),{isLengthProp:function(e){return!!e&&ur.includes(e)},isPropType:function(e,t=""){return"color"===t&&(dr.includes(e)||e.includes("-color"))},onPropKeyChange:function(e,t){t[1]&&(t[1]="")},filterStatic:function(e=[]){return e.filter((e=>!cr.includes(e[0])))},filterOptions:function(e){return e},getStyleObjValue:u,removeStyleItem:function(e,t){let n=e.findIndex((e=>e[0]===t[0]));n>-1&&e.splice(n,1),setTimeout((()=>{l()}),0)},EVENT_NAMES:r,onArrLikeStaticChange:function(e,t){!function(e,t){let n=s.store.model.styleObj,i=n.find((t=>t[0]===e));i?i[1]=t:n.push([e,t]),setTimeout((()=>{l()}),0)}(e,t.join())},onPropValueChange:function(){setTimeout((()=>{l()}),0)},getStyleObjArrLikeValue:function(e){let t=u(e);return t?t.includes(",")?t.split(","):[t]:""},page:s,store:s.store,fontStyle:{}}}},_r={key:0,class:"z-attrs"},hr={key:0,title:"其他",class:"a-space-mb-15"},fr={key:0,class:"a-space-ml-10",style:{display:"flex","align-items":"center"}},mr={class:"a-space-ml-10",style:{display:"flex","align-items":"center"}};pr.render=function(e,t,n,i,a,o){const s=pe("ew-select"),r=pe("ew-suggest"),l=pe("Delete"),u=pe("el-icon"),d=pe("el-button"),c=pe("el-row"),p=pe("Plus");return i.page.inited?(q(),Q("div",_r,[i.store.model.styleObj?(q(),Q("div",hr,[me("section",null,[(q(!0),Q(ee,null,te(i.filterStatic(i.store.model.styleObj),((e,t)=>(q(),_e(c,{align:"middle",type:"flex",class:"a-space-mb-10",key:t},{default:he((()=>[ge(s,{size:"small",class:"z-style-select",filterable:"","allow-create":"",options:i.store.model.options,onChange:n=>i.onPropKeyChange(t,e),modelValue:e[0],"onUpdate:modelValue":t=>e[0]=t},null,8,["options","onChange","modelValue","onUpdate:modelValue"]),e[0]?(q(),Q("div",fr,[ge(r,{size:"small",modelValue:e[1],"onUpdate:modelValue":t=>e[1]=t,"onValue:change":i.onPropValueChange},null,8,["modelValue","onUpdate:modelValue","onValue:change"])])):ye("",!0),me("div",mr,[ge(d,{size:"mini",type:"danger",onClick:t=>i.removeStyleItem(i.store.model.styleObj,e)},{default:he((()=>[ge(u,null,{default:he((()=>[ge(l)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)))),128))]),ge(d,{size:"mini",onClick:t[0]||(t[0]=e=>i.page.callEvent("add:styleObj",i.store.model.styleObj))},{default:he((()=>[ge(u,null,{default:he((()=>[ge(p)])),_:1})])),_:1})])):ye("",!0)])):ye("",!0)};const gr={name:"CusAttr",components:{ZAttrs:pr},mixins:[f],setup(e,t){var n,i;let a,o=null!=(i=null==(n=null==e?void 0:e.ui)?void 0:n.widgetConfig)?i:{},s=ZY.JSON5,{data:r,methods:l,listeners:u,init:d,widgetConfig2:c}=m(e,t,{handleValueInit(e,t){if(console.log("CusAttr",e,typeof e),e)try{a=s.parse(e),p.control={styles:a}}catch(n){}else p.control.styles=[];return{}}}),p=r({value:{},control:{}});function _(){let e=s.parse(s.stringify(p.value)),t=s.stringify(e.styles);l.on_change(t)}return Ne((()=>{o.mounted&&d(e)})),{state:p,widgetConfig:o,onChange:_,methods:l,onStylesInited:function({initData:e}){},onStylesChange:function(e){p.value.styles=ZY.JSON5.parse(ZY.JSON5.stringify(e)),_()},onBlur:function(){_()},save:function(){_()},listeners:u}}},br={key:0,class:"a-space-mb-10"};gr.render=function(e,t,n,i,a,o){const s=pe("ZAttrs");return e.inited?(q(),Q(ee,{key:0},[i.state.control?(q(),Q("section",br,[ge(s,{style:{flex:"1"},value:i.state.control.styles,"onForm:input:blur":i.onBlur,onPropsChange:i.onStylesChange},null,8,["value","onForm:input:blur","onPropsChange"])])):ye("",!0)],64)):ye("",!0)};const yr={name:"CusInsert",components:{EwSuggest:ko,Edit:Ae},mixins:[f],props:{docEnums:{type:String,default:'ROOT_STATE("tools.toolDocs")'}},setup(e,t){let n;e.defs;let i=ZY.JSON5,a=0,o="htm"+ZY.rid(6).toLowerCase(),s="cursor"+ZY.rid(6).toLowerCase(),r=!1,l=e.ui.widgetConfig,u=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];u=u.concat(u.map((e=>e.toUpperCase())));let d=["+","-","*","/","0","1","2","3","4","5","6","7","8","9","[","]",".","_","(",")",",","'",...u];Array.isArray(l.insText)&&(d=d.concat(l.insText));let c=[];Array.isArray(l.insFun)&&(c=c.concat(l.insFun));let p=[];Array.isArray(l.insVars)&&(p=p.concat(l.insVars));let _=!1,{data:h,methods:f,listeners:g,init:b,instanse:y}=m(e,t,{handleValueInit(e,t){if(!e)return e={};if(e)try{return n=i.parse(e),_||(_=!0,a=Te(n.funcs).length,we((()=>{v.value.funcs&&(v.control.funcs=Te(v.value.funcs)),setTimeout((()=>{T(a,"init",1,{focus:!1})}),100)}))),n}catch(o){console.log(o)}return{}}}),v=h({value:{},control:{},drawer:!1,focused:!1,selected:!1,pinyin:"",parsedList:[],parsedText:[],str:""});function w(){let e=i.parse(i.stringify(v.control)),t=document.querySelector(`#${o} [content]`);if(!t)return;let n=t.children,a="";n.length>0&&Array.of(...n).forEach((e=>{e.hasAttribute("val")?a+=e.getAttribute("val"):a+=e.textContent})),e.textContent=a.trim();let s=i.stringify(e);v.str=e.textContent,f.on_change(s)}function x(){v.control.funcs||(v.control.funcs=[])}function C(e=1){let t=a-1;return-1===t?0:t<-1?v.control.funcs.length:t+e}function k(e){setTimeout((()=>{T(v.control.funcs.length-1,"add",e),w()}),30)}function E(e,t="xy-text",n=""){x();let i=C();v.control.funcs.splice(i,0,["return `${VAL}<"+t+' text-item level="${INDEX}" '+n+" >"+e+"</"+t+">`"]),k()}function O(e=[],t="xy-text",n=""){if(Array.isArray(e)&&e.length>0){x();let a=C(),o=e.map((e=>["return `${VAL}<"+t+' text-item level="${INDEX}" '+n+" >"+e+"</"+t+">`"]));v.control.funcs.splice(a,0,...o),i=o.length,setTimeout((()=>{T(112121,"add",i),setTimeout((()=>{w()}),100)}),30)}var i}function S(e){let t=a-1;t<-1&&(t=-1),setTimeout((()=>{T(t,"remove"),e&&e()}),30)}function D(e){let t=a+1;t<v.control.funcs.length+1&&setTimeout((()=>{T(t,"next"),e&&e()}),30)}function A(){v.control.funcs.splice(a-1,1),S((function(){w()}))}function T(e,t,n=1,{focus:i=!0}={}){let r=parseInt(e),l=document.querySelector(`#${o} [level="${a}"]`);l&&l.removeAttribute("selected"),"add"===t?a+=n:a=r;let u=document.querySelector(`#${o} [level="${a}"]`);if(u){u.setAttribute("selected",1);let e=u.offsetLeft+u.clientWidth,t=document.getElementById(s);t.style.left=e+"px",i&&t.focus()}}function I(){T(0,"index")}function M(){T(v.control.funcs.length,"index")}function R(e){e.target.hasAttribute("text-item")&&T(e.target.getAttribute("level"),"index")}b(e),ze((()=>{document.getElementById(o).removeEventListener("click",R)}));let L=0,N=0;let V=[];let z=!1,P="";return{state:v,widgetConfig:l,getFunDOC:function(t=""){V.length<1&&(V=y.ctx.dxValueTemplate(e.docEnums,[]));let n=V.find((e=>e.label===t));if(n){let e=n.value;return ZY.lodash.isFunction(n.value)&&(e=n.value()),ZY_EXT.marked(null!=e?e:"")}return"空"},onChange:w,cursorID:s,insertFun:function(e){x();let t=C();v.control.funcs.splice(t,0,['return `${VAL}<xy-text text-item level="${INDEX}">'+e+"(</xy-text>`"]),v.control.funcs.splice(t+1,0,['return `${VAL}<xy-text text-item level="${INDEX}">)</xy-text>`']),k()},insertText:E,insertQute:function(e){x();let t=C();v.control.funcs.splice(t,0,['return `${VAL}<xy-text text-item level="${INDEX}">\'</xy-text>`']),v.control.funcs.splice(t+1,0,['return `${VAL}<xy-text text-item level="${INDEX}">\'</xy-text>`']),k()},isArray:function(e){return Array.isArray(e)},onCursorcompositionstart:function(e){z=!0},onCursorcompositionend:function(e){z=!1},onCursorChange:function(e){var t,n;if(e.stopPropagation(),e.preventDefault(),!(N>59))if("Space"===e.code){O([...null!=(n=null==(t=e.target.innerText)?void 0:t.replace(P,""))?n:""]),e.target.innerText=""}else if("Enter"===e.code){O([...e.target.innerText]),e.target.innerText=""}else"Backspace"===e.code?A():"ShiftLeft"===e.code?P=e.target.innerText:"ArrowLeft"===e.key?S():"ArrowRight"===e.key?D():"ArrowUp"===e.key?I():"ArrowDown"===e.key&&M()},onCursorkeydown:function(e){z||d.includes(e.key)&&(O([e.key]),e.target.innerText="")},onCusorfocus:function(){v.focused=!0},onCusorblur:function(){v.focused=!1},insertEmoji:function(){E("","z-emoji",'zoom=".7" face="fuck"')},backStep:A,hid:o,lifeTimes:{onReady(){setTimeout((()=>{document.getElementById(o).addEventListener("click",R)}),30)}},insertedText:d,insertedFun:c,insertTVars:function(e){O([e[0]],e[1],e[2])},onFocus:function(e){document.querySelector(".cus-insert-input.focus")&&Array.of(...document.querySelectorAll(".cus-insert-input:not(.focus)")).forEach((e=>{e.blur()}))},onMainMouseUp:function(e){var t;N<60&&(null==(t=document.getElementById(s))||t.focus()),v.selected=!1,r=!1},onMouseDown:function(e){L=e.clientX,r=!0},onMouseMove:function(e){var t;r&&(N=Math.abs(e.clientX-L),N>60&&(null==(t=document.getElementById(s))||t.blur(),v.selected=!0))},insertedVars:p,onValueChanged:function(){},methods:f,onModalClosed:function(){var e;null==(e=document.getElementById(o))||e.focus()},onInputFocus:function(e){e.stopPropagation(),document.querySelector(".cus-insert-input.focus")||(v.drawer=!0,v.pingyin="",v.parsedList=[[],""],v.parsedText=[])},onInputBlur:function(e){},onBlur:function(){w()},onInsertkeyup:function(e){!function(e,t={}){e.preventDefault(),e.stopPropagation(),"Backspace"===e.key?A():d.includes(e.key)?t.onText?t.onText(e.key,e):E(e.key):"ArrowLeft"===e.key?S():"ArrowRight"===e.key?D():"ArrowUp"===e.key?I():"ArrowDown"===e.key&&M()}(e)},onPopupkeyup:function(e){},runFuncs:function(e){let t=[['return `<xy-text text-item level="0">&nbsp;</xy-text>`']];if(Array.isArray(e)){return t=t.concat(e).map(((e,t)=>new Function("VAL",`let INDEX = ${t}; `+e[0]))),ZY.R.pipe.apply(null,t)("")}return""},save:function(){w()},listeners:g}}},vr=["id"],wr=["innerHTML"],xr=["id"],Cr=me("i",{class:"fas fa-keyboard"},null,-1),kr=be(" 变量： "),Er=["innerHTML"],Or=["innerHTML"],Sr=["innerHTML"],Dr=be(" 函数： "),Ar=["innerHTML"],Tr=["innerHTML"],Ir=be("退格"),Mr=be("插入括号"),Rr=be("插入引号"),Lr=be("插入"),Nr=["innerHTML"];yr.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("el-popover"),l=pe("z-emoji"),u=pe("el-drawer");return e.inited?(q(),Q(ee,{key:0},[me("div",{id:i.hid,class:ue(["cus-insert-input",{focus:i.state.drawer||i.state.focused,selected:i.state.selected}]),tabindex:"-1",onFocus:t[9]||(t[9]=(...e)=>i.onFocus&&i.onFocus(...e)),onBlur:t[10]||(t[10]=(...e)=>i.onInputBlur&&i.onInputBlur(...e))},[me("div",{style:{flex:"1"},onMouseup:t[6]||(t[6]=(...e)=>i.onMainMouseUp&&i.onMainMouseUp(...e)),onMousedown:t[7]||(t[7]=(...e)=>i.onMouseDown&&i.onMouseDown(...e)),onMousemove:t[8]||(t[8]=(...e)=>i.onMouseMove&&i.onMouseMove(...e))},[me("div",{content:"",style:{display:"inline-block"},class:"cus-insert-html",innerHTML:i.runFuncs(i.state.control.funcs)},null,8,wr),me("span",{id:i.cursorID,"cursor-div":"",contenteditable:"true",style:{display:"inline-block"},onFocus:t[0]||(t[0]=(...e)=>i.onCusorfocus&&i.onCusorfocus(...e)),onBlur:t[1]||(t[1]=(...e)=>i.onCusorblur&&i.onCusorblur(...e)),onCompositionstart:t[2]||(t[2]=(...e)=>i.onCursorcompositionstart&&i.onCursorcompositionstart(...e)),onCompositionend:t[3]||(t[3]=(...e)=>i.onCursorcompositionend&&i.onCursorcompositionend(...e)),onKeyup:t[4]||(t[4]=(...e)=>i.onCursorChange&&i.onCursorChange(...e)),onKeydown:t[5]||(t[5]=(...e)=>i.onCursorkeydown&&i.onCursorkeydown(...e))},null,40,xr)],32),ge(s,{class:"cus-insert-input__append",onClick:i.onInputFocus},{default:he((()=>[Cr])),_:1},8,["onClick"])],42,vr),ge(u,{modelValue:i.state.drawer,"onUpdate:modelValue":t[15]||(t[15]=e=>i.state.drawer=e),title:"自定义键盘",direction:"btt",modal:"false","modal-class":"cus-insert-modal",onClosed:i.onModalClosed,"close-on-click-modal":!1,"append-to-body":!0},{default:he((()=>[me("div",{class:"cus-insert-keyboard",tabindex:"-1",onKeydown:t[14]||(t[14]=(...e)=>i.onPopupkeyup&&i.onPopupkeyup(...e))},[me("div",null,[kr,(q(!0),Q(ee,null,te(i.insertedVars,(e=>(q(),_e(r,{trigger:"hover",width:"450",placement:"top"},{reference:he((()=>[i.isArray(e)?(q(),_e(s,{key:0,onClick:t=>i.insertTVars(e)},{default:he((()=>[me("span",{innerHTML:e[0]},null,8,Or)])),_:2},1032,["onClick"])):(q(),_e(s,{key:1,onClick:t=>i.insertText(`${e}`,"xy-text","")},{default:he((()=>[me("span",{innerHTML:e},null,8,Sr)])),_:2},1032,["onClick"]))])),default:he((()=>[me("div",{innerHTML:i.getFunDOC(e)},null,8,Er)])),_:2},1024)))),256))]),me("div",null,[Dr,(q(!0),Q(ee,null,te(i.insertedFun,(e=>(q(),_e(r,{trigger:"hover",width:"450",placement:"top"},{reference:he((()=>[ge(s,{onClick:t=>i.insertFun(e)},{default:he((()=>[me("span",{innerHTML:e},null,8,Tr)])),_:2},1032,["onClick"])])),default:he((()=>[me("div",{innerHTML:i.getFunDOC(e)},null,8,Ar)])),_:2},1024)))),256))]),me("div",null,[ge(s,{onClick:i.backStep},{default:he((()=>[Ir])),_:1},8,["onClick"]),ge(s,{onClick:t[11]||(t[11]=e=>i.insertFun(""))},{default:he((()=>[Mr])),_:1}),ge(s,{onClick:t[12]||(t[12]=e=>i.insertQute(""))},{default:he((()=>[Rr])),_:1}),ge(s,{onClick:t[13]||(t[13]=e=>i.insertEmoji("fuck"))},{default:he((()=>[Lr,ge(l,{face:"fuck"})])),_:1}),(q(!0),Q(ee,null,te(i.insertedText,(e=>(q(),_e(s,{onClick:t=>i.insertText(`${e}`)},{default:he((()=>[me("span",{innerHTML:e},null,8,Nr)])),_:2},1032,["onClick"])))),256))])],32)])),_:1},8,["modelValue","onClosed"])],64)):ye("",!0)};const Vr={name:"AsyncPlumbLayout",mixins:[Ot,Et],components:{Remove:Se,Edit:Ae},props:{rootId:String,handleAppend:{type:Function,default:()=>function(){}},handleDep:{type:Function,default:()=>function(){}},customLabel:Boolean},data:()=>({pointsMap:{},instance:null,config:{},deps:[]}),mounted(){let e=this;e.config=St(e),jsPlumb.ready((function(){e.instance=jsPlumb.getInstance({Container:e.$refs.container}),e.$emit("init",e)}))},methods:{init({deps:e=[]}={}){this.deps=e},insDeps(e){let t=this,n=this.instance;e.forEach((e=>{t.insDep(e.id,n,e.items)}))},insPosMap(e){this.loadPosMap(e)},insEventLinks(e=[]){let t=this.instance;e.forEach((e=>{let n=t.getEndpoints(e.from),i=t.getEndpoints(e.to);t.connect({source:n[0],target:i[0]})}))},insComLinks(e=[]){let t=this.instance;e.forEach((e=>{let n=t.getEndpoints(e.from),i=t.getEndpoints(e.to);t.connect({source:n[1],target:i[0]})}))},addEndpoint(e,t,n,i=""){this.pointsMap[n]||(this.pointsMap[n]={});let a=this.config,o=this.instance;if(document.getElementById(e)){let s=o.addEndpoint(e,t,a.baseStyle);this.pointsMap[n][e+i]=s}},uninsDep(e){let t=e.id,n=this.instance;[t+"-top"].forEach((e=>{if(document.getElementById(e)){let e=this.pointsMap[t];if(e){for(let[t,i]of Object.entries(e))n.deleteEndpoint(i);delete this.pointsMap[t]}}}))},insDep(e,t,n=[]){let i=this;this.config,i.addEndpoint(e+"-top",{anchors:["Left"]},e),n.forEach((t=>{i.renderItem(t,e)})),i.makeDraggable(e,t,n)},deleteDep(e){let t=e.id,n=this.deps.findIndex((e=>e.id===t));n>-1&&(this.uninsDep(e),this.deps.splice(n,1)),this.$nextTick((()=>{this.instance.repaintEverything()}))},appendDep(e={}){let t="i-"+ZY.rid(),n=r({id:t,items:[],config:{version:"v1",closure:!1}},e);this.handleDep&&this.handleDep(n),this.deps.push(n),this.$nextTick((()=>{this.insDep(t,this.instance,n.items)}))},editDep(e,t){this.$emit("edit-dep",{dep:e,item:t})},addDep(e){let t="i"+ZY.rid(3),n=et(e,{id:t,items:[]});this.deps.push(n),this.$nextTick((()=>{this.insDep(t,this.instance,n.items)}))},doSaveAction(){let e=this.getLinkRealtions(),t=[];t=e.filter((e=>e.from.endsWith("-evt")));let n=[],i=["evt","fun"];n=e.filter((e=>{let t=e.from,n=i.some((e=>t.endsWith(e)));return e.to.endsWith("top")&&!n}));let a={deps:this.deps,eventLinks:t,links:n};return a.posMap=this.posMap,a},save(){let e=this.doSaveAction();this.$emit("save-data",e)}}},zr=["id"],Pr=be("保存"),Ur=be("添加Array"),jr=be("添加Object"),Gr=["id"],Zr=["id","dep-name","dep-level","dep-level-index"],Fr=["data-pid","id"],Br=["id","data-pid"],Yr={class:"a-space-mr-5"},Xr={key:1},$r={class:"a-space-mr-5"},Wr=me("i",{class:"el-icon-plus"},null,-1);function Hr({widget:e="",widgetConfig:t={}}={}){return{data:{widget:e,widgetConfig:t}}}Vr.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("el-space"),l=pe("Remove"),u=pe("el-icon"),d=pe("el-popconfirm"),c=pe("el-input"),p=pe("Edit"),_=pe("el-row");return q(),Q("div",{id:e.comId,class:"async-plumb-layout auto-init-layout"},[ge(r,null,{default:he((()=>[ge(s,{size:"small",type:"primary",onClick:o.save},{default:he((()=>[Pr])),_:1},8,["onClick"]),ge(s,{size:"small",onClick:t[0]||(t[0]=e=>o.addDep("array"))},{default:he((()=>[Ur])),_:1}),ge(s,{size:"small",onClick:t[1]||(t[1]=e=>o.addDep("object"))},{default:he((()=>[jr])),_:1}),ie(e.$slots,"button-group")])),_:3}),me("div",{id:e.containerId,ref:"container",class:"container"},[(q(!0),Q(ee,null,te(a.deps,((t,i)=>(q(),Q("div",{id:t.id,class:"abs section","dep-name":t.id,key:t.id,"dep-level":t.A_LEVEL,"dep-level-index":t.A_LEVEL_INDEX},[ge(d,{title:"这是一段内容确定删除吗？",onConfirm:e=>o.deleteDep(t)},{reference:he((()=>[ge(s,{size:"mini",type:"danger"},{default:he((()=>[ge(u,null,{default:he((()=>[ge(l)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),me("div",{class:"item header","data-pid":t.id,id:t.id+"-top"},[ge(r,{class:"header-top",align:"middle",style:{"line-height":"1.4"}},{default:he((()=>[me("div",null,"类型: "+Ie(t.type),1),me("div",null,"ID: "+Ie(t.id),1)])),_:2},1024)],8,Fr),t.config.closure?ye("",!0):(q(),Q(ee,{key:0},[(q(!0),Q(ee,null,te(e.ZINDEX_ITEMS(t.items),((i,a)=>(q(),Q("div",{key:i.id,id:i.id,"data-pid":t.id,class:"item content-item"},[me("div",null,[n.customLabel?ie(e.$slots,"label",ae(se({key:0},{item:i}))):ye("",!0)]),ge(_,{align:"middle"},{default:he((()=>[me("div",Yr,["array"!==t.type?(q(),_e(c,{key:0,size:"mini",class:"item-key-input",modelValue:i.key,"onUpdate:modelValue":e=>i.key=e,placeholder:"请填写key"},null,8,["modelValue","onUpdate:modelValue"])):(q(),Q("div",Xr,Ie(i.key),1))]),me("div",$r,[ge(c,{type:"number",size:"mini",modelValue:i.ZINDEX_TEMP,"onUpdate:modelValue":e=>i.ZINDEX_TEMP=e,style:{width:"90px"},onBlur:n=>e.ON_CHANGE_ZINDEX(i.ZINDEX_TEMP,i,t),placeholder:"排序"},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),ge(s,{size:"mini",style:{padding:"6px 10px"},type:"danger",onClick:n=>e.deleteItem(t,i,a)},{default:he((()=>[ge(u,null,{default:he((()=>[ge(l)])),_:1})])),_:2},1032,["onClick"]),ge(s,{size:"mini",style:{padding:"6px  10px","margin-left":"5px"},type:"primary",onClick:e=>o.editDep(t,i)},{default:he((()=>[ge(u,null,{default:he((()=>[ge(p)])),_:1})])),_:2},1032,["onClick"]),ie(e.$slots,"actions",ae(oe({dep:t,item:i,key:i.key,index:a})))])),_:2},1024)],8,Br)))),128)),"object"===t.type?(q(),_e(s,{key:0,class:"plumb__layout-plus",size:"small",onClick:n=>e.appendItem(t)},{default:he((()=>[Wr])),_:2},1032,["onClick"])):ye("",!0),ie(e.$slots,"plumb__layout-beforeend",ae(oe({dep:t,appendItem:e.appendItemV2})))],64)),re(me("div",{style:{height:"150px",overflow:"auto"}},Ie(t.data),513),[[le,t.data]])],8,Zr)))),128))],8,Gr)],8,zr)};const Kr={name:"DeepPropEditor",components:{ZWindow:v,AsyncPlumbLayout:Vr,Coffee:Fe,Plus:De},props:{serviceName:String,height:{type:[Number,String],default:"900px"},rootId:{type:String,default:"i0"},modal:{type:Boolean,default:!0}},mixins:[{data:()=>({showCurrent:!0,currentLinks:[],jsonObj:{},dialogVisible:!1,layoutContext:null,currentLayoutMap:{}}),props:{deps:{type:Array},links:{type:Array},posMap:{type:Object}},watch:{deps:{handler(e){this.initLayout(this.layoutContext,e)},immediate:!0}},methods:{async initLayout(e,t){var n;let i=this,a=e;this.links;let o=null!=(n=this.posMap)?n:{};a&&(a.insPosMap(o),await ZY.sleep(300),a.init({deps:t}),await a.$nextTick(),a.insDeps(t),await ZY.sleep(300),a.insComLinks(i.links))},onPlumbLayoutInit(e){this.layoutContext=e,Array.isArray(this.deps)&&this.deps.length>0&&this.initLayout(this.layoutContext,this.deps)},handleDep(e){"form"===e.type&&(e.content="",e.config.closure=!0)},handleAppend(e,t){"column"===t.type&&(e.h=120),"row"===t.type&&(e.w="1fr",e.h=50)},onSaveDep({deps:e,links:t=[],posMap:n={}}){let i={[this.rootId]:e.find((e=>e.id===this.rootId))};t.forEach((t=>{let{toPID:n=""}=t;if(n){let t=e.find((e=>e.id===n));t&&(i[n]=t)}})),this.currentLayoutMap=JSON.parse(JSON.stringify(i)),this.currentLinks=JSON.parse(JSON.stringify(t)),this.$emit("update:deps",Te(e)),this.$emit("update:links",Te(t)),this.$emit("update:posMap",Te(n)),this.$emit("change")}}},{data:()=>({renderFormLoading:!1,renderFormDesigner:!1,currentEditDep:null,currentEditItem:null}),methods:{async onEditDep({dep:e,item:t}){this.renderFormLoading=!0,this.renderFormDesigner=!1,this.currentEditDep=e,this.currentEditItem=t,await this.loadStepByContent("editor_step",t),this.$nextTick((()=>{setTimeout((()=>{this.renderFormLoading=!1,this.renderFormDesigner=!0}),30)}))}}}],data:()=>({}),setup(e){const t=Be();let n=Ze("CusFormExpose"),i=Me().ctx,a=c({properties:{editor_step:{type:String}}},{onInited(){}});a=p(a);let{EVENT_NAMES:o,onChange:s}=_(a),l=null;a.setEventHandler({"model:update:all"(e){let{model:t,key:n,newVal:a,config:o}=e;ZY.lodash.get(i.currentEditItem.data,n)!==a&&(i.currentEditItem.data=ZY.JSON5.stringify(t)),l=t}});let u={};function d(e){D({type:A.CLEAR_INSPECT,e:e})}function h(e="",t=""){var n;try{let i=ZY.JSON5.parse(e),a=null!=(n=null==i?void 0:i.ui)?n:{};return ZY.lodash.get(a,t)}catch(i){console.log(i)}return""}let f=Le({open:!1,currrent:{}});return{loadStepByContent:async function(e="",i){var o;let s={};if(n&&n.getPartModel){s=n.getPartModel();let e=ZY.JSON5.parse(null!=(o=s.computed2)?o:{}).parts.map((e=>({label:e.name,value:e.name})));t.dispatch("setDynamicOptions",["DEEP_COMPUTED_OPTIONS_TEMP",e])}let[,r]=await ZY.awaitTo(S((()=>import("./DeepEditorConfig.de505390.js")),["assets/DeepEditorConfig.de505390.js","assets/index.23ee6f22.js","assets/index.71233784.css","assets/vendor.70e2a6e0.js"]));const l=r.default;l.name=ZY.rid(),u=l,a.setDef(l,(function({done:e}){let t=null;i.data&&(t=ZY.JSON5.parse(i.data)),console.log("cached",t);for(let[n,i]of Object.entries(l.defaultVal)){let e=ZY.JSON5.parse(ZY.JSON5.stringify(i)),o=ZY.lodash.merge(e,t);a.setPartModel(l.name,n,o||e)}e()})),await we(),a.setData({[e]:l.name})},onBeforeClose:function(e){i.layoutContext.save(),d(),e()},onDrawerClose:function(e){l&&(e.data=ZY.JSON5.stringify(l))},inspect:function(e){D({type:A.INSPECT,e:e})},clearInspect:d,store:a.store,dialogState:f,showQuickAppend:function(e){f.open=!0,f.currrent=e},quickAppendCom:function(e){f.currrent.appendItem(f.currrent.dep,(function(t){let n=function({type:e="string",ui:t={}}={}){return{type:e,ui:r({type:"",label:"",widgetConfig:"{}",form_item:{},attrs:[]},t),rules:"[]",rulesArr:[]}}({type:"string",ui:{widget2:ZY.JSON5.stringify(Hr({widget:e.value}))}});t.data=ZY.JSON5.stringify(n),t.key=ZY.rid(6)}))},filter:a.filter,getComponents:function(){return getApp().get_custom_components()},getUrl:function(e){return getApp().get_elememt_doc_url(e)},EVENT_NAMES:o,getUIData:h,getUIWidget2:function(e){let t=h(e,"widget2"),n={};try{if(t){let e=ZY.JSON5.parse(t);if(e.data){n.widget=e.data.widget;let t=CustomVueComponent.resolve(e.data.widget);t&&(n.CUS_TITLE=t.CUS_TITLE)}}}catch(i){console.log(i)}return n},quickSetUILabel:function(e,t){console.log("quickSetUILabel",e,t);try{let n=ZY.JSON5.parse(e.item.data);n.ui.label=t,e.item.data=ZY.JSON5.stringify(n)}catch(n){}},allDef:a.defMap,getArrItemBeforeKey:function(e){let t={config:u.init.def},n=ZY.lodash.get(t,e.configPath);return ZY.getStrFromObj(n,"ui.label",e.key)},page:a}}},Jr={style:{opacity:"0","font-size":"0","line-height":"0"}},qr=be("编辑"),Qr=be("清除调试框"),el=me("header",null,null,-1),tl=me("i",{class:"fa fa-book"},null,-1),nl={key:0},il=be("添加"),al=be("删除");Kr.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("Coffee"),l=pe("el-icon"),u=pe("el-input"),d=pe("el-row"),c=pe("Plus"),p=pe("AsyncPlumbLayout"),_=pe("el-dialog"),h=pe("z-window"),f=pe("el-col"),m=pe("el-popconfirm"),g=pe("HttpComponent"),b=pe("el-drawer");return q(),Q("div",{class:ue(["deep-editor",{"deep-editor-no-modal":!n.modal}])},[me("div",Jr,Ie(i.store.model),1),ge(d,{type:"flex"},{default:he((()=>[ge(s,{class:"deep-editor-toggle",size:"small",onClick:t[0]||(t[0]=t=>e.dialogVisible=!0)},{default:he((()=>[qr])),_:1}),ge(_,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dialogVisible=t),title:"",width:"96vw","before-close":i.onBeforeClose,class:"deep-editor-dialog"},{default:he((()=>[ge(p,{onInit:e.onPlumbLayoutInit,"root-id":n.rootId,handleAppend:e.handleAppend,"handle-dep":e.handleDep,onEditDep:e.onEditDep,onSaveData:e.onSaveDep,style:ne({height:n.height}),"custom-label":!0},{"button-group":he((()=>[ge(s,{size:"small",onClick:i.clearInspect},{default:he((()=>[Qr])),_:1},8,["onClick"])])),actions:he((e=>[ge(s,{size:"mini",style:{padding:"6px  10px","margin-left":"5px"},type:"primary",onClick:t=>i.inspect(e)},{default:he((()=>[ge(l,null,{default:he((()=>[ge(r)])),_:1})])),_:2},1032,["onClick"])])),label:he((e=>[ge(d,{class:"a-space-mt-10",align:"middle"},{default:he((()=>[me("div",null,Ie(i.getUIWidget2(e.item.data).CUS_TITLE),1),ge(u,{class:"a-space-ml-10",size:"mini",modelValue:e.item.ZLABEL,"onUpdate:modelValue":t=>e.item.ZLABEL=t,style:{width:"120px"},onChange:t=>i.quickSetUILabel(e,t),placeholder:"请填写标题"},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024)])),"plumb__layout-beforeend":he((e=>["object"===e.dep.type?(q(),_e(s,{key:0,size:"small",style:{},onClick:t=>i.showQuickAppend(e)},{default:he((()=>[ge(l,null,{default:he((()=>[ge(c)])),_:1})])),_:2},1032,["onClick"])):ye("",!0)])),_:1},8,["onInit","root-id","handleAppend","handle-dep","onEditDep","onSaveData","style"])])),_:1},8,["modelValue","before-close"]),ge(_,{modelValue:i.dialogState.open,"onUpdate:modelValue":t[2]||(t[2]=e=>i.dialogState.open=e),title:"快速组件",width:"60vw","append-to-body":""},{default:he((()=>[me("section",null,[el,ge(d,{gutter:20},{default:he((()=>[(q(!0),Q(ee,null,te(i.getComponents(),(e=>(q(),_e(f,{style:{cursor:"pointer"},class:"a-space-pv-20",span:8},{default:he((()=>[ge(d,{justify:"center",align:"middle"},{default:he((()=>[ge(s,{size:"small",onClick:t=>i.quickAppendCom(e)},{default:he((()=>[be(Ie(e.label),1)])),_:2},1032,["onClick"]),ge(h,{class:"a-space-ml-5",url:i.getUrl(e.value),target:"deepWindow"},{default:he((()=>[tl])),_:2},1032,["url"])])),_:2},1024)])),_:2},1024)))),256))])),_:1})])])),_:1},8,["modelValue"]),ge(b,{title:"属性",size:"900px",modelValue:e.renderFormDesigner,"onUpdate:modelValue":t[3]||(t[3]=t=>e.renderFormDesigner=t),"lock-scroll":!1,"destroy-on-close":"",onClosed:t[4]||(t[4]=t=>i.onDrawerClose(e.currentEditItem,e.currentEditDep))},{default:he((()=>[e.renderFormDesigner&&e.currentEditDep?(q(),Q("div",nl,["object"===e.currentEditDep.type?(q(),_e(g,{key:0,defs:i.allDef,is:i.store.model.editor_step,debug:!1},{object_beforebegin:he((e=>[me("h3",null,Ie(e.label),1)])),array_afterbegin:he((e=>[me("div",null,[me("h3",null,Ie(e.label),1),ge(s,{type:"primary",size:"small",onClick:t=>i.page.callEvent(i.EVENT_NAMES.ARR_APPEND_COMMON,e)},{default:he((()=>[il])),_:2},1032,["onClick"])])])),array_con_beforeend:he((e=>[me("div",null,[ge(m,{title:"确定删除吗？",onConfirm:t=>i.page.callEvent(i.EVENT_NAMES.ARR_REMOVE_COMMON,e)},{reference:he((()=>[ge(s,{type:"danger",size:"small"},{default:he((()=>[al])),_:1})])),_:2},1032,["onConfirm"])])])),_:1},8,["defs","is"])):ye("",!0)])):ye("",!0)])),_:1},8,["modelValue"])])),_:1})],2)};const ol={name:"CusProps",components:{DeepPropEditor:Kr},mixins:[f],setup(e,t){e.defs;let n=ZY.JSON5,i={},{data:a,methods:o,listeners:s,init:r}=m(e,t,{handleValueInit:function(e){e||(e="{links: [], deps: [], posMap: {}}");e&&(i=n.parse(e),l.deps=i.deps,l.links=i.links,l.posMap=i.posMap);return e}}),l=a({deps:[],links:[],posMap:{}});return r(e),{onChange:function(){let e=n.stringify({posMap:Te(l.posMap),deps:Te(l.deps),links:Te(l.links)});l.value=e,o.on_change(e)},state:l,widgetConfig:e.ui.widgetConfig,methods:o,listeners:s}}};ol.render=function(e,t,n,i,a,o){const s=pe("DeepPropEditor");return e.inited?(q(),_e(s,{key:0,modal:!1,posMap:i.state.posMap,"onUpdate:posMap":t[0]||(t[0]=e=>i.state.posMap=e),deps:i.state.deps,"onUpdate:deps":t[1]||(t[1]=e=>i.state.deps=e),links:i.state.links,"onUpdate:links":t[2]||(t[2]=e=>i.state.links=e),onChange:i.onChange},null,8,["posMap","deps","links","onChange"])):ye("",!0)};const sl={name:"CusForm",components:{HttpComponent:E},mixins:[f],props:{configUrl:{type:String,default:"/formEditorConfig.js"}},setup(e,t){S((()=>import("./bundle.esm.3ebc55e5.js")),["assets/bundle.esm.3ebc55e5.js","assets/bundle.esm.ab6c6d38.css","assets/vendor.70e2a6e0.js"]).then((e=>{let t=e.JsonViewer;CustomVueComponent.app.component("v-json-viewer",t),S((()=>import("./ext2.26d35912.js")),["assets/ext2.26d35912.js","assets/ext2.96125bc8.css","assets/CodeMirror.080f6ca7.js","assets/CodeMirror.6ef8b006.css","assets/vendor.70e2a6e0.js","assets/index.23ee6f22.js","assets/index.71233784.css","assets/CommonRender.d6009dc7.js","assets/nodes.a56b7126.js","assets/form.e330999e.js"]).then((e=>{e.registerExt2()}))}));let n=!0,i=null,a=null,{methods:o,init:s,data:r,widgetConfig2:l,curFormCon:u}=m(e,t,{handleValueInit(e){if(void 0!==e)try{i=ZY.JSON5.parse(e)}catch(t){console.error(new Error("json parse err",{cause:t}))}return e}});r({});let d={editor_step:{type:String},json:{type:String},dialog_open:{type:Boolean},loaded:{type:Boolean},dialogVisible:{type:Boolean}},_="cus_form_dialog_"+ZY.rid(6);let h=c({properties:d,computed:{}},{onInited:function({storeControl:e}){},extendContext:{}});h=p(h),h.setEventHandler({"add:part"(e){let{parts:t,partName:n,pathArr:i,process:a}=e,o=ZY.getObjPathFromPathArr(i);t[n].arrAppend(o)},async"model:update:all"(e){let{model:t,key:i,newVal:s,config:r}=e;if(a=t,!n){let e=ZY.JSON5.stringify(t);h.setData({json:e}),await we(),o.on_change(e)}}}),h.onOtherEventHandler=function(e,t){u.callPageEvent("cursform:event",{type:e,e:t})},Ye("CusFormExpose",{getModel:()=>a,getPartModel:()=>null==a?void 0:a.parts[0]});let f=null,g={};Ne((function(){let t=e.configUrl;l.configUrl&&(t=l.configUrl),h.commonLoadStep(globalThis.importScripts(t),"editor_step",{async onMounted(t,{setPartModel:a}){g=t,s(e),f=function(){i&&a(t.name,"form2",i)},n&&(n=!1,f())}})}));let b=!0;return e.ui.widgetConfig.hasOwnProperty("useDrag")&&(b=e.ui.widgetConfig.useDrag),{dialogName:_,widgetConfig:l,page:h,showAddBtn:function(e){var t;let{parts:n,partName:i,configPath:a}=e,o=n[i].getPartConfig(a);return null==(t=null==o?void 0:o.ui)?void 0:t.showAddBtn},openDialog:function(){let e=globalThis.getCurrentPage("page.webComponentRef");e&&e.toggleDialog&&e.toggleDialog(_),console.log("formEditorConfig",i),n||f(),h.setByPath("dialog_open",!0)},getArrItemBeforeKey:function(e){let t={config:g.init.def},n=ZY.lodash.get(t,e.configPath);return ZY.getStrFromObj(n,"ui.label",e.key)},useDrag:b,onClosed:function(){console.log("onClosed")},store:h.store}}},rl={key:0,class:"cus-form"},ll={hidden:""};sl.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("HttpComponent");return i.page.inited?(q(),Q("div",rl,[me("div",ll,Ie(i.store.model),1),ge(r,{defs:i.page.defMap,is:i.store.model.editor_step},{array_con_afterbegin:he((e=>[])),array_afterbegin:he((e=>[i.showAddBtn(e)?(q(),_e(s,{key:0,size:"small",onClick:t=>i.page.callEvent("add:part",e)},{default:he((()=>[be("添加"+Ie(e.key),1)])),_:2},1032,["onClick"])):ye("",!0)])),_:1},8,["defs","is"])])):ye("",!0)};var ul=fe({name:"RenderJsx",emits:[],props:{render:null},setup:(e,t)=>()=>e.render});const dl=fe({name:"RenderDom",components:{RenderJsx:ul},emits:["loaded"],props:{uuids:{type:Array,default:()=>[]},render:null},setup(e,t){let n=Le({child:[],oldUUIDS:[],inited:!0});function i(){n.inited=!1,a(),setTimeout((()=>{n.inited=!0}),150)}function a(){let t=[],i=ZY.JSON5.parse(e.uuids.str).map((e=>e)),a=e.render;i.map((e=>{t.push({uuid:e,data:a[e]})})),n.child=t}return Ve(e.uuids,(e=>{a(),we((()=>{t.emit("loaded",{reload:i})}))})),{state:n,reload:i,load:a}}});dl.render=function(e,t,n,i,a,o){const s=pe("render-jsx");return e.state.inited?(q(!0),Q(ee,{key:0},te(e.state.child,(e=>(q(),_e(s,{key:e.uuid,render:e.data},null,8,["render"])))),128)):ye("",!0)};let cl={inject:["dragxml"],data:()=>({}),methods:{zdrag__highlight_cls(e,t){let n=!1,i=this.dragxml.getCurrent();return i.origin&&i.origin[e]&&(n=t===i.origin[e]),n&&this.dragxml.highLight(this),{"z-drag-highlight":n}}}},pl={inject:["dragxml","draginit","cusDragXml"],mixins:[cl],emits:["move-enter"],props:{layout_uuid:String,uuid:String},data(){var e;return{ui_config_editor:null!=(e=this.dragxml.getConfig(this.uuid))?e:{ui:{widgetConfig:{}}},ui_cached:{common:{}},cus_ref:null,locked:!1}},computed:{form_config(){return this.cusDragXml&&this.cusDragXml.getFormConfig?this.cusDragXml.getFormConfig():{}},zdrag__form_config(){return this.cusDragXml&&this.cusDragXml.getFormConfig?this.cusDragXml.getFormConfig():{}},cus_config(){var e,t,n,i,a;let o=null!=(e=this.ui_config_editor)?e:{},s=Object.assign(l(r({},null!=(t=this.INIT_CONFIG)?t:{}),{ui:null!=(n=this.ui)?n:{widgetConfig:{}}}),null!=(i=this.self_config)?i:{}),u=ZY.lodash.merge(s,null!=(a=o.ins)?a:{});return u.server||(u.server={}),u.server.field_name||(u.server.field_name="field__"+ZY.rid(10)),this.locked?this.locked=!1:this.dragxml.onCusConfigChange(this.uuid,u),u}},methods:{zdrag__highlight(){return this.zdrag__highlight_cls("itemUUID",this.uuid)},get_cus_ref(e){this.cus_ref=e},onConfigChanged(e){let t=this.dragxml.getConfig(this.uuid);this.ui_config_editor=t},GET_CONFIG(e,t){return ZY.lodash.get(this.cus_config,e,t)},zdrag__GET_CONFIG(e,t){return ZY.lodash.get(this.cus_config,e,t)},onMouseEnter(e){this.dragxml.onMouseEnter(e)},onMouseLeave(e){},zdrag__onMouseEnter(e){this.dragxml.onMouseEnter(e)}},mounted(){this.dragxml.register(this.uuid,this),this.dragxml.emitter.on(this.dragxml.EVENTS.CHANGED,this.onConfigChanged)},beforeUnmount(){this.dragxml.unRegister(this.uuid),this.dragxml.emitter.off(this.dragxml.EVENTS.CHANGED,this.onConfigChanged)}};const _l={name:"ZLayoutInit",components:{RenderDom:dl,draggable:It},mixins:[cl],props:{dragEnter:null,column:{type:Number,default:1},columnLen:{type:Number,default:12},columnMax:{type:Number,default:1},uuid:String},setup(e,t){const n="dragenter";let i="init___"+ZY.rid(),a=ZY.lodash;function o(){let t=[];for(let n=0;n<e.columnLen;n++)t.push([]);return t}function s(){let t=[];for(let n=0;n<e.columnLen;n++)t.push({});return t}ZY.JSON5;let r=o(),l=getApp(),u=Le({doms:s(),defs:o(),uuids:s(),column:e.column,layoutUUID:ZY.rid()}),d=new Map;let c=Ze("dragxml");function p(e){c.onMouseEnter(e)}function _(e,t,n){return $e(e,{class:["render-dom-item",T+u.layoutUUID,I+n,M+t],layout_uuid:u.layoutUUID,uuid:t},Date.now())}function h(t=0){return"zdrag__"+e.uuid}function f(e){return document.getElementById(h(e))}function m(e){let n=f(e);new J(n,{name:"layoutinit_"+ZY.rid(),onEnd:function(n){we((()=>{!function(e=[],t=0){let n=u.defs[t],i=n.map((e=>e.itemUUID)),a=[];e.forEach((e=>{let t=i.findIndex((t=>t===e));t>-1&&a.push(n[t])})),u.defs[t]=a,we((()=>{g(t,a.map((e=>e.itemUUID)))}))}(function(e=0){let t=f(e);return Array.of(...t.children).map((e=>l.findUUIDfromClassList(e,M)))}(),e),t.emit("clear-index"),t.emit("drag-end",{columnIndex:e})}))}})}function g(e=0,t){let n=u.defs[e].map((e=>e.itemUUID));t&&(n=t),u.uuids[e].str=ZY.JSON5.stringify(n)}function b(n){return function(i,a){var o,s,r;let d=u.doms[n],c=u.defs[n],p={},h=null;if(i.methods&&i.methods.DRAG_CONFIG&&(h=i.methods.DRAG_CONFIG),i.DRAG_CONFIG&&(h=i.DRAG_CONFIG),!(c[0]&&(null==(s=null==(o=c[0])?void 0:o.com)?void 0:s.DRAG_SUB_FORM)&&(console.log("this has subform",i.DRAG_SUB_FORM),i.DRAG_SUB_FORM)))if(p=null!=(r=h())?r:{},c.length<e.columnMax){let o="z_layout_item__"+ZY.rid(10),s=_(i,o,n),r={layoutUUID:u.layoutUUID,attrs:{},itemUUID:o,con_uuid:e.uuid,com:i,config:p};if(c.length<1)c.push(r),d[o]=s;else if(a){let e=Array.of(...a.parentElement.children),t=l.findUUIDfromClassList(a),n=e.findIndex((e=>l.findUUIDfromClassList(e)===t));Number.isNaN(n)||(n<0?c.push(r):(n+=1,c.splice(n,0,r))),d[o]=s}else console.log(a);we((()=>{g(n),m(n),t.emit("changed")}))}else console.warn("超出限制",e.columnMax),t.emit("column-max-err")}}function y(){return Te(u.defs).filter((e=>e.length>0)).map(((e,t)=>({label:"column"+t,children:e})))}return Ye("draginit",{onMouseEnter(){let e=document.getElementById(i);e&&p({target:e})}}),{initId:i,state:u,onDragEnter:function(t,n){e.dragEnter&&e.dragEnter({append:b(t)})},toMemo:function(){return{defs:Te(u.defs),layoutUUID:u.layoutUUID,uuids:Te(u.uuids),column:Te(u.column)}},onMouseEnter:p,removeChild:function(e){u.defs.forEach(((t,n)=>{u.defs[n]=t.filter((t=>t.itemUUID!==e.itemUUID))})),u.doms.forEach(((t,n)=>{Reflect.deleteProperty(u.doms[n],e.itemUUID)})),console.log(e,u.doms,u.uuids),we((()=>{a.each(u.defs,(function(e,t){g(t),m(t)}))}))},fromMemo:function(e){u.layoutUUID=e.layoutUUID,u.defs=e.defs.map(((e,t)=>a.map(e,(function(e){return e})))),a.each(e.defs,(function(e,t){let n=u.doms[t];a.each(e,(function(e){let i=CustomVueComponent.resolve(e.com.name);n[e.itemUUID]=_(i,e.itemUUID,t)}))})),we((()=>{a.each(e.defs,(function(e,t){g(t),m(t)})),d.forEach((function(e){e&&e.reload&&e.reload()}))}))},appendColumn:function(){u.column=u.column+1},getColumnID:h,getUUIDS:function(e){return Array.isArray(u.defs[e])?u.defs[e].map((e=>e.itemUUID)):[]},onLoaded:function(e,i){r[e]=i;let a=f(e);m(e),function(e){let i=e.querySelector("[dragenter]");i&&i.removeAttribute(n),t.emit("clear-index")}(a)},getChildren:y,getFirstCom:function(e=0){var t;let n=y();return console.log(n,d),Array.isArray(null==(t=n[e])?void 0:t.children)?n[e].children[0]:null},onDragLeave:function(e){e.target.removeAttribute(n)},initRefs:function(e){return function(t){d.set(e,t)}},initGrid:function(e){b(0)(e)},findCom:function(e,t){let n=u.defs[t];if(n){let t=n.findIndex((t=>t.itemUUID===e));if(t>-1){return n[t]}}else console.log(e,t)}}}};_l.render=function(e,t,n,i,a,o){const s=pe("render-dom"),r=pe("el-col"),l=pe("el-row");return q(),_e(l,{class:ue(["z-drag-layout",e.zdrag__highlight_cls("layoutUUID",i.state.layoutUUID)]),"z-layout-uuid":i.state.layoutUUID,"z-uuid":n.uuid,"layout-dom":"layout-dom",id:i.initId},{default:he((()=>[(q(!0),Q(ee,null,te(i.state.column,((e,t)=>(q(),_e(r,{class:"z-drag-layout__item z-drag-layout__column",onDragleave:i.onDragLeave,onDragenter:Xe((e=>i.onDragEnter(t,e)),["prevent"]),id:i.getColumnID(t),"z-drag-layout__column":n.columnMax},{default:he((()=>[ge(s,{ref:i.initRefs(t),render:i.state.doms[t],uuids:i.state.uuids[t],onLoaded:e=>i.onLoaded(t,e)},null,8,["render","uuids","onLoaded"])])),_:2},1032,["onDragleave","onDragenter","id","z-drag-layout__column"])))),256))])),_:1},8,["z-layout-uuid","z-uuid","class","id"])};const hl={name:"ZCommonAttrs",emits:["common-change"],components:{ZRadioButtons:Ao},props:{value:null},setup(e,t){let n=r({common_state:"",common_desc:""},e.value),i=Le(n);return{onCommonChange:function(e){t.emit("common-change",Te(i))},state:i,commonOptions:[{label:"普通",value:""},{label:"只读",value:"readonly"},{label:"禁用",value:"disabled"},{label:"隐藏",value:"hidden"}]}}},fl=me("div",{class:"a-space-mr-10"},"描述",-1),ml=me("div",{class:"a-space-mr-10"},"状态",-1);hl.render=function(e,t,n,i,a,o){const s=pe("el-input"),r=pe("el-row"),l=pe("ZRadioButtons");return q(),Q("div",null,[ge(r,{align:"middle",type:"flex",class:"a-space-mb-15"},{default:he((()=>[fl,ge(s,{type:"textarea",modelValue:i.state.common_desc,"onUpdate:modelValue":t[0]||(t[0]=e=>i.state.common_desc=e),onChange:i.onCommonChange,style:{width:"350px"}},null,8,["modelValue","onChange"])])),_:1}),ge(r,{align:"middle",type:"flex",class:"a-space-mb-15"},{default:he((()=>[ml,ge(l,{size:"small",options:i.commonOptions,modelValue:i.state.common_state,"onUpdate:modelValue":t[1]||(t[1]=e=>i.state.common_state=e),onValChange:i.onCommonChange},null,8,["options","modelValue","onValChange"])])),_:1})])};const gl={name:"ZExportDialog",props:{buttonAttr:{type:Object,default:()=>({})},modalAttr:{type:Object,default:()=>({})}},data:()=>({showDialog:!1,form:{}}),methods:{toggleDialog(){this.showDialog=!0},exportFile(){this.$emit("exported",{form:this.form,toggleDialog:this.toggleDialog})}}},bl={class:"z-export-dialog"},yl=be("导出"),vl=be("确定");gl.render=function(e,t,n,i,a,o){const s=pe("el-button"),r=pe("el-input"),l=pe("el-form-item"),u=pe("el-form"),d=pe("el-dialog");return q(),Q("div",bl,[ge(s,se(n.buttonAttr,{onClick:o.toggleDialog}),{default:he((()=>[yl])),_:1},16,["onClick"]),ge(d,se({title:"导出选项",modelValue:a.showDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.showDialog=e),width:"450px"},n.modalAttr),{default:he((()=>[ge(u,{modelValue:a.form,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form=e)},{default:he((()=>[ge(l,{label:"文件名",prop:"fileName"},{default:he((()=>[ge(r,{modelValue:a.form.fileName,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.fileName=e)},null,8,["modelValue"])])),_:1}),ge(l,null,{default:he((()=>[ge(s,{type:"button",onClick:o.exportFile},{default:he((()=>[vl])),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue"])])),_:1},16,["modelValue"])])};const wl={name:"ZDragXml",components:{ZExportDialog:gl,ZEasyModal:w,ZCommonAttrs:hl,ZHttpCom:gs,ZLayoutInit:_l,RenderDom:dl,JsxRender:R,draggable:It,Location:We,Document:He,IconMenu:Ke,Setting:Je},props:{insVars:{type:Array,default:()=>[]}},setup(e){const t="z-uuid",n="playground__"+ZY.rid(6),i="test1__"+ZY.rid(6),a="test2__"+ZY.rid(6),o="test3__"+ZY.rid(6);let s=ZY.lodash,u=ZY.JSON5,d={},c=null,p=null,_=Le({components:[],filterList:"",isDragging:!1,disableDrag:!1,currentDragItem:{},cachedGridItem:null,layouts:[],layoutsMap:{},layoutRefs:{},uuids:[],comMemo:{}}),h=Le({type:"mobile",activeIndex:"2",defaultIndex:"2",spans:[7,10,7],maxCanvasHeight:"600px",menuConHeight:"600px",group:"people__"+ZY.rid(6)});let f=new Map,m=qe(),g={CHANGED:"CHANGED"},b=new Map,y={EVENTS:g,dragConfig:f,setConfig(e,t){f.set(e,t),m.emit(g.CHANGED,{key:e,value:t})},getConfig:e=>f.get(e),delConfig(e){f.delete(e)},hasConfig:e=>f.has(e),register(e,t){b.set(e,t),_.comMemo&&_.comMemo[e]&&t&&t.fromMemo&&(t.fromMemo(_.comMemo[e]),Reflect.deleteProperty(_.comMemo,e))},unRegister(e){b.delete(e)},get:e=>b.get(e),getCtxs:()=>b,emitter:m,onMouseEnter(e){let t=ee(e.target,"rect",{onMouseleave(e){A()}});A(t)},onMouseEnter2(e){let t=ee(e,"rect",{onMouseleave(e){A()}});A(t)},onCusConfigChange(e,t){let n=y.getConfig(e);n||(n={ins:{},common:{}}),n.ins=t,y.setConfig(e,n)},getCurrent(){var e;return null!=(e=v.current)?e:{}},highLight(e){setTimeout((()=>{let e=document.querySelectorAll(".z-drag-highlight");if(e){let t=Array.of(...e);!function(e){function t(){let t=ee(e,"rect",{onMouseleave(e){}});t.style.position="fixed",R(t)}t(),z=t}(t[t.length-1])}}),30)},onGridDragEnter(e){_.cachedGridItem=e},onGridDragleave(){_.cachedGridItem=null},reloadTree(){x()}};Ye("dragxml",y);let v=Le({data:[],defaultProps:{children:"children",label:"label"},current:{},showCurrent:!1,dragConfig:f,tplComponents:[]});function w(e=[]){return e.map((e=>(e.label=e.com.name,e.tree_id=e.itemUUID,e.id=e.itemUUID,e.com.DRAG_LABEL_XML&&(e.label_xml=e.com.DRAG_LABEL_XML()),e)))}function x(){v.data=function(){if(Array.isArray(_.layouts))return _.layouts.map((e=>{var t;let n=null,i=null==(t=_.layoutsMap[e.uuid])?void 0:t.el;if(i){let e=i.getChildren();if(e.length>0){let t=e.map((function(e){let t=e.children,n=[];if(Array.isArray(t)&&t.length>0){let e=t[0];if(e&&e.com&&e.com.DRAG_SUB_FORM){let i=w(t.slice(1));n=l(r({},e),{label:e.com.name,children:i}),e.com.DRAG_LABEL_XML&&(n.label_xml=e.com.DRAG_LABEL_XML())}else if(e&&e.com&&e.com.DRAG_GRID){n=w(t);let i=e.itemUUID,a=y.get(i);a&&(n[0].children=a.getTree())}else n=w(t)}return e.children=n,e}));n={label:"row",children:t},1===t.length&&(n=Array.isArray(t[0].children)?t[0].children[0]:t[0].children,n.tree_id=n.itemUUID,n.id=n.itemUUID)}}return n})).filter((e=>e));return[]}()}function C(e,t){return document.elementFromPoint(e,t)}function k(e=i){return function(t){let n=document.getElementById(e);n&&(n.innerHTML="",t&&n.appendChild(t))}}function E(e,t){var n,i,a;let o=u.parse(u.stringify(null!=(n=y.getConfig(e))?n:{}));o.ins&&o.ins.rules&&(o.ins.rules_json=o.ins.rules,o.ins.rules=u.parse(o.ins.rules),Reflect.deleteProperty(o.ins,"rulesArr")),o.ins&&o.ins.computedFunIns&&Reflect.deleteProperty(o.ins,"computedFunIns");let s=y.get(t.itemUUID);if(s&&s.DRAG_EXPORT){let e=null!=(i=s.DRAG_EXPORT())?i:{},t=null!=(a=o.ins)?a:{};o.ins=Qe(e,t)}return o}function O(e,t="field_"){let n=t+ZY.rid(10);return e.ins&&e.ins.server&&e.ins.server.field_name&&(n=e.ins.server.field_name),n}function S(e){return e.ins&&e.ins.ui&&Reflect.deleteProperty(e.ins,"ui"),e}function D(e=[],t,n=[],i={}){let a=ZY.getObjPathFromPathArr(n),o=ZY.deepGet(t.res,a);s.each(e,(function(e,a){var s;let l=e.itemUUID;if(e.DRAG_GRID_ITEM){if(Array.isArray(e.children)){let t=e.children.find((e=>e.gridItemUUID===l));if(t){let e=E(l);i.isServer&&(e=S(e)),l=t.itemUUID;let n=E(l);i.isServer&&(n=S(n)),o[l]=r({type:"string",wrap:"z-drag-grid-item",wrap_config:null!=(s=null==e?void 0:e.ins)?s:{}},n.ins)}}}else{if(!l)return;let a=e.com;if(Array.isArray(e.children)&&e.children.length>0||a&&a.DRAG_SUB_FORM){let a=E(l,e);i.isServer&&(a=S(a));let s=O(a,"subform__"),u={};o[s]=r({type:"object",properties:u},a.ins),t.pathArr=n.concat([s,"properties"]),D(e.children,t,t.pathArr,i)}else{let t=E(l,e);i.isServer&&(t=S(t));let n=O(t);o&&(o[n]=r({type:"string"},t.ins))}}}))}let A=k(),M=k(a),R=k(o),V=getApp(),z=null;function P(e){document.querySelector(".z-drag-highlight")||R()}function U(e){return _.components.filter((t=>t.DRAG_GROUP===e))}window.addEventListener("resize",(function(){z&&z()})),_.components=[...V.get_custom_components((function([e,t]){return t.ZDragXmlCom})).map((e=>{var t;let n={};e.origin&&e.origin.DRAG_DATASET&&(n=e.origin.DRAG_DATASET());let i=null!=(t=e.label)?t:"";return e.origin&&e.origin.DRAG_LABEL_XML&&(i=e.origin.DRAG_LABEL_XML()),r({name:e.value,DRAG_GROUP:e.origin.DRAG_GROUP,label:i},n)}))],v.tplComponents[0]={label:"基础控件",components:U()},v.tplComponents[1]={label:"高级控件",components:U("high")};let j=null;function G(e){let t=CustomVueComponent.resolve(e.name),n=ZY.rid(),i=parseFloat(e.columnMax);return Number.isNaN(i)||(e.columnMax=i),{uuid:n,columnMax:i,comName:e.name,dataset:e,com:t}}function Z(){let e=W();if(e){let n=Array.of(...e.children);if(n.length>1){let e=n.slice(1).filter((e=>!0)).map((e=>e.getAttribute(t)));return _.uuids=e,e}return[]}return[]}let F,B="drag-level"+ZY.rid(6);function Y(){let e=W();new J(e,{group:B,onEnd:function(e){A(),M(),function(){let e=Z(),t=u.parse(u.stringify(_.layouts)),n=[];e.forEach((e=>{let i=t.findIndex((t=>t.uuid===e));i>-1&&n.push(t[i])})),_.layouts=n}(),we((()=>{x()}))}})}function X(){let e=[];return y.dragConfig.forEach((t=>{var n,i;if(t.ins&&t.ins.ui&&t.ins.ui.label){let a=null==(i=null==(n=t.ins)?void 0:n.server)?void 0:i.field_name;a&&e.push([t.ins.ui.label,"xy-text",`val="MODEL('${a}')"`])}})),e}function $(e){v.current={origin:e,uuid:e.itemUUID,ext:{}},v.showCurrent=!1,setTimeout((()=>{v.showCurrent=!0}),300)}function W(){return document.getElementById(n)}function H(e){M(),function(e){let t=_.layoutsMap[e.uuid];if(t&&t.el){let n=CustomVueComponent.resolve(e.dataset.name);t.el.initGrid(n)}}(e),Y(),Z()}function K(e){return e.classList.contains("render-dom-item")?e:e.parentElement?K(e.parentElement):null}function q(e){return e.hasAttribute("layout-dom")?e:null}let Q=null;function ee(e,t,n={}){var i;if("line"===t&&e&&e.parentElement&&e.parentElement&&e.parentElement.hasAttribute("z-drag-layout__column")){parseInt(e.parentElement.getAttribute("z-drag-layout__column"))<2&&(e=e.parentElement.parentElement)}let a=document.createElement("div"),o=getComputedStyle(e),s=parseFloat(o.marginBottom),r=parseFloat(o.marginTop),l=e.getBoundingClientRect();if(a.setAttribute("data-type",t),a.style.position="fixed",a.style.left=l.left+"px",a.style.width=l.width+"px",a.style.zIndex=111,"line"===t)a.style.top=l.top+l.height+"px",a.style.height="1px";else if("rect"===t){a.style.top=l.top-r+"px",a.style.height=l.height+r+s+1+"px",a.addEventListener("mouseleave",(function(e){n&&n.onMouseleave&&n.onMouseleave(e)}));let t=document.createElement("button");t.textContent="编辑",t.addEventListener("click",(function(){if(e.hasAttribute("z-uuid")){let t=e.getAttribute("z-uuid"),n=_.layoutsMap[t];if(n&&n.el){let e=n.el.getChildren();e[0]&&e[0].children[0]&&$(e[0].children[0])}}else if(e.hasAttribute("z-drag-grid-item")){let t=e.dataset,n=t.gridId,i=y.get(n);if(i){let e=i.getDom(t.key);e&&$(e.def)}}else{let t=V.findUUIDfromClassList(e),n=V.findUUIDfromClassList(e,T),i=V.findUUIDfromClassList(e,I),a=_.layoutRefs[n];a&&(Q=a.findCom(t,i),Q.con_uuid&&$(Q))}}));let o=document.createElement("button");o.textContent="删除",o.addEventListener("click",(function(){if(e.hasAttribute("z-uuid"));else if(e.hasAttribute("z-drag-grid-item"));else{let n=V.findUUIDfromClassList(e),i=V.findUUIDfromClassList(e,T),a=V.findUUIDfromClassList(e,I),o=_.layoutRefs[i];o&&(Q=o.findCom(n,a),console.log(Q),(t=Q.itemUUID)&&y.delConfig(t),ie(Q.con_uuid))}var t}));let u=function(e){if(e.hasAttribute("z-uuid")){let t=e.getAttribute("z-uuid"),n=_.layoutsMap[t];if(n&&n.el){let e=n.el.getChildren();if(e[0]&&e[0].children[0])return e[0].children[0]}}else if(e.hasAttribute("z-drag-grid-item")){let t=e.dataset,n=t.gridId,i=y.get(n);if(i){let e=i.getDom(t.key);if(e)return e.def}}else{let t=V.findUUIDfromClassList(e),n=V.findUUIDfromClassList(e,T),i=V.findUUIDfromClassList(e,I),a=_.layoutRefs[n];if(a&&(Q=a.findCom(t,i),Q.con_uuid))return Q}}(e),d=document.createElement("div");d.className="inspect-label",d.innerHTML=null!=(i=u.label_xml)?i:u.label,a.append(t,o,d)}return a.setAttribute("current-to-move",t),a}function te(e,t="line",{actionFun:n=A,findDom:i=K,options:a={}}={}){let o=W();p=C(e.clientX,e.clientY);let s=null;if(p)if(p&&o.contains(p)&&(s=i(p)),p.hasAttribute("z-drag-start")){n(ee(p,t,a))}else if(s){n(ee(s,t,a))}else n()}function ne(e){e&&e.itemUUID&&y.delConfig(e.itemUUID)}function ie(e,t={}){let n=_.layouts.findIndex((t=>t.uuid===e));if(n>-1){let t=_.layoutsMap[e].layoutUUID;Reflect.deleteProperty(_.layoutRefs,t),Reflect.deleteProperty(_.layoutsMap,e),_.layouts.splice(n,1),Z(),x()}}function ae(){let e={state:{layouts:Te(_.layouts),uuids:Te(_.uuids)},defs:{}};e.treeState={data:Te(v.data)},e.dragConfig=u.stringify([...Te(v.dragConfig)]),s.each(_.layoutsMap,(function(t,n){let i=t.el.toMemo();e.defs[n]=i}));let t=y.getCtxs();return e.comMemo={},t.forEach((function(t,n){t.toMemo&&(e.comMemo[n]=t.toMemo())})),e}function oe(e={}){ZY.lodash.each(e.state,(function(e,t){_[t]=e})),ZY.lodash.each(e.treeState,(function(e,t){v[t]=e})),_.comMemo=e.comMemo,we((()=>{s.each(e.defs,((e,t)=>{let n=_.layoutsMap[t];n&&n.el&&n.el.fromMemo(e)}));try{new Map(u.parse(e.dragConfig)).forEach(((e,t)=>{y.setConfig(t,e)}))}catch(t){console.error(t)}}))}return Ne((()=>{new MutationObserver(P).observe(W(),{attributes:!0,subtree:!0,childList:!0})})),{list1ItemCls:function(e){return{"list-group-item--hidden":!e.name.includes(_.filterList)}},selectTree:function(){},initTreeRef:function(e){},state:_,getRef:function(e){},getTplComponents:U,playgroundId:n,onDropStart:function(e){_.isDragging=!0,_.disableDrag=!0,_.currentDragItem=e.item},importData:oe,exportFile:async function({form:e,toggleDialog:t}){let n=ae(),i="dragxml_export";e.fileName&&(i=e.fileName),ZY_EXT.saveDesignFile({fileName:i,data:n})},importFile:async function(){let e=await ZY_EXT.fileOpenJSON5();if(e.data){oe(e.data)}},downloadJSON:async function(e){let t=ZY.JSON5.parse(ZY.JSON5.stringify(e));await ZY_EXT.saveJSONFile({data:t,prefix:"z_drag_form__"})},initRef:function(e){return function(t){t&&(_.layoutsMap[e.uuid]={el:t,layoutUUID:t.state.layoutUUID},_.layoutRefs[t.state.layoutUUID]=t)}},onDragMove:function(e){te(e),te(e,"line",{actionFun:M,findDom:q})},onLayoutSelfDragEnter:function(e){},onLayoutDragEnter:function(e){j=e},onChangedLayout:function(){x()},onDragEnd:function(){x()},onClearIndex:function(){A()},getMemo:ae,testId1:i,testId2:a,testId3:o,onSelectList:function(e){var t,n;let i=null!=(n=null==(t=null==v?void 0:v.current)?void 0:t.uuid)?n:"";if(i){y.get(i).setVal(e.origin.value)}},onSelectChecked:function(e){var t,n,i;let a=null!=(n=null==(t=null==v?void 0:v.current)?void 0:t.uuid)?n:"";if(a){let t=y.get(a),n=null!=(i=e.origin.options)?i:[];Array.isArray(n)&&(n=n.map((e=>e.value))),t.setVal(n)}},onDropEnd:function(e){var n,i;let a=W();_.isDragging=!1,d=e.originalEvent;let o=null!=(i=null==(n=null==e?void 0:e.item)?void 0:n.dataset)?i:{};if(_.cachedGridItem)return void function(e){let{e:t,itemKey:n,context:i}=_.cachedGridItem;if(t.target,i.$el,e.name){let t=CustomVueComponent.resolve(e.name);t.DRAG_GRID||(i.initDomCom(n,t),we((()=>{x()})))}}(o);if(c=C(d.clientX,d.clientY),!c)return;let s=CustomVueComponent.resolve(o.name),r=G(o);if(c.hasAttribute("z-drag-start"))return _.layouts.unshift(r),void we((()=>{H(r),A()}));if(a.isEqualNode(c))return _.layouts.push(r),void we((()=>{H(r)}));if(c.hasAttribute(t)){let e=c.getAttribute(t),n=_.uuids.findIndex((t=>t===e));if(n>-1){let e=n+1;_.layouts.splice(e,0,r),we((()=>{H(r)}))}return}let l=null;if(a.contains(c)&&(l=K(c)),l&&l.parentElement&&l.parentElement.hasAttribute("z-drag-layout__column")){if(parseInt(l.parentElement.getAttribute("z-drag-layout__column"))<2){!function(e,t){let n=_.uuids.findIndex((t=>t===e));if(n>-1){let e=n+1,i=_.layouts.length;_.layouts.splice(e,0,t),we((()=>{H(t),e>i-1&&setTimeout((()=>{F.setScrollTop(F.wrap.scrollHeight)}),300)}))}}(l.parentElement.parentElement.getAttribute(t),r)}}j&&(console.log(j,s,l),j.append(s,l))},onMouseMove:function(e){let t=document.getElementById(i),n=W();p=C(e.clientX,e.clientY),p&&n.contains(p)||t.contains(p)||t.children&&t.children.length>0&&A()},treeState:v,getZprops:function(e=!1){let t={res:{},config:v.dragConfig,pathArr:[""],pathMap:{}},n={type:"object",ui:{styles:[],widgetConfig:{}},properties:{}};return Array.isArray(v.data)&&(D(v.data,t,[],{isServer:e}),n.properties=t.res),n},initScrollRef:function(e){F=e},removeTreeNode:function(e,t){var n,i,a;let{com:o={}}=t;if(o.DRAG_SUB_FORM)s.each(e.childNodes,(e=>{ne(e.data)})),ne(t),ie(t.con_uuid,t);else if(e.parent&&(null==(i=null==(n=e.parent.data)?void 0:n.com)?void 0:i.DRAG_SUB_FORM))ne(t),function(e,t={}){let n=_.layoutsMap[e];n&&n.el&&n.el.removeChild&&n.el.removeChild(t),x()}(t.con_uuid,t);else if(e.parent&&(null==(a=e.parent.data)?void 0:a.DRAG_GRID_ITEM)){let n=e.parent.data,i=y.get(n.GRID_UUID);i&&(i.clearGridItem(t.gridItemUUID),v.current.uuid===t.uuid&&(v.current={}),we((()=>{x()})))}else ne(t),ie(t.con_uuid,t);v.current.uuid&&(y.hasConfig(v.current.uuid)||(v.current={}))},toolState:h,handleMenuSelect:(e,t)=>{h.activeIndex=e},handleMenuClose:(e,t)=>{},resolveConfig:async function(){var e,t,n,i,a,o,s,u,d,c,p,_,h;let f=v.current,m=f.origin,g=f.uuid,b=m.com;v.current.com_name=b.name,v.current.com_xml=null!=(n=null==(t=null==(e=v.current)?void 0:e.origin)?void 0:t.label_xml)?n:b.name,(null==(o=null==(a=null==(i=null==v?void 0:v.current)?void 0:i.origin)?void 0:a.com)?void 0:o.DRAG_LABEL_XML)&&(v.current.com_xml=null==(d=null==(u=null==(s=null==v?void 0:v.current)?void 0:s.origin)?void 0:u.com)?void 0:d.DRAG_LABEL_XML());let w={disabled:L("禁用"),readonly:L("只读"),css_style:{type:"string",computedProp:"ui_css",ui:{styles:[["height",0],["overflow","hidden"]],widgetConfig:{type:"textarea",readonly:!0}}}};if(b.DRAG_CONFIG){let e=null!=(c=b.DRAG_CONFIG())?c:{};w=Object.assign(w,e.props)}let x=y.get(g),C={};x.DRAG_UI_CONFIG&&(C=null!=(p=x.DRAG_UI_CONFIG())?p:{}),x&&x.DRAG_CONFIG&&(w=Object.assign(w,null==(_=x.DRAG_CONFIG())?void 0:_.props));let k={type:{type:"string",wrap_start:'<xy-tab-content label="常见">',ui:{label:"类型",widget:"CusSuggest",widgetConfig:{enums:"ROOT_STATE('tools.propTypes', [])",mode:"select",readonly:!0},events:{}}},sub_type:{type:"string",ui:{label:"子类型",widget:"CusSuggest",widgetConfig:{enums:"ROOT_GETTERS('subTypes', [MODEL('type', '')])",mode:"select"},events:{}}},computedFun:{type:"string",computedProp:"get_computedFunIns",ui:{attrs:[["style","height: 0; overflow: hidden"]],widgetConfig:{type:"textarea",readonly:!0}}},computedFunIns:{type:"string",ui:{label:"计算属性",widget:"CusInsert",widgetConfig:{insText:[],insFun:["MODEL",...Object.keys(globalThis.COM_FORM_COMMON_EVAL_FUNS)],insVars:X()}}}},E=CustomVueComponent.resolve(b.name);E.DRAG_DEFAULT_VAL&&(k.defaultVal=E.DRAG_DEFAULT_VAL());let O={type:"object",ui:{label:"UI"},properties:l(r({label:{type:"string",ui:{label:"标题"}},desc:{type:"string",ui:{label:"描述",widgetConfig:{type:"textarea"}}},hiddenLabel:L("隐藏标题")},C),{widgetConfig:{type:"object",ui:{label:"UI 配置"},properties:w}})},S={type:"object",wrap_start:'<xy-tab-content label="高级">',wrap_end:"</xy-tab-content>",ui:{label:"服务器"},properties:{field_name:{type:"string",ui:{widgetConfig:{readonly:!0}}}}},D={rules:{type:"string",computedProp:"srules",ui:{attrs:[],label:"验证规则",widgetConfig:{type:"textarea",disabled:!0}}},rulesArr:{type:"array",ui:{label:"校验规则"},wrap_end:"</xy-tab-content>",items:{type:"object",properties:{value:{type:"string",ui:{form_item:{labelWidth:"0px"},label:" ",widget:"CusFormRules",widgetConfig:{}}}}}}},A=l(r({},k),{ui:O});b.DRAG_GRID||(A=l(r(l(r({},k),{ui:O}),D),{server:S,css:{type:"string",wrap_start:'<xy-tab-content label="样式">',wrap_end:"</xy-tab-content>",ui:{label:"",widget:"CusStyleEditor",hiddenLabel:!0,form_item:{labelWidth:"0px"},widgetConfig:{}}}}));let T={srules:"A.getRulesFromRulesArr(MODEL('rulesArr'))",get_computedFunIns:"A.get_computedFunIns(MODEL('computedFunIns'))",ui_css:"A.getui_css(MODEL('css'))"},I={type:"object",tag:"xy-tab",ui:{attrs:[["label-width","100px"]]},properties:A},M=y.getConfig(v.current.uuid);return{default:ws(I,T,N({ui:{widgetConfig:{}},server:{}},null!=(h=null==M?void 0:M.ins)?h:{}))}},get_current_config:function(e,t){let n=y.getConfig(v.current.uuid),i=null!=n?n:{};return ZY.deepGet(i,e,t)},onCommonModelChange:function(e){v.current.ext=e;let t=y.getConfig(v.current.uuid);t?(t.common,t.common=e,y.setConfig(v.current.uuid,t)):y.setConfig(v.current.uuid,{ins:{},common:e})},onModelChange:function(e){var t;let n=null!=(t=e.model)?t:{};y.setConfig(v.current.uuid,{ins:n,common:v.current.ext})},onMouseLeave:function(){},handleNodeClick:function(e){let{config:t={}}=e;if(v.current={origin:e,uuid:e.itemUUID,ext:{}},v.showCurrent=!1,setTimeout((()=>{v.showCurrent=!0}),300),t.com){let e=CustomVueComponent.resolve(t.com);v.current.cusEditor=e.CUS_EDITOR()}}}}},xl=be(" 标题"),Cl=be("打开数据展示"),kl=be("下载json5"),El=be("导入"),Ol=be("大纲树"),Sl=be("组件库"),Dl={style:{flex:"1"}},Al=["innerHTML"],Tl={hidden:""},Il=be(" 删除 "),Ml=["innerHTML"],Rl=["id","type"],Ll=me("div",{style:{height:"1px"},"z-drag-start":""}," ",-1),Nl=["innerHTML"],Vl=["id"],zl=["id"],Pl=["id"];function Ul(){let e=ZY.lodash;function t(n={},{obj:i={},path:a=[],keys:o=[]}={}){if("object"===n.type)e.each(n.properties,(function(e,n){t(e,{obj:i,path:a.concat(["properties",n]),keys:o})}));else if("array"===n.type);else{let t=ZY.getObjPathFromPathArr(a),s=e.pick(n,o);e.set(i,t,s)}}function n(e={},n=[]){let i={};return t(e,{obj:i,path:[],keys:n}),i}return{saveJson:async function(e="",t="",{headers:i={},newProps:a={},oldProps:o={},tableName:s="",data:l={}}={}){const u=["type","sub_type","rules"];let d=n(o,u),c=n(a,u),p=ZY.detailedDiff(d,c);try{let n=new File([e],t,{type:"text/plain"}),a=new File([ZY.JSON5.stringify(p)],t,{type:"text/plain"}),o=new FormData;return o.append("tableName",s),o.append("file",n),o.append("diffed",a),l&&Object.entries(l).forEach((([e,t])=>{o.append(e,t)})),(await Req.post("/api/zy-boot/json/json5",o,{headers:r({"Content-Type":"multipart/form-data;charset=UTF-8"},i)})).data}catch(_){return console.log("saveJson err",_),Promise.reject(_)}}}}wl.render=function(e,t,n,i,a,o){const s=pe("el-col"),r=pe("el-radio-button"),l=pe("el-radio-group"),u=pe("el-row"),d=pe("el-button"),c=pe("v-json-viewer"),p=pe("z-easy-modal"),_=pe("z-export-dialog"),h=pe("document"),f=pe("el-icon"),m=pe("el-menu-item"),g=pe("icon-menu"),b=pe("el-menu"),y=pe("el-tree"),v=pe("el-scrollbar"),w=pe("draggable"),x=pe("z-layout-init"),C=pe("z-http-com");return q(),Q("div",{class:"z-drag-xml",onMousemove:t[4]||(t[4]=(...e)=>i.onMouseMove&&i.onMouseMove(...e))},[ge(u,{class:"a-space-mb-10",justify:"space-between",align:"middle"},{default:he((()=>[ge(s,{span:i.toolState.spans[0]},{default:he((()=>[ie(e.$slots,"title"),xl])),_:3},8,["span"]),ge(s,{span:i.toolState.spans[1]},{default:he((()=>[ge(u,{justify:"center"},{default:he((()=>[ge(l,{size:"small",modelValue:i.toolState.type,"onUpdate:modelValue":t[0]||(t[0]=e=>i.toolState.type=e)},{default:he((()=>[ge(r,{label:"mobile"}),ge(r,{label:"responsive"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["span"]),ge(s,{span:i.toolState.spans[2]},{default:he((()=>[ge(u,{style:{flex:"1"},justify:"end",align:"middle"},{default:he((()=>[ge(p,{title:"数据展示",buttonAttr:{size:"small"},"model-attr":{width:"60vw"}},{"button-content":he((()=>[Cl])),default:he((()=>[ge(d,{class:"a-space-mb-10",onClick:t[1]||(t[1]=e=>i.downloadJSON(i.getZprops()))},{default:he((()=>[kl])),_:1}),ge(c,{"expand-depth":10,expanded:!0,boxed:"",value:i.getZprops(!1)},null,8,["value"])])),_:1}),ge(_,{class:"a-space-ml-10","button-attr":{size:"small"},onExported:i.exportFile},null,8,["onExported"]),ge(d,{class:"a-space-ml-10",size:"small",onClick:i.importFile},{default:he((()=>[El])),_:1},8,["onClick"])])),_:1})])),_:1},8,["span"])])),_:3}),ge(u,null,{default:he((()=>[ge(s,{span:i.toolState.spans[0]},{default:he((()=>[ge(u,{class:"a-space-mb-10",style:{"min-height":"30vh"}},{default:he((()=>[ge(b,{"default-active":i.toolState.defaultIndex,class:"el-menu-vertical-demo",collapse:!0,onSelect:i.handleMenuSelect},{default:he((()=>[ge(m,{index:"1"},{title:he((()=>[Ol])),default:he((()=>[ge(f,null,{default:he((()=>[ge(h)])),_:1})])),_:1}),ge(m,{index:"2"},{title:he((()=>[Sl])),default:he((()=>[ge(f,null,{default:he((()=>[ge(g)])),_:1})])),_:1})])),_:1},8,["default-active","onSelect"]),me("div",Dl,[re(ge(v,{height:i.toolState.menuConHeight},{default:he((()=>[ge(y,{"default-expand-all":"",class:"custom-tree",data:i.treeState.data,props:i.treeState.defaultProps,"node-key":"id",onNodeClick:i.handleNodeClick,"expand-on-click-node":!1,ref:i.initTreeRef},{default:he((({node:e,data:t})=>[ge(u,{justify:"space-between",class:"custom-tree-node"},{default:he((()=>[ge(u,{align:"middle"},{default:he((()=>[t.label_xml?(q(),Q("div",{key:0,innerHTML:t.label_xml},null,8,Al)):ye("",!0),t.label_xml?ye("",!0):(q(),Q(ee,{key:1},[be(Ie(t.label),1)],64)),me("div",Tl,Ie(t.tree_id),1)])),_:2},1024),t.NOT_ACTION?ye("",!0):(q(),_e(u,{key:0,align:"middle"},{default:he((()=>[ge(d,{size:"mini",type:"danger",onClick:Xe((n=>i.removeTreeNode(e,t)),["stop"])},{default:he((()=>[Il])),_:2},1032,["onClick"])])),_:2},1024))])),_:2},1024)])),_:1},8,["data","props","onNodeClick"])])),_:1},8,["height"]),[[le,"1"===i.toolState.activeIndex]]),re(ge(v,{height:i.toolState.menuConHeight},{default:he((()=>[(q(!0),Q(ee,null,te(i.treeState.tplComponents,((e,t)=>(q(),Q(ee,null,[me("h5",null,Ie(i.treeState.tplComponents[t].label),1),ge(w,{class:"dragArea g-list-group",modelValue:i.treeState.tplComponents[t].components,"onUpdate:modelValue":e=>i.treeState.tplComponents[t].components=e,onStart:i.onDropStart,onEnd:i.onDropEnd,group:{name:i.toolState.group,pull:"clone",put:!1},sort:!1,"item-key":"id",tag:"el-row",style:{"align-items":"flex-start","flex-wrap":"wrap"}},{item:he((({element:e})=>[ge(s,{class:ue(["g-list-group-item",i.list1ItemCls(e)]),span:12,"data-name":e.name,"data-column-max":e.columnMax},{default:he((()=>[me("div",{class:"g-list-group-item__element",innerHTML:e.label},null,8,Ml)])),_:2},1032,["class","data-name","data-column-max"])])),_:2},1032,["modelValue","onUpdate:modelValue","onStart","onEnd","group"])],64)))),256))])),_:1},8,["height"]),[[le,"2"===i.toolState.activeIndex]])])])),_:1})])),_:1},8,["span"]),ge(s,{span:i.toolState.spans[1]},{default:he((()=>[ge(v,{"max-height":i.toolState.maxCanvasHeight,ref:i.initScrollRef},{default:he((()=>[me("div",{id:i.playgroundId,class:"playground",type:i.toolState.type,"data-index":"-1",onDragover:t[2]||(t[2]=(...e)=>i.onDragMove&&i.onDragMove(...e)),onMouseleave:t[3]||(t[3]=(...e)=>i.onMouseLeave&&i.onMouseLeave(...e))},[Ll,(q(!0),Q(ee,null,te(i.state.layouts,((e,t)=>(q(),_e(x,{"z-uuid":e.uuid,uuid:e.uuid,key:e.uuid,column:1,ref:i.initRef(e),"column-max":e.columnMax,onDragenter:Xe(i.onLayoutSelfDragEnter,["prevent"]),"drag-enter":i.onLayoutDragEnter,onClearIndex:i.onClearIndex,onColumnMaxErr:i.onClearIndex,onChanged:t=>i.onChangedLayout(e,t),onDragEnd:t=>i.onDragEnd(e,t),onMouseleave:Xe(i.onMouseLeave,["stop"]),style:ne(e.style),class:ue(e.class)},null,8,["z-uuid","uuid","column-max","onDragenter","drag-enter","onClearIndex","onColumnMaxErr","onChanged","onDragEnd","onMouseleave","style","class"])))),128))],40,Rl)])),_:1},8,["max-height"])])),_:1},8,["span"]),ge(s,{span:i.toolState.spans[2]},{default:he((()=>[i.treeState.current&&i.treeState.current.uuid&&i.treeState.showCurrent?(q(),Q(ee,{key:0},[me("div",{innerHTML:i.treeState.current.com_xml},null,8,Nl),ge(v,{height:"60vh"},{default:he((()=>[ge(C,{"resolve-config":i.resolveConfig,"onHttp:model:change":i.onModelChange,onSelectList:i.onSelectList,onSelectChecked:i.onSelectChecked},null,8,["resolve-config","onHttp:model:change","onSelectList","onSelectChecked"])])),_:1})],64)):ye("",!0)])),_:1},8,["span"])])),_:1}),me("div",{class:"debug-tool1",id:i.testId1},null,8,Vl),me("div",{class:"debug-tool2",id:i.testId2},null,8,zl),me("div",{class:"debug-tool3",id:i.testId3},null,8,Pl)],32)};var jl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",useToolApi:Ul});const Gl={name:"CusDragXml",components:{ZEasyModal:w,ZDragXml:wl},mixins:[f],setup(e,t){e.defs;let n=ZY.JSON5,i=Ze("CusFormExpose"),a={},o=ZY.rid(),s="{}";Ye("cusDragXml",{getFormConfig:()=>Object.assign({vertical:null},a)});let r={},{data:l,methods:u,listeners:d,init:c,widgetConfig2:p,buildGetRef:_,getRef:h,curFormCon:f}=m(e,t,{handleValueInit:function(e){e||(e="{}");e&&(r=n.parse(e));return e}}),g=l({insVars:[]});c(e);let b=_("main");function y(){let e=n.stringify(r);g.value=e,u.on_change(e)}let v=Ul();async function w(){let e=h("main");return e&&e.getZprops&&(r.props=e.getZprops(),r.memos=e.getMemo(),r.oldProps=n.parse(s).props,y()),r}let x={onChange:y,drag_xml_uuid:o,state:g,mainRef:b,onClosed:function(e){f.callPageEvent("dragxml:closed",{save:w},e)},save:w,onOpened:function(){let e={},t=h("main");if(s=n.stringify(r),g.insVars=[["爱你11","xy-text","val=\"MODEL('field__cov27IMEbX')\""]],i&&i.getPartModel){e=i.getPartModel();let t=n.parse(e.ui);Array.isArray(t.attrs)&&(a=Object.fromEntries(t.attrs))}t&&t.importData(r.memos)},saveData:async function(){let e,t=n.parse(s);t.metas&&(e=t.metas.form_data);let i=h("main");return r.props=i.getZprops(),r.memos=i.getMemo(),r.oldProps=t.props,r.metas={},r.metas.form_data=await v.saveJson(n.stringify(r.props),o+".json5",{newProps:r.props,oldProps:r.oldProps,tableName:e}),y(),r},widgetConfig:p,methods:u,listeners:d};return Ne((()=>{let e=Ze("formPage");e&&e.registerCom(o,x)})),x}},Zl=be("编辑"),Fl=be("更新表结构");Gl.render=function(e,t,n,i,a,o){const s=pe("z-drag-xml"),r=pe("el-button"),l=pe("el-row"),u=pe("z-easy-modal");return e.inited?(q(),Q(ee,{key:0},[e.state.OPT.widgetConfig&&e.state.OPT.widgetConfig.flat?(q(),_e(s,{key:0,"ins-vars":e.state.insVars,ref:e.mainRef},null,8,["ins-vars"])):(q(),_e(u,{key:1,title:"编辑",onOpened:e.onOpened,onClosed:e.onClosed,modelAttr:{width:"96vw",appendToBody:!0,top:"10vh",modalClass:"el-dialog--no-modal"},"button-attr":{size:"small"}},{"button-content":he((()=>[Zl])),default:he((()=>[e.state.OPT.widgetConfig&&e.state.OPT.widgetConfig.hiddenAction?(q(),Q(ee,{key:0},[],64)):(q(),_e(l,{key:1},{default:he((()=>[ge(r,{type:"primary",size:"small",onClick:e.saveData},{default:he((()=>[Fl])),_:1},8,["onClick"])])),_:1})),ge(s,{"ins-vars":e.state.insVars,ref:e.mainRef},null,8,["ins-vars"])])),_:1},8,["onOpened","onClosed"]))],64)):ye("",!0)};const Bl={name:"ZDragInput",components:{CusInput:V},ZDragXmlCom:!0,mixins:[pl],DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636083425081" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2423" width="16" height="16"><path d="M118.784 727.04h778.24V296.96h-778.24v430.08zM77.824 256h860.16v512H77.824V256zM194.56 409.6v204.8c0 12.288 8.192 20.48 20.48 20.48s20.48-8.192 20.48-20.48V409.6c0-12.288-8.192-20.48-20.48-20.48s-20.48 8.192-20.48 20.48z" p-id="2424"></path></svg>\n<div class="z-dragxml-label__name">单行输入框</div>\n</div>',DRAG_DEFAULT_VAL:()=>({type:"string",ui:{label:"默认值"}}),methods:{DRAG_CONFIG(){var e;return null!=(e=V.CUS_EDITOR())?e:{props:{}}},DRAG_EXPORT:()=>({ui:{widget:"CusInput"}})},data:()=>({id:ZY.rid(6),INIT_CONFIG:{type:"string"},ui:{label:"单行文本",widgetConfig:{}}})};Bl.render=function(e,t,n,i,a,o){const s=pe("cus-input"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com z-dragxml-input",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const Yl={name:"ZDragTextarea",components:{CusInput:V},ZDragXmlCom:!0,mixins:[pl],DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1637649571774" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3435" width="16" height="16"><path d="M983.04 0H40.96A40.96 40.96 0 0 0 0 40.96v942.08c0 22.613333 18.346667 40.96 40.96 40.96h942.08a40.96 40.96 0 0 0 40.96-40.96V40.96a40.96 40.96 0 0 0-40.96-40.96z m-51.2 931.84H92.16V92.16h839.68v839.68z" p-id="3436"></path><path d="M789.162667 305.749333H229.888c-3.157333 0-5.717333 3.669333-5.717333 8.106667v65.28c0 4.437333 2.56 8.106667 5.717333 8.106667h559.274667c3.157333 0 5.717333-3.669333 5.717333-8.106667v-65.28c0-4.437333-2.56-8.106667-5.717333-8.106667z m0 326.058667H229.888c-3.157333 0-5.717333 3.669333-5.717333 8.192v65.194667c0 4.522667 2.56 8.192 5.717333 8.192h559.274667c3.157333 0 5.717333-3.669333 5.717333-8.192V640c0-4.522667-2.56-8.192-5.717333-8.192z m0-162.986667H229.888c-3.157333 0-5.717333 3.669333-5.717333 8.106667v65.28c0 4.437333 2.56 8.106667 5.717333 8.106667h559.274667c3.157333 0 5.717333-3.669333 5.717333-8.106667v-65.28c0-4.437333-2.56-8.106667-5.717333-8.106667z" p-id="3437"></path></svg>\n<div class="z-dragxml-label__name">多行输入框</div>\n</div>',DRAG_DEFAULT_VAL:()=>({type:"string",ui:{label:"默认值"}}),data:()=>({id:ZY.rid(6),ui:{label:"多行文本",widgetConfig:{type:"textarea"}}}),methods:{DRAG_CONFIG(){var e;let t=null!=(e=V.CUS_EDITOR())?e:{props:{}};return Reflect.deleteProperty(t.props,"type"),t},DRAG_EXPORT:()=>({INIT_CONFIG:{type:"string"},ui:{widget:"CusInput"}})}};Yl.render=function(e,t,n,i,a,o){const s=pe("cus-input"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com z-dragxml-input",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const Xl={name:"ZDragRadio",components:{CusRadio:z},ZDragXmlCom:!0,DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636179342649" class="icon" viewBox="0 0 1040 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3616" width="16" height="16"><path d="M509.92 176C325.504 176 176 325.504 176 509.92c0 184.416 149.504 333.92 333.92 333.92 184.416 0 333.92-149.504 333.92-333.92C843.84 325.504 694.32 176 509.92 176z m0 48c157.904 0 285.92 128 285.92 285.92 0 157.904-128.016 285.92-285.92 285.92C352 795.84 224 667.808 224 509.92 224 352 352 224 509.92 224z m0 96C405.024 320 320 405.024 320 509.92c0 104.88 85.024 189.92 189.92 189.92 104.88 0 189.92-85.04 189.92-189.92 0-104.896-85.04-189.92-189.92-189.92z" p-id="3617"></path></svg>\n<div class="z-dragxml-label__name">单选</div>\n</div>',mixins:[pl],methods:{setVal(e){this.cus_ref.state.value=e},CUS_RADIO(){},DRAG_CONFIG(){var e;return null!=(e=z.CUS_EDITOR())?e:{props:{}}},DRAG_EXPORT:()=>({ui:{widget:"CusRadio"}})},data:()=>({id:ZY.rid(6),INIT_CONFIG:{type:"string"},ui:{label:"单选",widgetConfig:{options2:ZY.JSON5.stringify([{label:"选项1",value:"radio1"},{label:"选项2",value:"radio2"}])}}})};Xl.render=function(e,t,n,i,a,o){const s=pe("cus-radio"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ref:e.get_cus_ref,ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const $l={name:"ZDragCheckbox",components:{CusCheckbox:P},ZDragXmlCom:!0,DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636179382934" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4511" width="16" height="16"><path d="M778.666667 128A117.333333 117.333333 0 0 1 896 245.333333v533.333334A117.333333 117.333333 0 0 1 778.666667 896H245.333333A117.333333 117.333333 0 0 1 128 778.666667V245.333333A117.333333 117.333333 0 0 1 245.333333 128h533.333334z m0 64H245.333333c-29.44 0-53.333333 23.893333-53.333333 53.333333v533.333334c0 29.44 23.893333 53.333333 53.333333 53.333333h533.333334c29.44 0 53.333333-23.893333 53.333333-53.333333V245.333333c0-29.44-23.893333-53.333333-53.333333-53.333333zM426.666667 616.106667l276.053333-276.053334a32 32 0 0 1 48.341333 41.642667l-3.114666 3.584-298.666667 298.666667a32 32 0 0 1-41.642667 3.114666l-3.584-3.114666-128-128a32 32 0 0 1 41.642667-48.341334l3.584 3.114667L426.666667 616.106667l276.053333-276.053334L426.666667 616.106667z" p-id="4512"></path></svg>\n<div class="z-dragxml-label__name">多选</div>\n</div>',mixins:[pl],methods:{setVal(e=[]){this.cus_ref.state.value=e},DRAG_CONFIG(){var e;return null!=(e=P.CUS_EDITOR())?e:{props:{}}},DRAG_EXPORT:()=>({ui:{widget:"CusCheckbox"}})},data:()=>({id:ZY.rid(6),INIT_CONFIG:{type:"string"},ui:{widgetConfig:{options2:ZY.JSON5.stringify([{label:"选项1",value:"check1"},{label:"选项2",value:"check2"}])}}})};$l.render=function(e,t,n,i,a,o){const s=pe("cus-checkbox"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ref:e.get_cus_ref,ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};let Wl=function(){return{type:"number",ui:{label:"数字输入",widgetConfig:{type:"number"}},rulesArr:[{value:ZY.JSON5.stringify({type:"any"})}]}};const Hl={name:"ZDragInputNumber",components:{CusInputNumber:U},ZDragXmlCom:!0,mixins:[pl],DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636443384554" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5113" width="16" height="16"><path d="M572.8 460.8c0-51.2-41.6-76.8-92.8-76.8-35.2 0-73.6 12.8-96 41.6l25.6 28.8c16-19.2 38.4-28.8 70.4-28.8 22.4 0 48 12.8 48 38.4 0 35.2-38.4 70.4-137.6 144v32H576v-38.4H464c64-51.2 108.8-92.8 108.8-140.8zM224 457.6l25.6 28.8 41.6-44.8V640H336V384h-38.4z m518.4 51.2c25.6-3.2 54.4-22.4 54.4-57.6 0-41.6-35.2-67.2-92.8-67.2-41.6 0-73.6 16-92.8 38.4l22.4 25.6c19.2-19.2 38.4-28.8 67.2-28.8 28.8 0 51.2 12.8 51.2 35.2 0 22.4-22.4 32-51.2 32H672v38.4h28.8c35.2 0 57.6 9.6 57.6 35.2 0 22.4-19.2 38.4-54.4 38.4-25.6 0-54.4-12.8-70.4-28.8L608 598.4c16 22.4 51.2 41.6 96 41.6 57.6 0 96-28.8 96-73.6 0-38.4-35.2-57.6-57.6-57.6z" p-id="5114"></path><path d="M896 192H128c-35.2 0-64 28.8-64 64v512c0 35.2 28.8 64 64 64h768c35.2 0 64-28.8 64-64V256c0-35.2-28.8-64-64-64z m0 544c0 19.2-12.8 32-32 32H160c-19.2 0-32-12.8-32-32V288c0-19.2 12.8-32 32-32h704c19.2 0 32 12.8 32 32v448z" p-id="5115"></path></svg>\n<div class="z-dragxml-label__name">数字输入框</div>\n</div>',DRAG_DEFAULT_VAL(){let e=Wl();return e.ui.label="默认值",e.rules=[{type:"any"}],e},methods:{DRAG_CONFIG:()=>({}),DRAG_EXPORT:()=>({ui:{label:"数字输入",widget:"CusInputNumber"}})},data:()=>({id:ZY.rid(6),self_config:Wl()})};Hl.render=function(e,t,n,i,a,o){const s=pe("cus-input-number"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com z-dragxml-input",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const Kl={name:"ZDragSelect",components:{CusSelect:j},ZDragXmlCom:!0,mixins:[pl],DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636443423038" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5983" width="16" height="16"><path d="M705.248 600.672l169.408-175.776h-56.48l-112.928 117.184-112.928-117.184h-56.448z" p-id="5984"></path><path d="M40 249.12v527.296h946.72V249.12H40z m58.592 58.592h829.536v410.112H98.592V307.712z" p-id="5985"></path></svg>\n<div class="z-dragxml-label__name">选择</div>\n</div>',DRAG_DEFAULT_VAL:()=>({type:"string"}),methods:{setVal(e){this.cus_ref.state.value=e},DRAG_CONFIG(){var e;return null!=(e=j.CUS_EDITOR())?e:{props:{}}},DRAG_EXPORT:()=>({ui:{widget:"CusSelect"}})},data:()=>({id:ZY.rid(6),INIT_CONFIG:{type:"string"},ui:{label:"选择",widgetConfig:{options2:ZY.JSON5.stringify([{label:"选项1",value:"option1"},{label:"选项2",value:"option2"}])}}})};Kl.render=function(e,t,n,i,a,o){const s=pe("cus-select"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com z-dragxml-input",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ref:e.get_cus_ref,ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const Jl={name:"ZDragDateTimePicker",components:{CusDateTimePicker:G},ZDragXmlCom:!0,DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636965563344" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2495" width="16" height="16"><path d="M674.88 801.344c-10.4 0-20.256 9.824-20.256 25.088 0 10.432 9.856 20.8 20.256 20.8 10.496 0 20.384-10.368 20.384-20.8 0-15.264-9.888-25.088-20.384-25.088z m-313.088-163.072h67.232v66.944h-67.232v-66.944z m-119.424 0h72.672v66.944H242.368v-66.944z m618.048-21.12c-10.432 0-20.32 9.824-20.32 20.16 0 15.328 9.888 20.224 20.32 20.224 15.424 0 25.92-4.896 25.92-20.224-0.032-10.336-10.496-20.16-25.92-20.16z m-370.976 0c-10.464 0-20.32 9.824-20.32 20.16 0 15.328 9.856 20.224 20.32 20.224 10.496 0 20.352-4.896 20.352-20.224 0-10.336-9.856-20.16-20.352-20.16z m-127.648-87.008h67.232v67.008h-67.232v-67.008z m-119.424 0h72.672v67.008H242.368v-67.008z m535.488-10.304l-82.592 81.344c-4.896 0-9.888-4.864-20.384-4.864-10.4 0-20.256 4.864-25.888 10.4l-87.488-61.824c-4.896-9.792-20.288-4.896-25.888 0-4.896 5.536 0 20.8 5.6 25.728l92.384 71.584c0 20.832 21.024 36.128 41.28 36.128 25.92 0 41.312-15.296 41.312-41.024v-4.864l87.52-87.52c5.568-9.792 10.464-20.192 0-25.088-4.928-5.536-15.392-5.536-25.856 0z m-102.976-86.944c-10.4 0-20.256 9.824-20.256 20.224s9.856 20.192 20.256 20.192c10.496 0 20.384-9.792 20.384-20.192s-9.888-20.224-20.384-20.224z m-313.088-10.848h67.232v66.944h-67.232v-66.944zM190.528 340.48v409.408h288.448c-20.32-30.56-30.816-71.552-30.816-112.608 0-56.288 20.96-107.712 56.704-148.096h-30.816v-66.72h67.168v30.624c35.68-25.696 82.56-41.024 133.664-41.024h36.384v-71.616l-520.736 0.032z m149.76-107.712v56.288h221.216V232.768h-221.216zM180.064 186.88h541.056c25.888 0 46.848 20.768 46.848 45.92v200.096c82.016 35.488 138.688 112 138.688 204.416 0 127.936-102.944 230.144-231.776 230.144-51.104 0-102.88-20.224-144.16-50.816H180.064c-25.28 0-46.24-20.832-46.24-46.496V232.768A46.4 46.4 0 0 1 180.064 186.88" p-id="2496"></path></svg>\n<div class="z-dragxml-label__name">日期选择器</div>\n</div>',DRAG_DEFAULT_VAL:()=>({type:"string",ui:{label:"默认值",widget:"CusDateTimePicker",widgetConfig:{valueFormat:"YYYY-MM-DD HH:mm:ss"}},rules:[{type:"any"}]}),mixins:[pl],methods:{DRAG_CONFIG(){var e;let t=null!=(e=G.CUS_EDITOR())?e:{props:{}};return Reflect.deleteProperty(t.props,"type"),t},DRAG_EXPORT:()=>({ui:{widget:"CusDateTimePicker"}})},data:()=>({id:ZY.rid(6),INIT_CONFIG:{type:"string",sub_type:"datetime"},ui:{label:"时间日期选择",widgetConfig:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}})};Jl.render=function(e,t,n,i,a,o){const s=pe("cus-date-time-picker"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com z-dragxml-input",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const ql={name:"ZDragSlider",components:{CusSlider:Z},ZDragXmlCom:!0,DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636956012974" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2264" width="16" height="16"><path d="M951.453 476.844H523.672a131.836 131.836 0 0 0-254.18 0H72.547v70.312h196.945a131.836 131.836 0 0 0 254.18 0h427.781z" p-id="2265"></path></svg>\n<div class="z-dragxml-label__name">滑块</div>\n</div>',mixins:[pl],methods:{DRAG_CONFIG(){var e;return null!=(e=Z.CUS_EDITOR())?e:{props:{}}},DRAG_EXPORT:()=>({ui:{widget:"CusSlider"}})},data:()=>({id:ZY.rid(6),INIT_CONFIG:{type:"number"},ui:{label:"滑块",widgetConfig:{}}})};ql.render=function(e,t,n,i,a,o){const s=pe("cus-slider"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com z-dragxml-input",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const Ql={name:"ZDragTimePicker",components:{CusTimePicker:F},ZDragXmlCom:!0,DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1637026689733" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2490" width="16" height="16"><path d="M511.488 32C246.592 32 32 247.04 32 512c0 264.96 214.592 480 479.488 480 265.472 0 480.512-215.04 480.512-480 0-264.96-215.04-480-480.512-480zM512 896c-212.16 0-384-171.84-384-384s171.84-384 384-384 384 171.84 384 384-171.84 384-384 384z m24-624H464v288l252.032 151.232 35.968-59.072-216-128.128V272z" p-id="2491"></path></svg>\n<div class="z-dragxml-label__name">时间选择器</div>\n</div>',DRAG_DEFAULT_VAL:()=>({type:"string",ui:{label:"默认值",widget:"CusTimePicker",widgetConfig:{valueFormat:"HH:mm:ss"}},rules:[{type:"any"}]}),mixins:[pl],methods:{DRAG_CONFIG(){var e;let t=null!=(e=F.CUS_EDITOR())?e:{props:{}};return Reflect.deleteProperty(t.props,"type"),t},DRAG_EXPORT:()=>({ui:{widget:"CusTimePicker"}})},data:()=>({id:ZY.rid(6),INIT_CONFIG:{type:"string",sub_type:"time"},ui:{label:"时间选择",widgetConfig:{valueFormat:"HH:mm:ss"}}})};Ql.render=function(e,t,n,i,a,o){const s=pe("cus-time-picker"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com z-dragxml-input",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const eu={name:"ZDragCascader",components:{CusCascader:B},ZDragXmlCom:!0,DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1637561889615" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2486" width="16" height="16"><path d="M128 512V224c0-16 12.8-32 32-32h384c19.2 0 32 12.8 32 32v288c0 16-12.8 32-32 32h-32v64h64c35.2 0 64-28.8 64-64V192c0-35.2-28.8-64-64-64H128c-35.2 0-64 28.8-64 64v352c0 35.2 28.8 64 64 64h192v-64H160c-16 0-32-12.8-32-32z" fill="#333333" p-id="2487"></path><path d="M896 416H704v64h160c19.2 0 32 12.8 32 32v288c0 16-12.8 32-32 32H480c-19.2 0-32-12.8-32-32V512c0-16 12.8-32 32-32h32v-64h-64c-35.2 0-64 28.8-64 64v352c0 35.2 28.8 64 64 64h448c35.2 0 64-28.8 64-64V480c0-35.2-28.8-64-64-64z" fill="#333333" p-id="2488"></path></svg>\n<div class="z-dragxml-label__name">级联</div>\n</div>',mixins:[pl],methods:{setVal(e=[]){this.cus_ref.state.value=e},DRAG_CONFIG(){var e;return null!=(e=B.CUS_EDITOR())?e:{props:{}}},DRAG_EXPORT:()=>({ui:{widget:"CusCascader"}})},data:()=>({id:ZY.rid(6),ui:{INIT_CONFIG:{type:"string"},widgetConfig:{tree_options:ZY.JSON5.stringify([{value:"part",label:{type:"i18n",en_US:"dep",zh_CN:"部门"},children:[{value:"part_a",label:"A部门"},{value:"part_b",label:"B部门"}]},{value:"product",label:"产品",children:[{value:"product_a",label:"a产品"},{value:"product_b",label:"b产品"}]}])}}})};eu.render=function(e,t,n,i,a,o){const s=pe("cus-cascader"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ref:e.get_cus_ref,ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const tu={name:"ZDragRate",components:{CusRate:Y},ZDragXmlCom:!0,DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636955855948" class="icon" viewBox="0 0 1069 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3535" width="16" height="16"><path d="M633.73 378.02l9.498 18.688 20.78 2.798 206.616 27.332a11.465 11.465 0 0 1 6.61 19.473L729.966 593.665l-14.893 14.893 3.8 20.683 37.847 204.89a11.465 11.465 0 0 1-16.481 12.296l-185.55-94.58-18.687-9.493-18.487 9.992-183.24 99.35a11.465 11.465 0 0 1-16.784-11.867l32.543-205.796 3.297-20.786-15.192-14.492-151.033-143.484a11.465 11.465 0 0 1 6.1-19.64L399 402.998l20.786-3.296 9.092-18.98 89.713-188.078a11.465 11.465 0 0 1 20.569-0.263l94.568 185.635zM496.647 85.52L374.89 340.501l-279.126 44.26a34.395 34.395 0 0 0-18.303 58.908l204.873 194.663-44.169 279.115a34.395 34.395 0 0 0 50.366 35.616l248.4-134.679L788.776 946.66a34.395 34.395 0 0 0 49.437-36.894l-51.306-277.854 199.731-199.909a34.395 34.395 0 0 0-19.828-58.408l-280.118-37.032L558.33 84.713a34.395 34.395 0 0 0-61.682 0.802z" p-id="3536"></path></svg>\n<div class="z-dragxml-label__name">打分</div>\n</div>',mixins:[pl],data:()=>({id:ZY.rid(6),INIT_CONFIG:{type:"number"},ui:{label:"打分",widgetConfig:{}}}),methods:{DRAG_CONFIG(){var e;return null!=(e=Y.CUS_EDITOR())?e:{props:{}}},DRAG_EXPORT:()=>({ui:{label:"打分",widget:"CusRate"}})}};tu.render=function(e,t,n,i,a,o){const s=pe("cus-rate"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com z-dragxml-input",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const nu={name:"ZDragRichText",components:{CusRichText:X},DRAG_GROUP:"high",ZDragXmlCom:!0,mixins:[pl],DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1637649668729" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8321" width="16" height="16"><path d="M468.139 250.539a12.203 12.203 0 0 0-2.475-0.256H229.248a11.99 11.99 0 0 0-11.861 11.818v63.232a11.69 11.69 0 0 0 11.648 11.648h0.213a11.776 11.776 0 0 0 11.648-10.453v0.256a44.8 44.8 0 0 1 43.179-46.336h18.901a15.19 15.19 0 0 1 14.677 13.781v196.267a20.139 20.139 0 0 1-19.498 19.755h-10.752a11.69 11.69 0 0 0-11.691 11.648v0.213a11.69 11.69 0 0 0 11.69 11.69h120.235a11.69 11.69 0 0 0 11.691-11.69v-0.213a11.69 11.69 0 0 0-11.69-11.648h-13.995a15.53 15.53 0 0 1-16.214-13.483v-203.52a13.27 13.27 0 0 1 13.654-13.27h20.522a42.667 42.667 0 0 1 43.094 37.035v8.235a11.69 11.69 0 0 0 11.648 11.648h0.213a11.69 11.69 0 0 0 11.69-11.648v-63.232a11.733 11.733 0 0 0-10.111-11.477zM539.477 250.197h251.179v42.667H539.477zM539.477 370.73h251.179v42.667H539.477z" p-id="8322"></path><path d="M960 960H42.667V42.667H960z m-853.333-64H896V106.667H106.667z" p-id="8323"></path><path d="M802.09 536.661a64.939 64.939 0 0 0-91.22 10.582L501.332 811.349 342.101 704.256a63.104 63.104 0 0 0-73.301 2.048L42.667 877.44V960H960V745.216L813.952 548.949a65.75 65.75 0 0 0-11.861-12.288z" p-id="8324"></path></svg>\n<div class="z-dragxml-label__name">图文展示</div>\n</div>',data:()=>({id:ZY.rid(6),ui:{label:"",hiddenLabel:!0,widgetConfig:{html_content:"{content:[{type:'paragraph',children:[{text:'图文展示'}]}],html:'<div class=\"w-e-content-container\">\\r\\n <p>图文展示</p>\\r\\n</div>'}"}}}),methods:{DRAG_CONFIG(){var e;let t=null!=(e=X.CUS_EDITOR())?e:{props:{}};return Reflect.deleteProperty(t.props,"type"),t},DRAG_EXPORT:()=>({INIT_CONFIG:{type:"string"},ui:{widget:"CusRichText"}})}};nu.render=function(e,t,n,i,a,o){const s=pe("cus-rich-text"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const iu={name:"ZDragUpload",components:{CusUploader:$},ZDragXmlCom:!0,DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1637134266814" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2469" width="16" height="16"><path d="M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163c-3.2-4.1-9.4-4.1-12.6 0l-112 141.7c-4.1 5.3-0.4 13 6.3 13z" p-id="2470"></path><path d="M878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z" p-id="2471"></path></svg>\n<div class="z-dragxml-label__name">上传</div>\n</div>',mixins:[pl],methods:{DRAG_CONFIG(){var e;let t=null!=(e=$.CUS_EDITOR())?e:{props:{}};return Reflect.deleteProperty(t.props,"type"),t},DRAG_EXPORT:()=>({ui:{widget:"CusUploader"}})},data:()=>({id:ZY.rid(6),ui:{label:"附件",widgetConfig:{}}})};iu.render=function(e,t,n,i,a,o){const s=pe("cus-uploader"),r=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com z-dragxml-input",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(r,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ge(s,{ui:e.cus_config.ui},null,8,["ui"])])),_:1},16,["label","desc"])],34)};const au={name:"ZDragAddress",components:{},DRAG_GROUP:"high",ZDragXmlCom:!0,mixins:[pl],DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1638940155813" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3128" width="16" height="16"><path d="M511.629135 1023.597858c-264.061121 0-475.258836-59.041771-475.258836-156.396716 0-62.624491 77.503749-104.227919 202.423706-130.330596 19.485612-5.227847 38.824991 6.872974 40.360442 25.956444a33.268119 33.268119 0 0 1-26.431703 41.749661c-91.542164 19.229704-146.087255 48.768868-146.087254 62.624491 0 3.436487 5.300964 8.664334 21.167297 19.083471 19.30282 12.210496 47.452767 24.311317 84.44984 34.730453 77.46719 22.519957 186.703606 34.767012 301.058193 34.767012 114.464263 0 221.87276-12.247055 301.094752-34.767012 36.850839-10.419136 65.073902-22.519957 84.413281-34.730453 14.038415-10.419136 19.339379-15.646983 19.339379-19.083471 0-15.646983-59.772938-46.977508-160.12567-66.060978a33.962728 33.962728 0 0 1-28.113388-39.9583 34.36487 34.36487 0 0 1 40.506676-27.747805c133.693966 25.956444 216.462121 69.497465 216.462121 133.767083 0 97.354945-211.197715 156.396715-475.258836 156.396716z m83.31653-193.320671c-17.438343 15.683542-33.01221 28.149946-46.575366 37.070189-18.425419 12.210496-32.463834 17.657694-45.515173 17.657694-12.868547 0-26.94352-5.447197-45.478615-17.657694a410.989218 410.989218 0 0 1-46.575366-37.070189c-36.37558-32.683185-76.077972-75.45648-111.905177-120.642628-55.824634-70.374866-149.596858-206.701035-149.596858-328.111389 0-103.569868 33.779936-198.914102 95.051767-268.375009A328.403856 328.403856 0 0 1 356.511962 30.270332c44.784006-20.107105 93.991574-30.30689 146.343164-30.30689s101.632274 10.199786 146.343163 30.30689a329.061906 329.061906 0 0 1 112.197643 82.877829c61.344948 69.460907 95.015209 164.805141 95.015209 268.375009 0 121.410353-93.735666 257.626848-149.5603 328.111389-35.863763 45.186148-75.566155 88.069118-111.905176 120.642628zM502.855126 63.501892c-170.21578 0-289.213281 130.69618-289.213281 317.911603 0 72.166226 46.831275 174.090968 128.575794 279.488754 32.207926 41.493752 68.473831 81.817637 102.217208 113.367512 31.074616 29.027347 50.194645 41.639986 58.274045 45.844198 8.152517-4.204213 27.235987-16.816851 58.310603-45.844198a995.557587 995.557587 0 0 0 102.253767-113.367512c81.74452-105.397787 128.539236-207.322528 128.539236-279.488754 0.255909-187.215423-118.631917-317.911603-288.957372-317.911603z m0 455.480757a172.482399 172.482399 0 0 1-121.849054-49.755944 168.058836 168.058836 0 0 1-50.413995-120.277044c0-45.442056 17.950161-88.178793 50.413995-120.240486a172.336166 172.336166 0 0 1 121.849054-49.792502c46.063549 0 89.348661 17.694252 121.849054 49.792502a167.802928 167.802928 0 0 1 50.413995 120.240486c0 45.442056-17.913602 88.215352-50.413995 120.277044a172.189932 172.189932 0 0 1-121.849054 49.755944z m0-276.564084c-59.443913 0-107.774081 47.745234-107.774081 106.421421s48.330168 106.384863 107.774081 106.384862 107.810639-47.708675 107.810639-106.384862c0-58.676187-48.220493-106.421421-107.810639-106.421421z" fill="" p-id="3129"></path></svg>\n<div class="z-dragxml-label__name">地址</div>\n</div>',data:()=>({id:ZY.rid(6),ui:{label:"",hiddenLabel:!0,widgetConfig:{}}}),methods:{DRAG_CONFIG:()=>({}),DRAG_EXPORT:()=>({INIT_CONFIG:{type:"string"},ui:{widget:"CusAddress"}})}},ou=be(" address ");au.render=function(e,t,n,i,a,o){const s=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"]))},[ge(s,se(e.form_config,{label:e.GET_CONFIG("ui.label",""),desc:e.GET_CONFIG("ui.desc","")}),{default:he((()=>[ou])),_:1},16,["label","desc"])],34)};const su={name:"ZDragGrid",components:{RenderJsx:ul,CusInput:V},DRAG_GROUP:"high",DRAG_GRID:!0,ZDragXmlCom:!0,DRAG_EXPORT:()=>({wrap:"z-drag-grid"}),DRAG_CONFIG:()=>({}),DRAG_DATASET:()=>({columnMax:1}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636618182481" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2847" width="16" height="16"><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-696 72h136v656H184V184z m656 656H384V384h456v456zM384 320V184h456v136H384z" p-id="2848"></path></svg>\n<div class="z-dragxml-label__name">布局容器</div>\n</div>',mixins:[pl],methods:{ondragend(e,t){let n=function(e,t=1){let n=getComputedStyle(e),i=parseFloat(n.marginBottom),a=parseFloat(n.marginTop),o=e.getBoundingClientRect();return{xRange:[o.left,o.left+o.width],yRange:[o.top-a,o.top+o.height*t+i]}}(t.target,.5);t.clientY<n.yRange[1]&&this.dragxml.onGridDragEnter({e:t,state:this.state,context:this,itemKey:e})},ondragleave(){this.dragxml.onGridDragleave()},getDom(e){return this.state.dom[e]},initDomCom(e,t){if(this.state.dom[e]){let n=this.state.dom[e],i="z_drag_grid_item__"+ZY.rid(),a={layoutUUID:this.layout_uuid,gridUUID:this.uuid,itemUUID:i,gridItemUUID:e,layout_uuid:this.layout_uuid,uuid:i};n.jsx=$e(t,a,[]),n.def=r({com:t},a),t.DRAG_LABEL_XML&&(n.def.label_xml=t.DRAG_LABEL_XML()),n.sef={comName:t.name,uuid:a.uuid,props:a}}},getTree(){let e=this,t=Te(this.state.dom),n=[];return ZY.lodash.each(t,(function(t,i){let a={id:i,itemUUID:i,NOT_ACTION:!0,DRAG_GRID_ITEM:!0,GRID_UUID:e.uuid,label:"布局"};if(t.def){let e=t.def.com,n=r({label:e.name,id:t.def.itemUUID},t.def);e.DRAG_LABEL_XML&&(n.label_xml=e.DRAG_LABEL_XML()),a.children=[n]}n.push(a)})),n},clearGridItem(e=""){this.state.dom[e]&&(this.state.dom[e].jsx=null,this.state.dom[e].def=null)},toMemo(){let e=Te(this.state.dom),t={};return ZY.lodash.each(e,(function(n,i){t[i]={sef:ZY.JSON5.parse(ZY.JSON5.stringify(e[i].sef))}})),{dom:t}},fromMemo(e){let t=this;ZY.lodash.each(e.dom,(function(e,n){if(e.sef){let i=CustomVueComponent.resolve(e.sef.comName);t.state.dom[n]={sef:e.sef,def:r({com:i},e.sef.props),jsx:$e(i,e.sef.props,[])}}}))},onGridItemMouseEnter(e){if(e.target)if(e.target.children&&e.target.children[0]){let t=e.target.children[0],n=getComputedStyle(t),i=parseFloat(n.marginBottom),a=parseFloat(n.marginTop),o=e.target.children[0].getBoundingClientRect(),s=[o.left,o.left+o.width],r=[o.top-a,o.top+o.height+i];if(e.clientX<s[1]&&e.clientX>s[0]&&e.clientY<r[1]&&e.clientY>r[0])return void this.dragxml.onMouseEnter2(e.target.children[0]);this.dragxml.onMouseEnter2(e.target)}else this.dragxml.onMouseEnter2(e.target)}},props:{initColumnLen:{type:Number,default:3}},data(){let e={};for(let t=0;t<this.initColumnLen;t++)e["z_grid_column__"+ZY.rid(10)]={jsx:null,def:null,sef:null};return{id:ZY.rid(6),DATA_IS_DRAG_GRID:!0,ui:{widgetConfig:{}},gridItemMouseEnterLast:null,state:{dom:e}}},mounted(){this.dragxml.reloadTree()}},ru=["onDragover","data-grid-id","data-key","data-item-id"];su.render=function(e,t,n,i,a,o){const s=pe("render-jsx");return q(),Q("div",{class:ue(["z-dragxml-com z-drag-grid",e.zdrag__highlight_cls("itemUUID",e.uuid)]),onMouseenter:t[1]||(t[1]=Xe(((...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),["stop"])),onDragleave:t[2]||(t[2]=(...e)=>o.ondragleave&&o.ondragleave(...e)),onMouseleave:t[3]||(t[3]=(...e)=>o.ondragleave&&o.ondragleave(...e))},[(q(!0),Q(ee,null,te(a.state.dom,((n,i)=>(q(),Q("div",{class:"z-drag-grid__item",style:{height:"90px","pointer-events":"initial"},onDragover:Xe((e=>o.ondragend(i,e)),["prevent"]),onMousemove:t[0]||(t[0]=(...e)=>o.onGridItemMouseEnter&&o.onGridItemMouseEnter(...e)),"data-grid-id":e.uuid,"data-key":i,"data-item-id":n.sef?n.sef.uuid:"","z-drag-grid-item":""},[ge(s,{render:n.jsx},null,8,["render"])],40,ru)))),256))],34)};const lu={name:"ZDragSubForm",components:{},ZDragXmlCom:!0,mixins:[pl],DRAG_CONFIG:()=>({}),DRAG_SUB_FORM:!0,DRAG_DATASET:()=>({columnMax:1e6}),DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1636179309099" class="icon" viewBox="0 0 1117 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2623" width="16" height="16"><path d="M1024.418909 1024h-930.909091a93.090909 93.090909 0 0 1-93.090909-93.090909V93.090909a93.090909 93.090909 0 0 1 93.090909-93.090909h930.909091a93.090909 93.090909 0 0 1 93.090909 93.090909v837.818182a93.090909 93.090909 0 0 1-93.090909 93.090909z m46.545455-930.909091a46.545455 46.545455 0 0 0-46.545455-46.545454h-930.909091a46.545455 46.545455 0 0 0-46.545454 46.545454v837.818182a46.545455 46.545455 0 0 0 46.545454 46.545454h930.909091a46.545455 46.545455 0 0 0 46.545455-46.545454V93.090909z m-186.181819 791.272727h-651.636363a93.090909 93.090909 0 0 1-93.090909-93.090909V232.727273a93.090909 93.090909 0 0 1 93.090909-93.090909h651.636363a93.090909 93.090909 0 0 1 93.09091 93.090909v558.545454a93.090909 93.090909 0 0 1-93.09091 93.090909z m-698.181818-93.090909a46.545455 46.545455 0 0 0 46.545455 46.545455h325.818182v-139.636364h-372.363637v93.090909z m0-139.636363h372.363637v-139.636364h-372.363637v139.636364z m0-186.181819h372.363637V325.818182h-372.363637v139.636363z m744.727273-232.727272a46.545455 46.545455 0 0 0-46.545455-46.545455h-651.636363a46.545455 46.545455 0 0 0-46.545455 46.545455v46.545454h744.727273V232.727273z m0 93.090909h-325.818182v139.636363h325.818182V325.818182z m0 186.181818h-325.818182v139.636364h325.818182v-139.636364z m0 186.181818h-325.818182v139.636364h279.272727a46.545455 46.545455 0 0 0 46.545455-46.545455v-93.090909z" p-id="2624"></path></svg>\n<div class="z-dragxml-label__name">子表单</div>\n</div>',data:()=>({id:ZY.rid(6),DATA_IS_SUB_FORM:!0,ui:{widgetConfig:{type:"textarea"}}}),methods:{callParentMoveEnter(e){this.draginit&&this.draginit.onMouseEnter()}}},uu=[me("div",null,"子表单",-1)];lu.render=function(e,t,n,i,a,o){return q(),Q("div",{class:"z-dragxml-com",onMouseenter:t[0]||(t[0]=Xe(((...e)=>o.callParentMoveEnter&&o.callParentMoveEnter(...e)),["stop"]))},uu,32)};const du=function(e,{DRAG_GROUP:t,columnMax:n=1,DRAG_LABEL_XML:i,INIT_CONFIG:a={},DRAG_UI_CONFIG:o=(()=>{}),DRAG_EXPORT:s=(()=>{}),DRAG_CONFIG:l=(()=>{})}={}){let u=ZY.rid(6);return{name:e,DRAG_GROUP:t,ZDragXmlCom:!0,mixins:[pl],DRAG_DATASET:()=>({columnMax:n}),DRAG_LABEL_XML:()=>i(),data:()=>({id:u}),methods:{DRAG_CONFIG:()=>l?l():{},DRAG_UI_CONFIG:()=>o?o():{},DRAG_EXPORT:()=>r({INIT_CONFIG:a},s())}}}("ZDragCustom",{DRAG_LABEL_XML:()=>'<div class="z-dragxml-row">\n<svg t="1639702173120" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2060" width="16" height="16"><path d="M811.008 335.872c-2.048-7.168-11.264-9.216-17.408-4.096L690.176 435.2c-8.192 8.192-20.48 8.192-28.672 0l-72.704-72.704c-8.192-8.192-8.192-20.48 0-28.672l104.448-104.448c5.12-5.12 3.072-14.336-4.096-17.408-17.408-4.096-35.84-7.168-54.272-7.168-108.544 0-195.584 94.208-183.296 204.8 2.048 17.408 6.144 32.768 12.288 48.128L225.28 697.344c-27.648 27.648-27.648 73.728 0 101.376 14.336 14.336 32.768 21.504 51.2 21.504s36.864-7.168 51.2-21.504l238.592-238.592c15.36 6.144 31.744 10.24 48.128 12.288 111.616 12.288 204.8-74.752 204.8-183.296 0-18.432-3.072-36.864-8.192-53.248z" p-id="2061"></path></svg>\n<div class="z-dragxml-label__name">自定义</div>\n</div>',INIT_CONFIG:{type:"string"},DRAG_EXPORT:()=>({ui:{custom:!0}}),DRAG_UI_CONFIG:()=>({cusWidget:{type:"string",ui:{label:"自定义"}}})});du.render=function(e,t,n,i,a,o){const s=pe("z-cell-item");return q(),Q("div",{class:ue(["z-dragxml-com",e.zdrag__highlight()]),onMouseenter:t[0]||(t[0]=Xe(((...t)=>e.zdrag__onMouseEnter&&e.zdrag__onMouseEnter(...t)),["stop"]))},[ge(s,se(e.zdrag__form_config,{label:e.zdrag__GET_CONFIG("ui.label",""),desc:e.zdrag__GET_CONFIG("ui.desc","")}),{default:he((()=>[be(Ie(e.zdrag__GET_CONFIG("ui.cusWidget","")),1)])),_:1},16,["label","desc"])],34)};var cu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",install:function(e){CustomVueComponent.app=e,CustomVueComponent.register(Yl),CustomVueComponent.register(lu),CustomVueComponent.register(Xl),CustomVueComponent.register(tu),CustomVueComponent.register(ql),CustomVueComponent.register(Ql),CustomVueComponent.register(Jl),CustomVueComponent.register($l),CustomVueComponent.register(au),CustomVueComponent.register(iu),CustomVueComponent.register(du),CustomVueComponent.register(nu),CustomVueComponent.register(Hl),CustomVueComponent.register(su),CustomVueComponent.register(eu),CustomVueComponent.register(Kl),CustomVueComponent.register(Bl)}});CustomVueComponent.register(ol),CustomVueComponent.register(sl),CustomVueComponent.register(Gl),CustomVueComponent.register(Ts),CustomVueComponent.register(Is),CustomVueComponent.register(ts),CustomVueComponent.register(xs),CustomVueComponent.register(sr),CustomVueComponent.register(Ns),CustomVueComponent.register(yr),CustomVueComponent.register(_o),CustomVueComponent.register(gr),CustomVueComponent.register(yo),CustomVueComponent.register(Zs),CustomVueComponent.app.use(cu),S((()=>import("./CusXmlShower.7ec681d0.js")),["assets/CusXmlShower.7ec681d0.js","assets/index.23ee6f22.js","assets/index.71233784.css","assets/vendor.70e2a6e0.js","assets/CommonRender.d6009dc7.js","assets/nodes.a56b7126.js","assets/form.e330999e.js"]).then((e=>{CustomVueComponent.register(e.default)}));export{gs as _,Ws as a,wl as b,ws as c,Ms as d,cn as e,Lo as f,ko as g,co as h,kt as i,uo as j,jl as k};
