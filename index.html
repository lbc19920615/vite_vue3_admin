<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
    <script src="./three.js"></script>
  </head>
  <body>
{% include './src/htmls/template.html' %}

    <div id="app"></div>
    <div id="storeApp"></div>
    <template id="loading-tpl">
        <div
        style="position: fixed; left: 0; top: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;"
        >
            <div style="font-size: 60px;">Loading...</div>
        </div>
    </template>
    <script>
        class AppLoading extends HTMLElement {
            constructor() {
                super();
                let tmpl = document.getElementById('loading-tpl')
                let shadowRoot = this.attachShadow({mode: 'open'});
                shadowRoot.appendChild(tmpl.content.cloneNode(true));
            }
        }
        window.customElements.define('app-loading', AppLoading);
        globalThis.importScripts = function (p = '') {
          return import(p)
        }
    </script>
    <script src="http://localhost:7002/public/vue3-sfc-loader.js"></script>
    <script type="module">
      import { moduleConfig, initBsLoader } from 'http://localhost:7002/public/vue-bs-loader.js'
      globalThis.moduleConfig = moduleConfig
      globalThis.initBsLoader = initBsLoader
      import { loadTemplate,initTemplate } from 'http://localhost:7002/public/template-loader.js'
      globalThis.loadTemplate = loadTemplate
      globalThis.initTemplate = initTemplate
    </script>
    <script type="module" src="/src/main.js"></script>
    <script type="module">
      globalThis.app = window.startApp()
    </script>
  </body>
</html>
